<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>CosmicCuriosity — Tonight's Sky, Planets Visible Now & Space Events 2026</title>
    <meta name="title" content="CosmicCuriosity — Tonight's Sky, Planets Visible Now & Space Events 2026">
    <meta name="description" content="See what planets are visible tonight from your location. Free live sky map, moon phase, meteor shower calendar, eclipse dates 2026, NASA daily images. Best stargazing guide updated hourly.">
    <meta name="keywords" content="planets visible tonight, what's in the sky tonight, night sky tonight, stargazing near me, meteor shower 2026, solar eclipse 2026, lunar eclipse 2026, moon phase tonight, Jupiter visible tonight, Mars visible tonight, Venus tonight, Saturn rings, NASA picture of the day, Perseid meteor shower, Geminid meteor shower, best time to stargaze, dark sky locations, astronomy for beginners, space news today, Artemis II launch, celestial events 2026, blood moon 2026, when is the next eclipse, ISS tracker, constellation guide">
    <meta name="author" content="CosmicCuriosity">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="language" content="English">
    <meta name="revisit-after" content="1 days">
    <meta name="geo.region" content="US">
    <meta name="geo.placename" content="United States">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://cosmiccuriosity.io/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cosmiccuriosity.io/">
    <meta property="og:title" content="CosmicCuriosity — Tonight's Sky, Astronomy Events & Space News">
    <meta property="og:description" content="Discover what's visible in the night sky tonight. Free personalized stargazing guide with meteor showers, eclipses, planet visibility, NASA images, and space news.">
    <meta property="og:image" content="https://cosmiccuriosity.io/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="CosmicCuriosity">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://cosmiccuriosity.io/">
    <meta name="twitter:title" content="CosmicCuriosity — Tonight's Sky, Astronomy Events & Space News">
    <meta name="twitter:description" content="Discover what's visible in the night sky tonight. Free personalized stargazing guide with meteor showers, eclipses, planet visibility, and space news.">
    <meta name="twitter:image" content="https://cosmiccuriosity.io/og-image.jpg">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%231a1a3e'/%3E%3Cstop offset='100%25' stop-color='%23050510'/%3E%3C/linearGradient%3E%3ClinearGradient id='p' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236366f1'/%3E%3Cstop offset='100%25' stop-color='%2306b6d4'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='48' fill='url(%23bg)'/%3E%3Ccircle cx='50' cy='50' r='20' fill='url(%23p)'/%3E%3Cellipse cx='50' cy='52' rx='32' ry='8' fill='none' stroke='%23f59e0b' stroke-width='3' opacity='0.6'/%3E%3Ccircle cx='20' cy='25' r='2' fill='white' opacity='0.8'/%3E%3Ccircle cx='75' cy='28' r='3' fill='%23f59e0b'/%3E%3Ccircle cx='80' cy='70' r='1.5' fill='white' opacity='0.6'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%231a1a3e'/%3E%3Cstop offset='100%25' stop-color='%23050510'/%3E%3C/linearGradient%3E%3ClinearGradient id='p' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236366f1'/%3E%3Cstop offset='100%25' stop-color='%2306b6d4'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='48' fill='url(%23bg)'/%3E%3Ccircle cx='50' cy='50' r='20' fill='url(%23p)'/%3E%3Cellipse cx='50' cy='52' rx='32' ry='8' fill='none' stroke='%23f59e0b' stroke-width='3' opacity='0.6'/%3E%3Ccircle cx='20' cy='25' r='2' fill='white' opacity='0.8'/%3E%3Ccircle cx='75' cy='28' r='3' fill='%23f59e0b'/%3E%3Ccircle cx='80' cy='70' r='1.5' fill='white' opacity='0.6'/%3E%3C/svg%3E">
    
    <!-- PWA Manifest & Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CosmicCuriosity">
    
    <meta name="theme-color" content="#050510">
    <meta name="msapplication-TileColor" content="#050510">
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "CosmicCuriosity",
        "alternateName": ["CosmicCuriosity", "Cosmic Curiosity"],
        "url": "https://cosmiccuriosity.io/",
        "description": "Your window to the universe. Discover tonight's sky, upcoming celestial events, stunning space imagery, and the latest astronomy news.",
        "publisher": {
            "@type": "Organization",
            "name": "CosmicCuriosity",
            "logo": {
                "@type": "ImageObject",
                "url": "https://cosmiccuriosity.io/logo.svg"
            }
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://cosmiccuriosity.io/?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What planets are visible tonight?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Planet visibility changes nightly based on your location and time. In January 2026, Jupiter dominates the evening sky, Venus appears low in the west at twilight, Saturn is visible in the early evening, and Mars rises later at night. Use CosmicCuriosity's free sky guide to see exactly what's visible from your location right now."
                }
            },
            {
                "@type": "Question",
                "name": "When is the next meteor shower in 2026?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Major meteor showers in 2026: Quadrantids (Jan 3-4, 120/hr), Lyrids (April 22-23, 18/hr), Eta Aquariids (May 5-6, 50/hr), Perseids (Aug 11-13, 100/hr - best show with new moon!), Orionids (Oct 21, 20/hr), Leonids (Nov 17, 15/hr), and Geminids (Dec 13-14, 150/hr). The 2026 Perseids will be exceptional due to perfect dark sky conditions."
                }
            },
            {
                "@type": "Question",
                "name": "When is the next solar eclipse?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The next total solar eclipse is August 12, 2026, visible from Greenland, Iceland, Spain, and Portugal with totality lasting up to 2 minutes 18 seconds. Before that, an annular eclipse occurs February 17, 2026, visible from Antarctica and southern South America."
                }
            },
            {
                "@type": "Question",
                "name": "When is the next lunar eclipse?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The next total lunar eclipse (blood moon) is March 3, 2026, visible from Asia, Australia, the Pacific, and western North America. A second total lunar eclipse occurs August 28, 2026, visible from Europe, Africa, Asia, and Australia."
                }
            },
            {
                "@type": "Question",
                "name": "What is the moon phase tonight?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The moon goes through 8 phases in a 29.5-day cycle: New Moon, Waxing Crescent, First Quarter, Waxing Gibbous, Full Moon, Waning Gibbous, Last Quarter, and Waning Crescent. Visit CosmicCuriosity to see tonight's exact moon phase, illumination percentage, rise/set times, and how it affects stargazing."
                }
            },
            {
                "@type": "Question",
                "name": "What is the best time to stargaze tonight?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The best stargazing is typically 1-2 hours after sunset once the sky is fully dark, and continues until moonrise (if the moon is bright). Check for clear skies, find a location away from city lights (Bortle class 4 or darker), and let your eyes adjust to darkness for 20-30 minutes. Our sky guide shows optimal viewing windows for your location."
                }
            },
            {
                "@type": "Question",
                "name": "Where can I find dark sky locations near me?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Dark sky locations are measured on the Bortle scale (1-9, lower is better). Look for International Dark Sky Parks, state/national parks, or rural areas 50+ miles from major cities. CosmicCuriosity links to the Light Pollution Map to help you find the darkest skies near your location."
                }
            },
            {
                "@type": "Question",
                "name": "Can I see Jupiter's moons with binoculars?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! Jupiter's four largest moons (Io, Europa, Ganymede, and Callisto) are visible with standard 7x50 or 10x50 binoculars. They appear as tiny dots in a line near Jupiter. Their positions change nightly as they orbit. A small telescope will also reveal Jupiter's cloud bands."
                }
            },
            {
                "@type": "Question",
                "name": "When is the Artemis II mission launch?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "NASA's Artemis II mission is scheduled for launch in February 2026. It will be the first crewed mission to the Moon since Apollo 17 in 1972. Four astronauts will orbit the Moon aboard the Orion spacecraft, paving the way for future lunar landings."
                }
            },
            {
                "@type": "Question",
                "name": "How do I photograph the night sky with my phone?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Use your phone's Night Mode or Pro/Manual mode with these settings: ISO 800-3200, exposure 15-30 seconds, focus set to infinity. Use a tripod or stable surface, turn off flash, and shoot during new moon for best results. The Moon, bright planets, and star trails are easiest targets for beginners."
                }
            }
        ]
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "2026 Celestial Events Calendar",
        "description": "Complete guide to major astronomy events, meteor showers, eclipses, and space missions in 2026",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "item": {
                    "@type": "Event",
                    "name": "Quadrantid Meteor Shower Peak 2026",
                    "startDate": "2026-01-03",
                    "endDate": "2026-01-04",
                    "description": "Up to 120 meteors per hour. Best viewed after midnight in dark skies.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 2,
                "item": {
                    "@type": "Event",
                    "name": "Artemis II Moon Mission Launch",
                    "startDate": "2026-02-06",
                    "location": { "@type": "Place", "name": "Kennedy Space Center, Florida", "address": "Florida, USA" },
                    "description": "NASA's first crewed lunar mission in over 50 years. Four astronauts will orbit the Moon.",
                    "organizer": { "@type": "Organization", "name": "NASA" },
                    "eventAttendanceMode": "https://schema.org/MixedEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 3,
                "item": {
                    "@type": "Event",
                    "name": "Annular Solar Eclipse",
                    "startDate": "2026-02-17",
                    "description": "Ring of fire eclipse visible from Antarctica and southern South America.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 4,
                "item": {
                    "@type": "Event",
                    "name": "Total Lunar Eclipse (Blood Moon)",
                    "startDate": "2026-03-03",
                    "description": "Total lunar eclipse visible from Asia, Australia, Pacific, and western North America. Moon turns deep red.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 5,
                "item": {
                    "@type": "Event",
                    "name": "Lyrid Meteor Shower Peak 2026",
                    "startDate": "2026-04-22",
                    "endDate": "2026-04-23",
                    "description": "Up to 18 meteors per hour from Comet Thatcher debris. Active April 16-25.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 6,
                "item": {
                    "@type": "Event",
                    "name": "Eta Aquariid Meteor Shower Peak 2026",
                    "startDate": "2026-05-05",
                    "endDate": "2026-05-06",
                    "description": "Up to 50 meteors per hour from Halley's Comet debris. Best viewed before dawn.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 7,
                "item": {
                    "@type": "Event",
                    "name": "Total Solar Eclipse Spain & Iceland",
                    "startDate": "2026-08-12",
                    "description": "Total solar eclipse visible from Greenland, Iceland, Spain, and Portugal. Totality up to 2m 18s.",
                    "location": { "@type": "Place", "name": "Spain, Portugal, Iceland, Greenland" },
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 8,
                "item": {
                    "@type": "Event",
                    "name": "Perseid Meteor Shower Peak 2026",
                    "startDate": "2026-08-11",
                    "endDate": "2026-08-13",
                    "description": "Best meteor shower of 2026! Up to 100+ meteors per hour with NEW MOON providing perfect dark skies.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 9,
                "item": {
                    "@type": "Event",
                    "name": "Total Lunar Eclipse",
                    "startDate": "2026-08-28",
                    "description": "Second total lunar eclipse of 2026. Visible from Europe, Africa, Asia, and Australia.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 10,
                "item": {
                    "@type": "Event",
                    "name": "Jupiter at Opposition 2026",
                    "startDate": "2026-10-03",
                    "description": "Jupiter at its closest and brightest for the year. Perfect time for telescope viewing of cloud bands and moons.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            },
            {
                "@type": "ListItem",
                "position": 11,
                "item": {
                    "@type": "Event",
                    "name": "Geminid Meteor Shower Peak 2026",
                    "startDate": "2026-12-13",
                    "endDate": "2026-12-14",
                    "description": "Up to 150 meteors per hour - the year's most prolific shower. Best viewed evening through dawn.",
                    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                    "eventStatus": "https://schema.org/EventScheduled"
                }
            }
        ]
    }
    </script>
    
    <!-- HowTo Schema for featured snippets -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to See Planets Tonight",
        "description": "Simple guide to finding and identifying planets visible in the night sky from your location.",
        "totalTime": "PT30M",
        "step": [
            {
                "@type": "HowToStep",
                "position": 1,
                "name": "Check planet visibility",
                "text": "Visit CosmicCuriosity to see which planets are currently above the horizon from your location. Look for Venus, Mars, Jupiter, and Saturn - these are visible to the naked eye."
            },
            {
                "@type": "HowToStep",
                "position": 2,
                "name": "Wait for darkness",
                "text": "Go outside 30-60 minutes after sunset. Find a location away from bright lights with a clear view of the horizon."
            },
            {
                "@type": "HowToStep",
                "position": 3,
                "name": "Let your eyes adjust",
                "text": "Allow 15-20 minutes for your eyes to adapt to the darkness. Avoid looking at phone screens or bright lights."
            },
            {
                "@type": "HowToStep",
                "position": 4,
                "name": "Identify planets",
                "text": "Planets appear as steady, bright points that don't twinkle like stars. Venus is brightest (western sky), Jupiter is very bright (high in sky), Saturn has a yellowish tint, Mars appears reddish."
            }
        ]
    }
    </script>
    
    <!-- BreadcrumbList for site navigation -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://cosmiccuriosity.io/" },
            { "@type": "ListItem", "position": 2, "name": "Tonight's Sky", "item": "https://cosmiccuriosity.io/#tonight" },
            { "@type": "ListItem", "position": 3, "name": "Celestial Events", "item": "https://cosmiccuriosity.io/#events" },
            { "@type": "ListItem", "position": 4, "name": "Sky Tools", "item": "https://cosmiccuriosity.io/#tools" },
            { "@type": "ListItem", "position": 5, "name": "Space Gallery", "item": "https://cosmiccuriosity.io/#gallery" },
            { "@type": "ListItem", "position": 6, "name": "Space News", "item": "https://cosmiccuriosity.io/#news" }
        ]
    }
    </script>
    
    <!-- SoftwareApplication schema for PWA -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "CosmicCuriosity",
        "operatingSystem": "Web, iOS, Android",
        "applicationCategory": "EducationalApplication",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "1250"
        },
        "description": "Free stargazing app showing planets visible tonight, moon phases, meteor showers, and space events. Works offline."
    }
    </script>
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="preconnect" href="https://api.nasa.gov">
    <link rel="preconnect" href="https://apod.nasa.gov">
    <link rel="preconnect" href="https://api.open-meteo.com">
    <link rel="dns-prefetch" href="https://api.nasa.gov">
    <link rel="dns-prefetch" href="https://apod.nasa.gov">
    <link rel="dns-prefetch" href="https://api.open-meteo.com">
    <link rel="dns-prefetch" href="https://www.lightpollutionmap.info">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050510;
            --bg-card: #0a0a1a;
            --bg-hover: #0f0f25;
            --accent-glow: #818cf8;
            --accent-glow-dark: #6366f1;
            --accent-warm: #fbbf24;
            --accent-cool: #22d3ee;
            --accent-rose: #f472b6;
            --text-primary: #f0f0f8;
            --text-secondary: #a8a8c0;
            --text-dim: #7878a0;
            --border: rgba(255,255,255,0.08);
            --gradient-cosmic: linear-gradient(135deg, #1a1a3e 0%, #0f0f2d 50%, #0a0a1a 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Global focus styles for keyboard navigation */
        *:focus {
            outline: none;
        }
        
        *:focus-visible {
            outline: 2px solid var(--accent-glow);
            outline-offset: 2px;
        }
        
        /* Ensure links are distinguishable */
        a:not([class]) {
            color: var(--accent-cool);
            text-decoration: underline;
            text-decoration-thickness: 1px;
            text-underline-offset: 2px;
        }
        
        a:not([class]):hover {
            color: var(--accent-glow);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent-glow);
            color: #0a0a1a;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            z-index: 1000;
            font-weight: 600;
            text-decoration: none;
            transition: top 0.3s ease;
        }

        .skip-link:focus {
            top: 10px;
        }

        /* Cosmic background */
        .cosmos-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .nebula {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
        }

        .nebula-1 {
            width: 600px;
            height: 600px;
            background: var(--accent-glow);
            top: -200px;
            right: -200px;
        }

        .nebula-2 {
            width: 500px;
            height: 500px;
            background: var(--accent-rose);
            bottom: 20%;
            left: -150px;
        }

        .nebula-3 {
            width: 400px;
            height: 400px;
            background: var(--accent-cool);
            top: 50%;
            right: 10%;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1rem 2rem;
            background: rgba(5, 5, 16, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            color: var(--text-primary);
            text-decoration: none;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            flex-shrink: 0;
        }

        .logo-icon svg {
            width: 100%;
            height: 100%;
        }
        
        .logo-text-desktop {
            display: inline;
        }
        
        .logo-text-mobile {
            display: none;
            font-family: 'Instrument Serif', serif;
            font-size: 1.25rem;
            color: var(--text-primary);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        nav {
            display: flex;
            gap: 0.5rem;
        }

        nav a {
            color: var(--text-secondary);
            text-decoration: none !important;
            padding: 0.5rem 1rem;
            border-radius: 24px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: none !important;
        }

        nav a:hover, nav a.active {
            color: var(--text-primary);
            background: var(--bg-hover);
            text-decoration: none !important;
        }

        /* Main content */
        main {
            position: relative;
            z-index: 1;
            padding-top: 80px;
        }

        section {
            padding: 1.5rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Reduce spacing between sections */
        section + section {
            padding-top: 0.5rem;
        }
        
        /* First section after hero needs less spacing */
        .hero + section {
            padding-top: 0.75rem;
        }

        /* Hero section */
        .hero {
            min-height: 70vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-top: 0;
            padding-bottom: 1rem;
            text-align: center;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 100px;
            font-size: 0.85rem;
            color: var(--accent-glow);
            margin-bottom: 2rem;
        }

        .hero-badge .pulse {
            width: 8px;
            height: 8px;
            background: var(--accent-glow);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.5); }
        }

        .hero h1 {
            font-family: 'Instrument Serif', serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 400;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero h1 em {
            font-style: italic;
            background: linear-gradient(135deg, var(--accent-glow) 0%, var(--accent-cool) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-family: 'Space Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Section headers */
        .section-header {
            margin-bottom: 2rem;
        }

        .section-label {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-family: 'Instrument Serif', serif;
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 400;
            color: var(--text-primary);
        }

        /* Tonight card */
        .tonight-card {
            background: var(--gradient-cosmic);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .tonight-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.2) 0%, transparent 70%);
            pointer-events: none;
        }

        .tonight-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .tonight-date {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .moon-phase {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255,255,255,0.03);
            padding: 0.75rem 1.25rem;
            border-radius: 100px;
            border: 1px solid var(--border);
        }

        .moon-icon {
            font-size: 2rem;
        }

        .moon-info {
            text-align: left;
        }

        .moon-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .moon-illumination {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .tonight-content h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.75rem;
            margin-bottom: 1rem;
        }

        .tonight-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .highlight {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }

        .highlight:hover {
            background: rgba(255,255,255,0.04);
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }

        .highlight-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .highlight-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .highlight-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ==========================================
           ASTRONOMY TOOLS - TABBED INTERFACE
           ========================================== */
        
        /* Tab Navigation */
        .tools-tabs {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 1rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .tools-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .tool-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.75rem 1rem;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
            min-width: 70px;
        }
        
        .tool-tab:hover {
            background: rgba(99, 102, 241, 0.1);
        }
        
        .tool-tab.active {
            background: rgba(99, 102, 241, 0.2);
            box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.3);
        }
        
        .tab-icon {
            font-size: 1.5rem;
            line-height: 1;
        }
        
        .tab-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            white-space: nowrap;
        }
        
        .tool-tab.active .tab-label {
            color: var(--accent-glow);
        }
        
        /* Content Panels */
        .tools-content {
            position: relative;
        }
        
        .tool-content-panel {
            display: none;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            animation: fadeIn 0.3s ease;
        }
        
        .tool-content-panel.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tool-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background: rgba(99, 102, 241, 0.05);
            border-bottom: 1px solid var(--border);
        }
        
        .tool-panel-header h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.1rem;
            font-weight: 400;
        }
        
        .tool-badge {
            font-size: 0.65rem;
            padding: 0.2rem 0.6rem;
            background: rgba(99, 102, 241, 0.15);
            color: var(--accent-glow);
            border-radius: 100px;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .tool-badge.live {
            background: rgba(16, 185, 129, 0.15);
            color: #34d399;
        }
        
        .tool-panel-body {
            padding: 1.25rem;
        }
        
        /* Planets Display */
        #planets-display {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 0.75rem;
        }
        
        .planet-card-mini {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0.75rem 0.5rem;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .planet-card-mini.visible {
            border-color: rgba(16, 185, 129, 0.3);
            background: rgba(16, 185, 129, 0.05);
        }
        
        .planet-symbol {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }
        
        .planet-name {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.15rem;
        }
        
        .planet-status {
            font-size: 0.6rem;
            color: var(--text-dim);
        }
        
        .planet-card-mini.visible .planet-status {
            color: #34d399;
        }
        
        /* Moon Display */
        .moon-display {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .moon-visual {
            font-size: 4rem;
            line-height: 1;
        }
        
        .moon-phase-name {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }
        
        .moon-illumination {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .moon-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            font-size: 0.85rem;
        }
        
        .detail-value {
            font-family: 'Space Mono', monospace;
            color: var(--accent-glow);
        }
        
        /* Sun Times */
        .sun-times-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .sun-time-card {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
        }
        
        .sun-time-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .sun-time-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            margin-bottom: 0.25rem;
        }
        
        .sun-time-value {
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            color: var(--accent-glow);
        }
        
        .daylight-info {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: rgba(99, 102, 241, 0.05);
            border-radius: 8px;
            font-size: 0.85rem;
        }
        
        .daylight-change {
            color: #34d399;
        }
        
        /* Meteors */
        .meteor-current {
            margin-bottom: 1.5rem;
        }
        
        .meteor-activity {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            margin-bottom: 0.75rem;
        }
        
        .activity-label {
            color: var(--text-secondary);
        }
        
        .activity-value {
            font-family: 'Space Mono', monospace;
            color: var(--text-dim);
        }
        
        .meteor-note {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .meteor-upcoming h4 {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .shower-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .shower-item {
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            font-size: 0.85rem;
        }
        
        .shower-name {
            font-weight: 500;
        }
        
        .shower-date {
            color: var(--text-secondary);
        }
        
        .shower-rate {
            font-family: 'Space Mono', monospace;
            color: var(--accent-glow);
        }
        
        /* Eclipse List */
        .eclipse-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .eclipse-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
        }
        
        .eclipse-icon {
            font-size: 1.75rem;
            line-height: 1;
        }
        
        .eclipse-type {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .eclipse-date {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-glow);
            margin-bottom: 0.25rem;
        }
        
        .eclipse-visibility {
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        /* Events calendar */
        .events-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .filter-btn {
            padding: 0.5rem 1.25rem;
            border-radius: 100px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--accent-glow);
            border-color: var(--accent-glow);
            color: #0a0a1a;
        }

        .events-timeline {
            position: relative;
        }

        .events-timeline::before {
            content: '';
            position: absolute;
            left: 120px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--accent-glow) 0%, var(--accent-cool) 50%, var(--accent-rose) 100%);
            opacity: 0.3;
        }

        .event-item {
            display: flex;
            gap: 2rem;
            padding: 1.5rem 0;
            position: relative;
        }

        .event-date {
            width: 100px;
            flex-shrink: 0;
            text-align: right;
        }

        .event-month {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .event-day {
            font-family: 'Instrument Serif', serif;
            font-size: 2rem;
            line-height: 1;
        }

        .event-dot {
            width: 16px;
            height: 16px;
            background: var(--bg-deep);
            border: 3px solid var(--accent-glow);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 0.5rem;
        }

        .event-dot.meteor { border-color: var(--accent-warm); }
        .event-dot.eclipse { border-color: var(--accent-rose); }
        .event-dot.planet { border-color: var(--accent-cool); }
        .event-dot.launch { border-color: #34d399; }

        .event-content {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .event-content:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateX(4px);
        }
        
        /* Mobile date badge - hidden on desktop */
        .event-date-mobile {
            display: none;
        }

        .event-type {
            display: inline-block;
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .event-type.meteor { background: rgba(245, 158, 11, 0.15); color: var(--accent-warm); }
        .event-type.eclipse { background: rgba(236, 72, 153, 0.15); color: var(--accent-rose); }
        .event-type.planet { background: rgba(6, 182, 212, 0.15); color: var(--accent-cool); }
        .event-type.launch { background: rgba(16, 185, 129, 0.15); color: #34d399; }

        .event-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .event-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .event-countdown {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
        }

        .event-countdown.soon {
            background: rgba(16, 185, 129, 0.15);
            color: #34d399;
        }

        .event-countdown.very-soon {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-warm);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .event-header {
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .event-type,
        .event-date-mobile,
        .event-countdown {
            flex-shrink: 0;
        }
        
        /* Mobile date badge - hidden on desktop */
        .event-date-mobile {
            display: none;
        }
        .gallery-carousel-container {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .gallery-carousel {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
        }
        
        .gallery-track {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            touch-action: pan-y pinch-zoom;
        }
        
        .gallery-slide {
            flex: 0 0 100%;
            position: relative;
            aspect-ratio: 16/9;
            cursor: pointer;
            overflow: hidden;
        }
        
        .gallery-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .gallery-slide:hover img {
            transform: scale(1.05);
        }
        
        .gallery-slide-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 2rem;
            background: linear-gradient(transparent, rgba(0,0,0,0.85));
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .gallery-slide:hover .gallery-slide-info {
            transform: translateY(0);
            opacity: 1;
        }
        
        .gallery-slide-info h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .gallery-slide-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* Gallery Controls */
        .gallery-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1.25rem;
        }
        
        .gallery-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .gallery-btn:hover {
            background: var(--accent-glow);
            border-color: var(--accent-glow);
            transform: scale(1.1);
        }
        
        .gallery-btn:active {
            transform: scale(0.95);
        }
        
        .gallery-dots {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .gallery-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-dot:hover {
            background: var(--text-secondary);
        }
        
        .gallery-dot.active {
            background: var(--accent-glow);
            width: 24px;
            border-radius: 4px;
        }
        
        .gallery-counter {
            text-align: center;
            margin-top: 0.75rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-dim);
        }
        
        /* Gallery Mobile Styles */
        @media (max-width: 768px) {
            .gallery-slide {
                aspect-ratio: 4/3;
            }
            
            .gallery-slide-info {
                padding: 1.25rem;
                transform: translateY(0);
                opacity: 1;
            }
            
            .gallery-slide-info h3 {
                font-size: 1.1rem;
            }
            
            .gallery-slide-info p {
                font-size: 0.8rem;
            }
            
            .gallery-btn {
                width: 40px;
                height: 40px;
            }
            
            .gallery-dots {
                max-width: 150px;
                overflow: hidden;
            }
            
            .gallery-dot {
                width: 6px;
                height: 6px;
            }
            
            .gallery-dot.active {
                width: 18px;
            }
        }
        
        @media (max-width: 480px) {
            .gallery-slide {
                aspect-ratio: 3/4;
            }
            
            .gallery-controls {
                gap: 0.75rem;
            }
            
            .gallery-btn {
                width: 36px;
                height: 36px;
            }
        }

        /* APOD Hero (kept for compatibility) */
        .apod-hero {
            position: relative;
            border-radius: 24px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            min-height: 450px;
            display: flex;
            align-items: flex-end;
        }

        .apod-hero img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .apod-content {
            position: relative;
            z-index: 1;
            padding: 2rem;
            background: linear-gradient(180deg, transparent 0%, rgba(5,5,16,0.95) 100%);
            width: 100%;
        }

        .apod-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 100px;
            font-size: 0.8rem;
            color: var(--accent-warm);
            margin-bottom: 1rem;
        }

        .apod-title {
            font-family: 'Instrument Serif', serif;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .apod-desc {
            color: var(--text-secondary);
            max-width: 700px;
            font-size: 1rem;
            line-height: 1.7;
        }

        /* News */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .news-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .news-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-4px);
        }

        .news-image {
            aspect-ratio: 16/9;
            overflow: hidden;
        }

        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            background: var(--bg-hover);
        }

        .news-image img[data-failed="true"] {
            opacity: 0;
        }

        .news-image {
            position: relative;
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-hover) 100%);
        }

        .news-image::before {
            content: '🚀';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            opacity: 0.3;
            z-index: 0;
        }

        .news-image img {
            position: relative;
            z-index: 1;
        }

        .news-card:hover .news-image img {
            transform: scale(1.05);
        }

        .news-body {
            padding: 1.5rem;
        }

        .news-source {
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
        }

        .news-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .news-excerpt {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .news-date {
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        /* Enhanced Space Facts Carousel */
        .facts-section {
            position: relative;
            overflow: hidden;
        }
        
        .facts-container {
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .facts-carousel {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
            border: 1px solid var(--border);
            padding: 1.5rem 0;
        }
        
        .facts-track {
            display: flex;
            gap: 1.25rem;
            padding: 0 1.5rem;
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
            cursor: grab;
            user-select: none;
        }
        
        .facts-track:active {
            cursor: grabbing;
        }
        
        .facts-track.dragging {
            transition: none;
        }

        .fact-card {
            flex-shrink: 0;
            width: 280px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .fact-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .fact-card:hover {
            transform: translateY(-4px);
            border-color: rgba(99, 102, 241, 0.3);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.15);
        }
        
        .fact-card:hover::before {
            opacity: 1;
        }

        .fact-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }
        
        .fact-card:nth-child(2n) .fact-icon { animation-delay: -0.5s; }
        .fact-card:nth-child(3n) .fact-icon { animation-delay: -1s; }
        .fact-card:nth-child(4n) .fact-icon { animation-delay: -1.5s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .fact-category {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent);
            background: rgba(99, 102, 241, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-bottom: 0.75rem;
        }

        .fact-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.65;
        }

        .fact-text strong {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        /* Carousel Controls */
        .facts-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .facts-nav-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .facts-nav-btn:hover {
            background: var(--accent-glow);
            border-color: var(--accent-glow);
            color: #0a0a1a;
            transform: scale(1.1);
        }
        
        .facts-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
        }
        
        .facts-nav-btn svg {
            width: 20px;
            height: 20px;
        }
        
        .facts-dots {
            display: flex;
            gap: 0.5rem;
        }
        
        .facts-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .facts-dot.active {
            background: var(--accent);
            width: 24px;
            border-radius: 4px;
        }
        
        .facts-dot:hover:not(.active) {
            background: var(--text-dim);
        }
        
        .facts-counter {
            font-family: 'Space Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-dim);
            min-width: 60px;
            text-align: center;
        }
        
        /* Auto-scroll toggle */
        .facts-auto-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-dim);
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            background: var(--bg-hover);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        
        .facts-auto-toggle:hover {
            border-color: var(--accent);
        }
        
        .facts-auto-toggle.active {
            color: var(--accent);
            border-color: var(--accent);
        }
        
        .facts-auto-toggle .toggle-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid currentColor;
            position: relative;
        }
        
        .facts-auto-toggle.active .toggle-icon::after {
            content: '';
            position: absolute;
            inset: 2px;
            background: currentColor;
            border-radius: 50%;
        }
        
        /* Gradient fade edges */
        .facts-carousel::before,
        .facts-carousel::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 60px;
            z-index: 2;
            pointer-events: none;
        }
        
        .facts-carousel::before {
            left: 0;
            background: linear-gradient(90deg, var(--bg-primary) 0%, transparent 100%);
        }
        
        .facts-carousel::after {
            right: 0;
            background: linear-gradient(-90deg, var(--bg-primary) 0%, transparent 100%);
        }
        
        /* Mobile adjustments */
        @media (max-width: 768px) {
            .facts-carousel {
                border-radius: 16px;
                padding: 1rem 0;
                margin: 0 -0.5rem;
            }
            
            .facts-track {
                padding: 0 1rem;
                gap: 0.75rem;
                scroll-snap-type: x mandatory;
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .facts-track::-webkit-scrollbar {
                display: none;
            }
            
            .fact-card {
                width: calc(100vw - 4rem);
                min-width: calc(100vw - 4rem);
                max-width: 320px;
                scroll-snap-align: center;
                padding: 1.25rem;
            }
            
            .fact-icon {
                font-size: 2rem;
                margin-bottom: 0.75rem;
            }
            
            .fact-category {
                font-size: 0.6rem;
                padding: 0.2rem 0.5rem;
                margin-bottom: 0.5rem;
            }
            
            .fact-text {
                font-size: 0.9rem;
                line-height: 1.5;
            }
            
            .facts-dots {
                display: none;
            }
            
            .facts-controls {
                margin-top: 0.75rem;
                gap: 0.5rem;
            }
            
            .facts-nav-btn {
                width: 36px;
                height: 36px;
            }
            
            .facts-counter {
                font-size: 0.75rem;
            }
            
            .facts-auto-toggle {
                padding: 0.3rem 0.6rem;
                font-size: 0.7rem;
            }
            
            .facts-carousel::before,
            .facts-carousel::after {
                display: none;
            }
        }

        /* Footer */
        footer {
            border-top: 1px solid var(--border);
            padding: 2.5rem 2rem 1.5rem;
            margin-top: 2rem;
            background: linear-gradient(180deg, transparent 0%, rgba(10, 10, 26, 0.5) 100%);
        }

        .footer-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .footer-brand {
            max-width: 300px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .footer-tagline {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .footer-links-group {
            display: flex;
            gap: 4rem;
            flex-wrap: wrap;
        }

        .footer-section h4 {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .footer-section {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--text-primary);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 2rem auto 0;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            text-align: center;
        }

        .footer-bottom p {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .footer-credits {
            font-size: 0.75rem !important;
            opacity: 0.7;
        }

        /* Loading states */
        .skeleton {
            background: linear-gradient(90deg, var(--bg-card) 25%, var(--bg-hover) 50%, var(--bg-card) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Location Input */
        .location-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .location-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .location-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--accent-glow), var(--accent-cool));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .location-header h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .location-header p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .location-form {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: flex-start;
        }

        .zip-alternative {
            margin-top: 1rem;
            text-align: center;
        }
        
        .zip-toggle-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            padding: 0.5rem;
            text-decoration: underline;
            text-underline-offset: 2px;
            transition: color 0.2s ease;
        }
        
        .zip-toggle-btn:hover {
            color: var(--text-primary);
        }

        .zip-input-wrapper {
            position: relative;
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            max-width: 280px;
            margin-left: auto;
            margin-right: auto;
        }

        .zip-input {
            flex: 1;
            padding: 0.75rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'Space Mono', monospace;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
        }

        .zip-input:focus {
            outline: none;
            border-color: var(--accent-glow);
            box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.2);
        }

        .zip-input::placeholder {
            color: var(--text-dim);
            letter-spacing: 0.05em;
        }
        
        .zip-submit-btn {
            padding: 0.75rem 1.25rem;
            background: var(--accent-glow);
            border: none;
            border-radius: 8px;
            color: #0a0a1a;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .zip-submit-btn:hover {
            background: #a5b4fc;
        }

        .location-btn {
            width: 100%;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-glow), #a5b4fc);
            border: none;
            border-radius: 12px;
            color: #0a0a1a;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-family: 'DM Sans', sans-serif;
        }

        .location-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(129, 140, 248, 0.3);
        }

        .location-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .location-btn .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .privacy-note {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-top: 1rem;
        }

        .privacy-note svg {
            width: 14px;
            height: 14px;
            flex-shrink: 0;
        }

        /* Sky Results */
        .sky-results {
            display: none;
            margin-top: 2rem;
            animation: fadeSlideIn 0.5s ease;
        }

        .sky-results.visible {
            display: block;
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .sky-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .sky-location-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 100px;
            font-size: 0.85rem;
            color: #34d399;
        }

        .clear-location {
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .clear-location:hover {
            border-color: var(--accent-rose);
            color: var(--accent-rose);
        }

        .sky-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .sky-object {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .sky-object:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }

        .sky-object-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .sky-object-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .sky-object-icon.planet {
            background: rgba(6, 182, 212, 0.15);
        }

        .sky-object-icon.moon {
            background: rgba(245, 158, 11, 0.15);
        }

        .sky-object-icon.constellation {
            background: rgba(236, 72, 153, 0.15);
        }

        .sky-object-icon.meteor {
            background: rgba(99, 102, 241, 0.15);
        }

        .sky-object-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .sky-object-type {
            font-size: 0.8rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .sky-object-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .sky-detail {
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            padding: 0.75rem;
        }

        .sky-detail-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .sky-detail-value {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .visibility-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .visibility-badge.excellent {
            background: rgba(16, 185, 129, 0.15);
            color: #34d399;
        }

        .visibility-badge.good {
            background: rgba(6, 182, 212, 0.15);
            color: var(--accent-cool);
        }

        .visibility-badge.fair {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-warm);
        }

        .visibility-badge.poor {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .conditions-summary {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .conditions-title {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .conditions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .condition-item {
            text-align: center;
        }

        .condition-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .condition-label {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .viewing-tip {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(236, 72, 153, 0.05) 100%);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .viewing-tip-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .viewing-tip-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .viewing-tip-text strong {
            color: var(--accent-warm);
        }

        /* ==========================================
           ADD TO CALENDAR & SHARE BUTTONS
           ========================================== */
        .event-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            flex-wrap: wrap;
        }

        .event-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.4rem 0.75rem;
            font-size: 0.75rem;
            font-family: 'Space Mono', monospace;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 6px;
            color: var(--accent-glow);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .event-action-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            border-color: rgba(99, 102, 241, 0.4);
            transform: translateY(-1px);
        }

        .event-action-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Share buttons */
        .share-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .share-btn:hover {
            border-color: var(--accent-glow);
            color: var(--accent-glow);
            transform: translateY(-2px);
        }

        .share-btn.twitter:hover { border-color: #1da1f2; color: #1da1f2; }
        .share-btn.facebook:hover { border-color: #4267b2; color: #4267b2; }
        .share-btn.copy:hover { border-color: #34d399; color: #34d399; }
        .share-btn.download:hover { border-color: var(--accent-warm); color: var(--accent-warm); }

        /* ==========================================
           WEATHER WIDGET
           ========================================== */
        .weather-widget {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            margin-top: 1rem;
        }

        .weather-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .weather-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .weather-title-icon {
            font-size: 1.25rem;
        }

        .weather-badge {
            font-size: 0.65rem;
            font-family: 'Space Mono', monospace;
            padding: 0.2rem 0.5rem;
            border-radius: 100px;
            text-transform: uppercase;
        }

        .weather-badge.excellent { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .weather-badge.good { background: rgba(99, 102, 241, 0.2); color: var(--accent-glow); }
        .weather-badge.fair { background: rgba(245, 158, 11, 0.2); color: var(--accent-warm); }
        .weather-badge.poor { background: rgba(239, 68, 68, 0.2); color: #ef4444; }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .weather-stat {
            text-align: center;
        }

        .weather-stat-value {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .weather-stat-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .weather-forecast {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .forecast-hour {
            flex: 1;
            text-align: center;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
        }

        .forecast-time {
            font-size: 0.65rem;
            color: var(--text-dim);
            margin-bottom: 0.25rem;
        }

        .forecast-icon {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .forecast-cloud {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }
        
        .weather-note {
            font-size: 0.75rem;
            color: var(--text-dim);
            text-align: center;
            margin-top: 0.75rem;
            font-style: italic;
        }

        /* ==========================================
           SETTINGS PANEL
           ========================================== */
        .settings-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.4rem;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: transparent;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        
        .settings-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
            border-color: var(--accent-glow);
        }
        
        .settings-btn svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }
        
        .settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .settings-modal.open {
            display: flex;
        }
        
        .settings-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }
        
        .settings-content {
            position: relative;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .settings-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .settings-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: color 0.2s;
        }
        
        .settings-close:hover {
            color: var(--text-primary);
        }
        
        .settings-group {
            margin-bottom: 1.25rem;
        }
        
        .settings-group-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 0.75rem;
            letter-spacing: 0.05em;
        }
        
        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .settings-option:last-child {
            border-bottom: none;
        }
        
        .settings-option-label {
            font-size: 0.9rem;
        }
        
        .settings-option-desc {
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-top: 0.25rem;
        }
        
        /* Toggle switch */
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            flex-shrink: 0;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            transition: 0.3s;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: var(--text-secondary);
            border-radius: 50%;
            transition: 0.3s;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background: var(--accent-glow);
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(20px);
            background: white;
        }
        
        /* Select dropdown */
        .settings-select {
            padding: 0.5rem 0.75rem;
            background: var(--bg-hover);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
            min-width: 100px;
        }
        
        .settings-select:focus {
            outline: none;
            border-color: var(--accent-glow);
        }

        /* ==========================================
           ON THIS DAY IN SPACE HISTORY
           ========================================== */
        .history-section {
            padding: 0 2rem 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .history-card {
            background: linear-gradient(135deg, rgba(129, 140, 248, 0.08) 0%, rgba(99, 102, 241, 0.04) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
        }
        
        .history-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .history-icon {
            font-size: 1.5rem;
        }
        
        .history-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent-glow);
        }
        
        .history-title {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .history-event {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }
        
        .history-year {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-glow);
            line-height: 1;
            min-width: 60px;
        }
        
        .history-content {
            flex: 1;
        }
        
        .history-event-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .history-event-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .history-more {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }
        
        .history-more-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }
        
        .history-more-events {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .history-mini-event {
            display: flex;
            gap: 0.75rem;
            font-size: 0.85rem;
        }
        
        .history-mini-year {
            font-family: 'Space Mono', monospace;
            color: var(--accent-glow);
            font-weight: 600;
            min-width: 45px;
        }
        
        .history-mini-text {
            color: var(--text-secondary);
        }

        /* ==========================================
           DARK SKY FINDER
           ========================================== */
        .dark-sky-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            margin-top: 1rem;
        }

        .dark-sky-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .dark-sky-icon {
            font-size: 1.5rem;
        }

        .dark-sky-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .dark-sky-subtitle {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .dark-sky-content {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .light-pollution-scale {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .bortle-bar {
            flex: 1;
            height: 8px;
            background: linear-gradient(90deg, #1a1a2e 0%, #2d2d5a 20%, #5a5a8a 40%, #8a8ab0 60%, #c0c0d0 80%, #f0f0ff 100%);
            border-radius: 4px;
            position: relative;
        }

        .bortle-marker {
            position: absolute;
            top: -4px;
            width: 16px;
            height: 16px;
            background: var(--accent-glow);
            border: 2px solid white;
            border-radius: 50%;
            transform: translateX(-50%);
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.5);
        }

        .bortle-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            min-width: 60px;
        }

        .dark-sky-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            background: rgba(99, 102, 241, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 8px;
            color: var(--accent-glow);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.2s ease;
        }

        .dark-sky-link:hover {
            background: rgba(99, 102, 241, 0.25);
            transform: translateY(-2px);
        }

        /* ==========================================
           CONSTELLATION GUIDE
           ========================================== */
        .constellation-guide {
            margin-top: 1.5rem;
        }

        .constellation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .constellation-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .constellation-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
        }

        .constellation-card.featured {
            border-color: rgba(245, 158, 11, 0.3);
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, var(--bg-card) 100%);
        }

        .constellation-symbol {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .constellation-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .constellation-info {
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        .constellation-visibility {
            display: inline-block;
            font-size: 0.6rem;
            font-family: 'Space Mono', monospace;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            margin-top: 0.5rem;
            text-transform: uppercase;
        }

        .constellation-visibility.high { background: rgba(16, 185, 129, 0.15); color: #34d399; }
        .constellation-visibility.medium { background: rgba(245, 158, 11, 0.15); color: var(--accent-warm); }
        .constellation-visibility.low { background: rgba(239, 68, 68, 0.15); color: #ef4444; }

        /* ==========================================
           SKY SUMMARY CARD (Shareable)
           ========================================== */
        .sky-summary-card {
            background: linear-gradient(135deg, #0f0f2d 0%, #1a1a3e 50%, #0a0a1a 100%);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 20px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .sky-summary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .sky-summary-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            position: relative;
        }

        .sky-summary-date {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .sky-summary-title {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            margin-top: 0.25rem;
        }

        .sky-summary-logo {
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .sky-summary-highlights {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1rem 0;
            position: relative;
        }

        .viewing-score {
            text-align: right;
        }
        
        .viewing-score-stars {
            font-size: 1.1rem;
            color: #fbbf24;
            letter-spacing: 1px;
        }
        
        .viewing-score-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .viewing-score.excellent .viewing-score-stars { color: #34d399; }
        .viewing-score.good .viewing-score-stars { color: #fbbf24; }
        .viewing-score.fair .viewing-score-stars { color: #fb923c; }
        .viewing-score.poor .viewing-score-stars { color: #f87171; }

        .summary-highlight {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .summary-highlight-icon {
            font-size: 1.25rem;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .summary-highlight-text {
            font-size: 0.85rem;
        }

        .summary-highlight-label {
            font-size: 0.65rem;
            color: var(--text-dim);
            text-transform: uppercase;
        }
        
        /* Planets tonight section */
        .planets-tonight {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            padding: 1rem;
            margin: 0.5rem 0 1rem;
        }
        
        .planets-tonight-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .planets-tonight-count {
            background: linear-gradient(135deg, var(--accent-glow), #a5b4fc);
            color: #0a0a1a;
            font-weight: 700;
            font-size: 0.9rem;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .planets-tonight-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .planets-tonight-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .planet-chip {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 100px;
            padding: 0.35rem 0.75rem;
            font-size: 0.75rem;
            color: var(--text-primary);
            cursor: default;
            transition: all 0.2s ease;
        }
        
        .planet-chip:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-glow);
        }
        
        .planet-chip.dim {
            opacity: 0.6;
            border-style: dashed;
        }

        .sky-summary-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
            position: relative;
        }

        .summary-share-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--accent-glow);
            border: none;
            border-radius: 8px;
            color: #0a0a1a;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .summary-share-btn:hover {
            background: #a5b4fc;
            transform: translateY(-2px);
        }

        /* ==========================================
           MOBILE BOTTOM NAVIGATION
           ========================================== */
        .mobile-bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(5, 5, 16, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            padding: 0.5rem 0.25rem;
            padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
            z-index: 1000;
        }
        
        .mobile-bottom-nav-inner {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.2rem;
            padding: 0.4rem 0.75rem;
            color: var(--text-dim);
            text-decoration: none;
            font-size: 0.6rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            min-width: 50px;
        }
        
        .mobile-nav-item:active {
            transform: scale(0.95);
        }
        
        .mobile-nav-item.active {
            color: var(--accent-glow);
        }
        
        .mobile-nav-item.active .mobile-nav-icon {
            background: rgba(99, 102, 241, 0.15);
        }
        
        .mobile-nav-icon {
            font-size: 1.25rem;
            padding: 0.25rem;
            border-radius: 8px;
            transition: background 0.2s ease;
        }
        
        .mobile-nav-label {
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }

        @media (max-width: 768px) {
            .mobile-bottom-nav {
                display: block;
            }
            
            /* Add padding to body to prevent content being hidden behind nav */
            body {
                padding-bottom: 70px;
            }
            
            /* Hide header nav on mobile */
            .header-inner nav {
                display: none;
            }
        }

        /* ==========================================
           RESPONSIVE BREAKPOINTS
           ========================================== */
        
        /* Large tablets and small desktops */
        @media (max-width: 1024px) {
            .header-inner {
                padding: 0 1.5rem;
            }
            
            section {
                padding: 4rem 1.5rem;
            }
            
            .hero h1 {
                font-size: 3rem;
            }
            
            .hero-stats {
                gap: 2rem;
            }
            
            .stat-value {
                font-size: 2.5rem;
            }
        }
        
        /* Tablets */
        @media (max-width: 768px) {
            /* Header */
            header {
                padding: 0.75rem 1rem;
            }
            
            .header-inner {
                position: relative;
            }
            
            .logo-text-desktop {
                display: none;
            }
            
            .logo-text-mobile {
                display: block;
            }
            
            /* Hero */
            .hero {
                min-height: auto;
                padding: 1.5rem 0.75rem 2rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
                line-height: 1.15;
                padding: 0 0.25rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .hero-stats {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .stat-value {
                font-size: 2rem;
            }
            
            /* Sections */
            section {
                padding: 1.5rem 1rem;
            }
            
            .section-title {
                font-size: 1.75rem;
            }
            
            /* Tonight's Sky */
            .tonight-card {
                padding: 1.25rem;
            }
            
            .location-card {
                flex-direction: column;
                text-align: center;
            }
            
            /* Events */
            .events-timeline::before {
                left: 8px;
            }
            
            .event-date {
                display: none;
            }
            
            .event-item {
                padding-left: 2rem;
            }
            
            /* Show date inline on mobile */
            .event-date-mobile {
                display: inline-flex;
                align-items: center;
                font-family: 'Space Mono', monospace;
                font-size: 0.65rem;
                color: var(--accent-glow);
                background: rgba(99, 102, 241, 0.15);
                padding: 0.2rem 0.5rem;
                border-radius: 100px;
                white-space: nowrap;
            }
            
            .event-header {
                gap: 0.35rem;
            }
            
            .event-type {
                font-size: 0.65rem;
                padding: 0.2rem 0.5rem;
            }
            
            .event-countdown {
                font-size: 0.65rem;
                padding: 0.2rem 0.5rem;
            }
            
            /* Gallery */
            .gallery-grid {
                grid-template-columns: 1fr;
            }
            
            .gallery-featured {
                grid-column: span 1;
            }
            
            .apod-hero {
                min-height: 350px;
            }
            
            .apod-content {
                padding: 1.25rem;
            }
            
            .apod-title {
                font-size: 1.25rem;
            }
            
            /* Tools */
            .tools-tabs {
                padding: 0.375rem;
            }
            
            .tool-tab {
                padding: 0.5rem 0.75rem;
                min-width: 60px;
            }
            
            .tab-icon {
                font-size: 1.25rem;
            }
            
            .tab-label {
                font-size: 0.6rem;
            }
            
            .tool-panel-body {
                padding: 1rem;
            }
            
            #planets-display {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .moon-display {
                flex-direction: column;
                text-align: center;
            }
            
            .moon-details {
                grid-template-columns: 1fr;
            }
            
            .sun-times-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* Facts Carousel */
            .fact-card {
                min-width: 260px;
            }
            
            /* New Features - Responsive */
            .weather-details {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.5rem;
            }
            
            .weather-stat-value {
                font-size: 1rem;
            }
            
            .weather-forecast {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .forecast-hour {
                min-width: 60px;
            }
            
            .constellation-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.5rem;
            }
            
            .constellation-card {
                padding: 0.75rem;
            }
            
            .constellation-symbol {
                font-size: 1.5rem;
            }
            
            .constellation-name {
                font-size: 0.8rem;
            }
            
            .sky-summary-highlights {
                grid-template-columns: 1fr 1fr;
                gap: 0.75rem;
            }
            
            .summary-highlight-icon {
                font-size: 1rem;
                width: 1.75rem;
                height: 1.75rem;
            }
            
            .summary-highlight-text {
                font-size: 0.8rem;
            }
            
            .viewing-score-stars {
                font-size: 0.95rem;
            }
            
            .viewing-score-label {
                font-size: 0.6rem;
            }
            
            .planets-tonight {
                padding: 0.75rem;
            }
            
            .planets-tonight-header {
                margin-bottom: 0.5rem;
            }
            
            .planets-tonight-label {
                font-size: 0.7rem;
            }
            
            .planet-chip {
                padding: 0.25rem 0.5rem;
                font-size: 0.65rem;
            }
            
            .event-actions {
                flex-direction: row;
                gap: 0.35rem;
            }
            
            .event-action-btn {
                font-size: 0.65rem;
                padding: 0.3rem 0.5rem;
            }
            
            .event-action-btn svg {
                width: 12px;
                height: 12px;
            }
            
            /* News */
            .news-grid {
                grid-template-columns: 1fr;
            }
            
            /* Footer */
            .footer-inner {
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 1.5rem;
            }
            
            .footer-brand {
                max-width: 100%;
            }
            
            .footer-links-group {
                flex-direction: row;
                justify-content: center;
                gap: 2.5rem;
            }
            
            .footer-section {
                text-align: left;
            }
            
            /* Settings button in header */
            .settings-btn {
                padding: 0.35rem;
            }
            
            .settings-btn svg {
                width: 16px;
                height: 16px;
            }
            
            /* Settings modal mobile */
            .settings-content {
                margin: 0 0.5rem;
                max-height: 85vh;
                padding: 1.25rem;
            }
            
            .settings-title {
                font-size: 1.1rem;
            }
            
            .settings-option {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            
            /* History section mobile */
            .history-section {
                padding: 0 1rem 1rem;
            }
            
            .history-card {
                padding: 1.25rem;
            }
            
            .history-event {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .history-year {
                font-size: 1.25rem;
            }
            
            .history-event-title {
                font-size: 1rem;
            }
        }
        
        /* Mobile phones */
        @media (max-width: 480px) {
            /* Footer */
            .footer-links-group {
                gap: 2rem;
            }
            
            .footer-section h4 {
                font-size: 0.7rem;
            }
            
            .footer-section a {
                font-size: 0.85rem;
            }
            
            /* Hero */
            .hero {
                min-height: auto;
                padding: 1rem 0.5rem 1.5rem;
            }
            
            .hero h1 {
                font-size: 2.1rem;
                padding: 0 0.25rem;
            }
            
            .hero-subtitle {
                font-size: 0.9rem;
            }
            
            .stat-value {
                font-size: 1.75rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            /* Sections */
            section {
                padding: 1.25rem 0.75rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .section-label {
                font-size: 0.65rem;
            }
            
            /* Cards */
            .tonight-card,
            .event-item,
            .news-card {
                padding: 1rem;
            }
            
            /* Tools */
            .tool-tab {
                padding: 0.5rem;
                min-width: 50px;
            }
            
            .tab-icon {
                font-size: 1.1rem;
            }
            
            .tab-label {
                font-size: 0.55rem;
            }
            
            #planets-display {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
            
            .planet-card-mini {
                padding: 0.5rem;
            }
            
            .planet-symbol {
                font-size: 1.25rem;
            }
            
            .planet-name {
                font-size: 0.65rem;
            }
            
            .eclipse-item {
                flex-direction: column;
                text-align: center;
            }
            
            .shower-item {
                grid-template-columns: 1fr;
                gap: 0.25rem;
                text-align: center;
            }
            
            /* APOD */
            .apod-hero {
                min-height: 280px;
            }
            
            .apod-content {
                padding: 1rem;
            }
            
            .apod-badge {
                font-size: 0.65rem;
            }
            
            .apod-title {
                font-size: 1.1rem;
            }
            
            /* Facts */
            .facts-carousel {
                margin: 0 -0.75rem;
            }
            
            .fact-card {
                width: calc(100vw - 3rem);
                min-width: calc(100vw - 3rem);
                max-width: none;
                padding: 1rem;
            }
            
            .fact-icon {
                font-size: 1.75rem;
                margin-bottom: 0.5rem;
            }
            
            .fact-text {
                font-size: 0.85rem;
            }
            
            .facts-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            /* New Features - Mobile */
            .weather-details {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .weather-stat-value {
                font-size: 0.95rem;
            }
            
            .weather-stat-label {
                font-size: 0.6rem;
            }
            
            .constellation-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .constellation-symbol {
                font-size: 1.25rem;
            }
            
            .constellation-name {
                font-size: 0.75rem;
            }
            
            .constellation-visibility {
                font-size: 0.55rem;
            }
            
            .sky-summary-card {
                padding: 1rem;
            }
            
            .sky-summary-highlights {
                grid-template-columns: 1fr 1fr;
                gap: 0.5rem;
            }
            
            .sky-summary-header {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .viewing-score {
                text-align: left;
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }
            
            .sky-summary-title {
                font-size: 1.25rem;
            }
            
            .planets-tonight-list {
                gap: 0.35rem;
            }
            
            .summary-share-btn {
                font-size: 0.75rem;
                padding: 0.4rem 0.75rem;
            }
            
            .dark-sky-card {
                padding: 1rem;
            }
            
            .dark-sky-title {
                font-size: 0.9rem;
            }
            
            .event-actions {
                flex-direction: column;
            }
            
            .event-action-btn {
                justify-content: center;
            }
            
            /* Modal */
            .modal-body {
                padding: 1rem;
            }
            
            .modal-title {
                font-size: 1.25rem;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 360px) {
            .hero h1 {
                font-size: 1.85rem;
            }
            
            .section-title {
                font-size: 1.35rem;
            }
            
            .tool-tab {
                min-width: 45px;
                padding: 0.4rem;
            }
            
            #planets-display {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Landscape phones */
        @media (max-height: 500px) and (orientation: landscape) {
            .hero {
                min-height: auto;
                padding: 1rem 2rem 2rem;
            }
            
            .hero-stats {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
        }
        
        /* Prefer reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --border: rgba(255, 255, 255, 0.3);
                --text-secondary: rgba(255, 255, 255, 0.9);
            }
            
            .tool-tab.active {
                border-width: 2px;
            }
        }

        /* Scroll animations */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(5, 5, 16, 0.95);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            max-width: 900px;
            max-height: 90vh;
            overflow: auto;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--accent-glow);
            border-color: var(--accent-glow);
        }

        .modal-image {
            width: 100%;
            aspect-ratio: 16/10;
            object-fit: contain;
            background: #000;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-title {
            font-family: 'Instrument Serif', serif;
            font-size: 1.75rem;
            margin-bottom: 1rem;
        }

        .modal-text {
            color: var(--text-secondary);
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Cosmic background -->
    <div class="cosmos-bg" id="cosmos">
        <div class="nebula nebula-1"></div>
        <div class="nebula nebula-2"></div>
        <div class="nebula nebula-3"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-inner">
            <a href="#" class="logo" aria-label="CosmicCuriosity Home">
                <span class="logo-icon">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <defs>
                            <linearGradient id="logoBg" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#1a1a3e"/>
                                <stop offset="100%" stop-color="#050510"/>
                            </linearGradient>
                            <linearGradient id="logoPlanet" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#818cf8"/>
                                <stop offset="50%" stop-color="#8b5cf6"/>
                                <stop offset="100%" stop-color="#22d3ee"/>
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="50" r="48" fill="url(#logoBg)"/>
                        <circle cx="50" cy="50" r="20" fill="url(#logoPlanet)"/>
                        <ellipse cx="50" cy="52" rx="32" ry="8" fill="none" stroke="#fbbf24" stroke-width="3" opacity="0.6"/>
                        <circle cx="20" cy="25" r="2" fill="white" opacity="0.8"/>
                        <circle cx="75" cy="28" r="3" fill="#fbbf24"/>
                        <circle cx="80" cy="70" r="1.5" fill="white" opacity="0.6"/>
                        <circle cx="28" cy="38" r="3" fill="#9898b0" opacity="0.7"/>
                    </svg>
                </span>
                <span class="logo-text-desktop">CosmicCuriosity</span>
            </a>
            <span class="logo-text-mobile">Cosmic Curiosity</span>
            <nav aria-label="Main navigation" id="main-nav">
                <a href="#tonight" class="active">Tonight</a>
                <a href="#events">Events</a>
                <a href="#tools">Tools</a>
                <a href="#gallery">Gallery</a>
                <a href="#news">News</a>
            </nav>
            <button class="settings-btn" onclick="toggleSettings()" aria-label="Settings" title="Settings">
                <svg viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                </svg>
            </button>
        </div>
    </header>
    
    <!-- Settings Modal -->
    <div class="settings-modal" id="settings-modal">
        <div class="settings-backdrop" onclick="toggleSettings()"></div>
        <div class="settings-content">
            <div class="settings-header">
                <h3 class="settings-title">⚙️ Settings</h3>
                <button class="settings-close" onclick="toggleSettings()" aria-label="Close settings">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="settings-group">
                <div class="settings-group-title">Display</div>
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label">Time Format</div>
                        <div class="settings-option-desc">12-hour or 24-hour clock</div>
                    </div>
                    <select class="settings-select" id="setting-time-format" onchange="saveSetting('timeFormat', this.value)">
                        <option value="12h">12-hour</option>
                        <option value="24h">24-hour</option>
                    </select>
                </div>
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label">Temperature Unit</div>
                        <div class="settings-option-desc">Fahrenheit or Celsius</div>
                    </div>
                    <select class="settings-select" id="setting-temp-unit" onchange="saveSetting('tempUnit', this.value)">
                        <option value="F">°F</option>
                        <option value="C">°C</option>
                    </select>
                </div>
            </div>
            
            <div class="settings-group">
                <div class="settings-group-title">Features</div>
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label">Auto-refresh Data</div>
                        <div class="settings-option-desc">Update sky data every 5 minutes</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="setting-auto-refresh" onchange="saveSetting('autoRefresh', this.checked)" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label">Show Animations</div>
                        <div class="settings-option-desc">Star twinkle and nebula effects</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="setting-animations" onchange="saveSetting('animations', this.checked)" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label">Beginner Mode</div>
                        <div class="settings-option-desc">Simpler terms and more tips</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="setting-beginner" onchange="saveSetting('beginnerMode', this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="settings-group">
                <div class="settings-group-title">Data</div>
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label">Clear Saved Location</div>
                        <div class="settings-option-desc">Remove your cached location</div>
                    </div>
                    <button onclick="clearSavedLocation()" style="padding: 0.5rem 1rem; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; color: #fca5a5; cursor: pointer; font-size: 0.8rem;">
                        Clear
                    </button>
                </div>
            </div>
        </div>
    </div>

    <main id="main-content">
        <!-- Hero Section -->
        <section class="hero">
            <h1>What's happening in<br><em>the universe</em> right now?</h1>
            <p class="hero-subtitle">
                Discover tonight's sky, upcoming cosmic events, stunning imagery from NASA, 
                and the latest space exploration news — all in one beautiful place.
            </p>
            <div class="hero-stats">
                <div class="stat">
                    <div class="stat-value" id="moon-phase-pct" data-moon-illumination>--</div>
                    <div class="stat-label"><span data-moon-phase>Moon</span> Illuminated</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="visible-planets">3</div>
                    <div class="stat-label">Planets Visible <span data-time-label>Tonight</span></div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="days-to-next">--</div>
                    <div class="stat-label">Days to Next Eclipse</div>
                </div>
            </div>
            <div class="hero-date" style="margin-top: 2rem; font-family: 'Space Mono', monospace; font-size: 0.8rem; color: var(--text-dim);">
                <span id="current-date" data-current-date></span> • <span data-live-time></span>
            </div>
        </section>

        <!-- On This Day in Space History -->
        <section class="history-section">
            <div class="history-card fade-in" id="history-card">
                <div class="history-header">
                    <span class="history-icon">🚀</span>
                    <div>
                        <div class="history-label">On This Day</div>
                        <div class="history-title">In Space History</div>
                    </div>
                </div>
                <div class="history-event" id="history-main-event">
                    <div class="history-year" id="history-year">1969</div>
                    <div class="history-content">
                        <div class="history-event-title" id="history-title">Apollo 11 Moon Landing</div>
                        <div class="history-event-desc" id="history-desc">Neil Armstrong and Buzz Aldrin became the first humans to walk on the Moon, while Michael Collins orbited above.</div>
                    </div>
                </div>
                <div class="history-more">
                    <div class="history-more-title">Also on this day</div>
                    <div class="history-more-events" id="history-more">
                        <div class="history-mini-event">
                            <span class="history-mini-year">2004</span>
                            <span class="history-mini-text">Spirit rover begins exploring Mars</span>
                        </div>
                        <div class="history-mini-event">
                            <span class="history-mini-year">1986</span>
                            <span class="history-mini-text">Voyager 2 discovers new moons of Uranus</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tonight's Sky -->
        <section id="tonight">
            <div class="section-header fade-in">
                <div class="section-label">What's happening now</div>
                <h2 class="section-title">Tonight's Sky</h2>
            </div>

            <!-- Location Input -->
            <div class="location-card fade-in" id="location-card">
                <div class="location-header">
                    <div class="location-icon">📍</div>
                    <div>
                        <h3>What can I see tonight?</h3>
                        <p>Get a personalized sky report for your location</p>
                    </div>
                </div>
                
                <!-- Primary option: Use device location -->
                <button type="button" class="location-btn" id="use-location-btn" onclick="requestUserLocation()">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                        <circle cx="12" cy="12" r="10"/>
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 2v2M12 20v2M2 12h2M20 12h2"/>
                    </svg>
                    <span id="btn-text">Use My Location</span>
                </button>
                
                <!-- Alternative: ZIP code input (collapsed by default) -->
                <div class="zip-alternative">
                    <button type="button" class="zip-toggle-btn" onclick="toggleZipInput()">
                        Or enter ZIP code manually
                    </button>
                    <form class="location-form" id="location-form" onsubmit="handleZipSubmit(event)" style="display: none;">
                        <div class="zip-input-wrapper">
                            <input 
                                type="text" 
                                class="zip-input" 
                                id="zip-input"
                                placeholder="Enter ZIP code"
                                maxlength="5"
                                pattern="[0-9]{5}"
                                inputmode="numeric"
                                autocomplete="off"
                                aria-label="ZIP code"
                            >
                            <button type="submit" class="zip-submit-btn">Go</button>
                        </div>
                    </form>
                </div>
                
                <div class="privacy-note">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    <span>Your location is only used locally — nothing is stored on our servers</span>
                </div>
            </div>

            <!-- Sky Results (Hidden by default) -->
            <div class="sky-results" id="sky-results">
                <div class="sky-results-header">
                    <div class="sky-location-badge" id="location-badge">
                        <span>📍</span>
                        <span id="location-name">Loading...</span>
                    </div>
                    <button class="clear-location" onclick="clearLocation()">Clear Location</button>
                </div>

                <div class="conditions-summary">
                    <div class="conditions-title"><span data-time-label>Tonight</span>'s Viewing Conditions</div>
                    <div class="conditions-grid">
                        <div class="condition-item">
                            <div class="condition-value" id="cond-darkness" data-sky-darkness>Good</div>
                            <div class="condition-label">Sky Darkness</div>
                        </div>
                        <div class="condition-item">
                            <div class="condition-value" id="cond-moonlight"><span data-moon-illumination>--</span></div>
                            <div class="condition-label">Moon Illumination</div>
                        </div>
                        <div class="condition-item">
                            <div class="condition-value" id="cond-sunset" data-sunset>--</div>
                            <div class="condition-label">Sunset</div>
                        </div>
                        <div class="condition-item">
                            <div class="condition-value" id="cond-best" data-golden-hour>--</div>
                            <div class="condition-label">Golden Hour</div>
                        </div>
                    </div>
                </div>

                <div class="sky-grid" id="sky-objects">
                    <!-- Dynamically populated -->
                </div>

                <div class="viewing-tip">
                    <span class="viewing-tip-icon">💡</span>
                    <p class="viewing-tip-text" id="viewing-tip">
                        <strong>Pro tip:</strong> Give your eyes 20-30 minutes to adjust to the darkness. Avoid looking at your phone screen — or use a red filter app to preserve your night vision!
                    </p>
                </div>
            </div>
            
            <div class="tonight-card fade-in">
                <div class="tonight-header">
                    <div>
                        <div class="tonight-date" id="current-date">Tuesday, January 14, 2026</div>
                        <h3>A Great Night for Stargazing</h3>
                    </div>
                    <div class="moon-phase">
                        <span class="moon-icon">🌖</span>
                        <div class="moon-info">
                            <div class="moon-name">Waning Gibbous</div>
                            <div class="moon-illumination">97% illuminated</div>
                        </div>
                    </div>
                </div>
                
                <!-- Dynamic Recommendations (populated by auto-update) -->
                <div id="tonight-recommendations" style="margin-top: 1.5rem;"></div>
                
                <div class="tonight-content">
                    <p id="tonight-summary" style="color: var(--text-secondary); max-width: 700px; line-height: 1.7;">
                        <span data-time-label>Tonight</span> features <strong style="color: var(--text-primary);">Jupiter at its brightest</strong> following its recent opposition, dominating the eastern sky after sunset. The <strong style="color: var(--text-primary);"><span data-moon-phase>Moon</span> (<span data-moon-illumination>--</span> illuminated)</strong> affects sky darkness. Look for Venus low on the western horizon just after sunset, and Mars rising late in the evening.
                    </p>
                    
                    <div class="tonight-highlights">
                        <div class="highlight">
                            <div class="highlight-icon">♃</div>
                            <div class="highlight-title">Jupiter Dominates</div>
                            <div class="highlight-desc">The gas giant shines at magnitude -2.8, unmissable in the eastern sky all evening long.</div>
                        </div>
                        <div class="highlight">
                            <div class="highlight-icon" data-moon-icon>🌙</div>
                            <div class="highlight-title"><span data-moon-phase>Moon</span></div>
                            <div class="highlight-desc"><span data-moon-illumination>--</span> illuminated. <span id="moon-tip">Great for lunar observation!</span></div>
                        </div>
                        <div class="highlight">
                            <div class="highlight-icon">🌅</div>
                            <div class="highlight-title">Sunset</div>
                            <div class="highlight-desc">Sunset at <span data-sunset>--</span>. Golden hour starts at <span data-golden-hour>--</span>.</div>
                        </div>
                        <div class="highlight">
                            <div class="highlight-icon">🔭</div>
                            <div class="highlight-title">Viewing Rating</div>
                            <div class="highlight-desc">Sky darkness: <span data-sky-darkness>--</span>. <span data-viewing-rating>⭐⭐⭐</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weather Widget - Location Prompt -->
            <div class="weather-widget fade-in" id="weather-prompt">
                <div class="weather-header">
                    <div class="weather-title">
                        <span class="weather-title-icon">🌤️</span>
                        Tonight's Viewing Conditions
                    </div>
                </div>
                <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 1rem 0;">
                    Get real-time cloud cover, humidity, and hourly forecasts for stargazing.
                </p>
                <button type="button" class="location-btn" id="weather-location-btn" onclick="requestWeatherLocation()" style="width: 100%; margin-bottom: 0.75rem;">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                        <circle cx="12" cy="12" r="10"/>
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 2v2M12 20v2M2 12h2M20 12h2"/>
                    </svg>
                    <span id="weather-btn-text">Use My Location</span>
                </button>
                <div class="zip-alternative">
                    <button type="button" class="zip-toggle-btn" onclick="toggleWeatherZip()">
                        Or enter ZIP code
                    </button>
                    <form id="weather-zip-form" onsubmit="handleWeatherZipSubmit(event)" style="display: none;">
                        <div class="zip-input-wrapper">
                            <input 
                                type="text" 
                                class="zip-input" 
                                id="weather-zip-input"
                                placeholder="ZIP code"
                                maxlength="5"
                                pattern="[0-9]{5}"
                                inputmode="numeric"
                                autocomplete="off"
                            >
                            <button type="submit" class="zip-submit-btn">Go</button>
                        </div>
                    </form>
                </div>
                <div class="privacy-note" style="margin-top: 1rem;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    <span>Location used only for weather — never stored on servers</span>
                </div>
            </div>
            
            <!-- Weather Widget - Results (hidden initially) -->
            <div class="weather-widget fade-in" id="weather-results" style="display: none;">
                <div class="weather-header">
                    <div class="weather-title">
                        <span class="weather-title-icon">🌤️</span>
                        Tonight's Viewing Conditions
                    </div>
                    <span class="weather-badge good" id="weather-rating">Good</span>
                </div>
                <div class="weather-location-bar" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--border);">
                    <span style="font-size: 0.85rem; color: var(--text-secondary);">📍 <span id="weather-location-name">Your Location</span></span>
                    <button onclick="clearWeatherLocation()" style="background: none; border: none; color: var(--text-dim); font-size: 0.8rem; cursor: pointer; text-decoration: underline;">Change</button>
                </div>
                <div class="weather-details">
                    <div class="weather-stat">
                        <div class="weather-stat-value" id="weather-clouds">--%</div>
                        <div class="weather-stat-label">Cloud Cover</div>
                    </div>
                    <div class="weather-stat">
                        <div class="weather-stat-value" id="weather-humidity">--%</div>
                        <div class="weather-stat-label">Humidity</div>
                    </div>
                    <div class="weather-stat">
                        <div class="weather-stat-value" id="weather-temp">--°</div>
                        <div class="weather-stat-label">Temperature</div>
                    </div>
                </div>
                <div class="weather-forecast" id="weather-forecast">
                    <div class="forecast-hour">
                        <div class="forecast-time">8 PM</div>
                        <div class="forecast-icon">🌙</div>
                        <div class="forecast-cloud">--%</div>
                    </div>
                    <div class="forecast-hour">
                        <div class="forecast-time">10 PM</div>
                        <div class="forecast-icon">🌙</div>
                        <div class="forecast-cloud">--%</div>
                    </div>
                    <div class="forecast-hour">
                        <div class="forecast-time">12 AM</div>
                        <div class="forecast-icon">🌙</div>
                        <div class="forecast-cloud">--%</div>
                    </div>
                    <div class="forecast-hour">
                        <div class="forecast-time">2 AM</div>
                        <div class="forecast-icon">🌙</div>
                        <div class="forecast-cloud">--%</div>
                    </div>
                    <div class="forecast-hour">
                        <div class="forecast-time">4 AM</div>
                        <div class="forecast-icon">🌙</div>
                        <div class="forecast-cloud">--%</div>
                    </div>
                </div>
            </div>

            <!-- Dark Sky Finder -->
            <div class="dark-sky-card fade-in">
                <div class="dark-sky-header">
                    <span class="dark-sky-icon">🌌</span>
                    <div>
                        <div class="dark-sky-title">Find Dark Skies Near You</div>
                        <div class="dark-sky-subtitle">Escape light pollution for the best views</div>
                    </div>
                </div>
                <div class="dark-sky-content">
                    <a href="https://www.lightpollutionmap.info/" target="_blank" rel="noopener noreferrer" class="dark-sky-link">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        Open Light Pollution Map
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                            <polyline points="15 3 21 3 21 9"/>
                            <line x1="10" y1="14" x2="21" y2="3"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Constellation Guide -->
            <div class="constellation-guide fade-in">
                <div class="section-header" style="margin-bottom: 0;">
                    <div class="section-label">Seasonal Guide</div>
                    <h3 class="section-title" style="font-size: 1.25rem;">Constellations Visible Tonight</h3>
                </div>
                <div class="constellation-grid" id="constellation-grid">
                    <div class="constellation-card featured">
                        <div class="constellation-symbol">♎</div>
                        <div class="constellation-name">Orion</div>
                        <div class="constellation-info">The Hunter</div>
                        <span class="constellation-visibility high">Easy to find</span>
                    </div>
                    <div class="constellation-card">
                        <div class="constellation-symbol">♊</div>
                        <div class="constellation-name">Gemini</div>
                        <div class="constellation-info">The Twins</div>
                        <span class="constellation-visibility high">Overhead</span>
                    </div>
                    <div class="constellation-card">
                        <div class="constellation-symbol">♉</div>
                        <div class="constellation-name">Taurus</div>
                        <div class="constellation-info">The Bull</div>
                        <span class="constellation-visibility high">High</span>
                    </div>
                    <div class="constellation-card">
                        <div class="constellation-symbol">🐻</div>
                        <div class="constellation-name">Ursa Major</div>
                        <div class="constellation-info">Big Dipper</div>
                        <span class="constellation-visibility medium">Northeast</span>
                    </div>
                    <div class="constellation-card">
                        <div class="constellation-symbol">🦁</div>
                        <div class="constellation-name">Leo</div>
                        <div class="constellation-info">The Lion</div>
                        <span class="constellation-visibility medium">Rising</span>
                    </div>
                    <div class="constellation-card">
                        <div class="constellation-symbol">🐕</div>
                        <div class="constellation-name">Canis Major</div>
                        <div class="constellation-info">Sirius (brightest star)</div>
                        <span class="constellation-visibility high">South</span>
                    </div>
                </div>
            </div>

            <!-- Sky Summary Card (Shareable) -->
            <div class="sky-summary-card fade-in" id="sky-summary-card">
                <div class="sky-summary-header">
                    <div>
                        <div class="sky-summary-date" id="summary-date">January 14, 2026</div>
                        <div class="sky-summary-title">Tonight's Sky Highlights</div>
                    </div>
                    <div class="viewing-score" id="viewing-score">
                        <div class="viewing-score-stars">★★★★☆</div>
                        <div class="viewing-score-label">Good Viewing</div>
                    </div>
                </div>
                
                <!-- Primary highlights row -->
                <div class="sky-summary-highlights">
                    <div class="summary-highlight">
                        <span class="summary-highlight-icon">🌙</span>
                        <div>
                            <div class="summary-highlight-text" data-moon-phase>Waning Gibbous</div>
                            <div class="summary-highlight-label">Moon Phase</div>
                        </div>
                    </div>
                    <div class="summary-highlight">
                        <span class="summary-highlight-icon">🌑</span>
                        <div>
                            <div class="summary-highlight-text" id="moonrise-time">11:42 PM ↑</div>
                            <div class="summary-highlight-label">Moonrise</div>
                        </div>
                    </div>
                    <div class="summary-highlight">
                        <span class="summary-highlight-icon">🌅</span>
                        <div>
                            <div class="summary-highlight-text" data-sunset>5:23 PM</div>
                            <div class="summary-highlight-label">Sunset</div>
                        </div>
                    </div>
                    <div class="summary-highlight">
                        <span class="summary-highlight-icon">🔭</span>
                        <div>
                            <div class="summary-highlight-text" id="best-viewing-window">6:30 - 11:30 PM</div>
                            <div class="summary-highlight-label">Best Viewing</div>
                        </div>
                    </div>
                </div>
                
                <!-- Planets visible tonight -->
                <div class="planets-tonight" id="planets-tonight">
                    <div class="planets-tonight-header">
                        <span class="planets-tonight-count" id="planets-count">5</span>
                        <span class="planets-tonight-label">Planets Visible Tonight</span>
                    </div>
                    <div class="planets-tonight-list" id="planets-list">
                        <span class="planet-chip" title="Very bright, eastern sky">♀ Venus</span>
                        <span class="planet-chip" title="Bright, high in south">♂ Mars</span>
                        <span class="planet-chip" title="Brightest planet, southwest">♃ Jupiter</span>
                        <span class="planet-chip" title="Rings visible with telescope">♄ Saturn</span>
                        <span class="planet-chip dim" title="Faint, needs binoculars">⛢ Uranus</span>
                    </div>
                </div>
                
                <div class="sky-summary-footer">
                    <span style="font-size: 0.75rem; color: var(--text-dim);">cosmiccuriosity.io</span>
                    <button class="summary-share-btn" onclick="shareSkySummary()">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                        </svg>
                        Share Tonight's Sky
                    </button>
                </div>
            </div>
        </section>
        <section id="events">
            <div class="section-header fade-in">
                <div class="section-label">Next 90 Days</div>
                <h2 class="section-title">Upcoming Celestial Events</h2>
            </div>

            <div class="events-filters fade-in">
                <button class="filter-btn active" data-filter="all">All Events</button>
                <button class="filter-btn" data-filter="meteor">🌠 Meteor Showers</button>
                <button class="filter-btn" data-filter="eclipse">🌑 Eclipses</button>
                <button class="filter-btn" data-filter="planet">🪐 Planets</button>
                <button class="filter-btn" data-filter="launch">🚀 Launches</button>
            </div>

            <div class="events-timeline fade-in" id="events-timeline">
                <div class="event-item" data-type="launch" data-date="2026-02-06">
                    <div class="event-date">
                        <div class="event-month">Feb</div>
                        <div class="event-day">6</div>
                    </div>
                    <div class="event-dot launch"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type launch">Launch</span>
                            <span class="event-date-mobile">Feb 6</span>
                            <span class="event-countdown" data-date="2026-02-06"></span>
                        </div>
                        <div class="event-title">Artemis II Launch</div>
                        <div class="event-desc">NASA's historic crewed mission to the Moon — the first lunar voyage with humans in over 50 years. Four astronauts will orbit the Moon aboard the Orion spacecraft.</div>
                        <div class="event-actions">
                            <button class="event-action-btn" onclick="addToCalendar('Artemis II Launch', '2026-02-06', 'NASA crewed mission to the Moon')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Add to Calendar
                            </button>
                            <button class="event-action-btn" onclick="shareEvent('Artemis II Launch', '2026-02-06')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
                                Share
                            </button>
                        </div>
                    </div>
                </div>

                <div class="event-item" data-type="eclipse" data-date="2026-02-17">
                    <div class="event-date">
                        <div class="event-month">Feb</div>
                        <div class="event-day">17</div>
                    </div>
                    <div class="event-dot eclipse"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type eclipse">Eclipse</span>
                            <span class="event-date-mobile">Feb 17</span>
                            <span class="event-countdown" data-date="2026-02-17"></span>
                        </div>
                        <div class="event-title">Annular Solar Eclipse</div>
                        <div class="event-desc">A "ring of fire" eclipse visible from Antarctica. While challenging to reach, cruise ships may offer partial views from southern waters.</div>
                        <div class="event-actions">
                            <button class="event-action-btn" onclick="addToCalendar('Annular Solar Eclipse', '2026-02-17', 'Ring of fire eclipse visible from Antarctica')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Add to Calendar
                            </button>
                            <button class="event-action-btn" onclick="shareEvent('Annular Solar Eclipse', '2026-02-17')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
                                Share
                            </button>
                        </div>
                    </div>
                </div>

                <div class="event-item" data-type="eclipse" data-date="2026-03-03">
                    <div class="event-date">
                        <div class="event-month">Mar</div>
                        <div class="event-day">3</div>
                    </div>
                    <div class="event-dot eclipse"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type eclipse">Eclipse</span>
                            <span class="event-date-mobile">Mar 3</span>
                            <span class="event-countdown" data-date="2026-03-03"></span>
                        </div>
                        <div class="event-title">Total Lunar Eclipse (Blood Moon)</div>
                        <div class="event-desc">The Moon turns deep red as it passes through Earth's shadow. Best viewed from Asia, Australia, and western North America. Don't miss this stunning sight!</div>
                        <div class="event-actions">
                            <button class="event-action-btn" onclick="addToCalendar('Total Lunar Eclipse', '2026-03-03', 'Blood Moon visible from Asia, Australia, western North America')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Add to Calendar
                            </button>
                            <button class="event-action-btn" onclick="shareEvent('Total Lunar Eclipse', '2026-03-03')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
                                Share
                            </button>
                        </div>
                    </div>
                </div>

                <div class="event-item" data-type="meteor" data-date="2026-04-22">
                    <div class="event-date">
                        <div class="event-month">Apr</div>
                        <div class="event-day">22</div>
                    </div>
                    <div class="event-dot meteor"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type meteor">Meteor Shower</span>
                            <span class="event-date-mobile">Apr 22</span>
                            <span class="event-countdown" data-date="2026-04-22"></span>
                        </div>
                        <div class="event-title">Lyrids Meteor Shower Peak</div>
                        <div class="event-desc">Up to 18 meteors per hour radiating from the constellation Lyra. With a 27% Moon, conditions will be favorable for watching shooting stars!</div>
                        <div class="event-actions">
                            <button class="event-action-btn" onclick="addToCalendar('Lyrids Meteor Shower', '2026-04-22', 'Up to 18 meteors per hour from constellation Lyra')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Add to Calendar
                            </button>
                            <button class="event-action-btn" onclick="shareEvent('Lyrids Meteor Shower', '2026-04-22')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
                                Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Astronomy Tools -->
        <section id="tools">
            <div class="section-header">
                <div class="section-label">Interactive Features</div>
                <h2 class="section-title">Astronomy Tools</h2>
            </div>

            <!-- Tool Tabs Navigation -->
            <div class="tools-tabs" id="tools-tabs">
                <button class="tool-tab active" data-tool="planets" onclick="switchTool('planets')">
                    <span class="tab-icon">🪐</span>
                    <span class="tab-label">Planets</span>
                </button>
                <button class="tool-tab" data-tool="moon" onclick="switchTool('moon')">
                    <span class="tab-icon">🌙</span>
                    <span class="tab-label">Moon</span>
                </button>
                <button class="tool-tab" data-tool="sun" onclick="switchTool('sun')">
                    <span class="tab-icon">🌅</span>
                    <span class="tab-label">Sun</span>
                </button>
                <button class="tool-tab" data-tool="meteors" onclick="switchTool('meteors')">
                    <span class="tab-icon">🌠</span>
                    <span class="tab-label">Meteors</span>
                </button>
                <button class="tool-tab" data-tool="events" onclick="switchTool('events')">
                    <span class="tab-icon">🌑</span>
                    <span class="tab-label">Eclipses</span>
                </button>
            </div>

            <!-- Tool Content Panels -->
            <div class="tools-content">
                <!-- Planets Panel -->
                <div class="tool-content-panel active" id="tool-planets">
                    <div class="tool-panel-header">
                        <h3>Planets Visible Tonight</h3>
                        <span class="tool-badge live">Live</span>
                    </div>
                    <div class="tool-panel-body" id="planets-display">
                        <div class="planet-card-mini">
                            <div class="planet-symbol" style="color: #a0a0a0">☿</div>
                            <div class="planet-name">Mercury</div>
                            <div class="planet-status">Below horizon</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #ffd700">♀</div>
                            <div class="planet-name">Venus</div>
                            <div class="planet-status">15° altitude</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #ff4500">♂</div>
                            <div class="planet-name">Mars</div>
                            <div class="planet-status">32° altitude</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #daa520">♃</div>
                            <div class="planet-name">Jupiter</div>
                            <div class="planet-status">58° altitude</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #f4d03f">♄</div>
                            <div class="planet-name">Saturn</div>
                            <div class="planet-status">25° altitude</div>
                        </div>
                        <div class="planet-card-mini">
                            <div class="planet-symbol" style="color: #7fffd4">⛢</div>
                            <div class="planet-name">Uranus</div>
                            <div class="planet-status">Below horizon</div>
                        </div>
                        <div class="planet-card-mini">
                            <div class="planet-symbol" style="color: #4169e1">♆</div>
                            <div class="planet-name">Neptune</div>
                            <div class="planet-status">Below horizon</div>
                        </div>
                    </div>
                </div>

                <!-- Moon Panel -->
                <div class="tool-content-panel" id="tool-moon">
                    <div class="tool-panel-header">
                        <h3>Moon Phase</h3>
                        <span class="tool-badge">Updated hourly</span>
                    </div>
                    <div class="tool-panel-body">
                        <div class="moon-display">
                            <div class="moon-visual">🌔</div>
                            <div class="moon-info">
                                <div class="moon-phase-name" data-moon-phase>Waxing Gibbous</div>
                                <div class="moon-illumination"><span data-moon-illumination>78%</span> illuminated</div>
                            </div>
                        </div>
                        <div class="moon-details">
                            <div class="detail-row">
                                <span>Moonrise</span>
                                <span class="detail-value" data-moonrise>3:42 PM</span>
                            </div>
                            <div class="detail-row">
                                <span>Moonset</span>
                                <span class="detail-value" data-moonset>5:18 AM</span>
                            </div>
                            <div class="detail-row">
                                <span>Next Full Moon</span>
                                <span class="detail-value">Jan 25</span>
                            </div>
                            <div class="detail-row">
                                <span>Next New Moon</span>
                                <span class="detail-value">Feb 9</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sun Panel -->
                <div class="tool-content-panel" id="tool-sun">
                    <div class="tool-panel-header">
                        <h3>Sun Times</h3>
                        <span class="tool-badge">For your location</span>
                    </div>
                    <div class="tool-panel-body">
                        <div class="sun-times-grid">
                            <div class="sun-time-card dawn">
                                <div class="sun-time-icon">🌅</div>
                                <div class="sun-time-label">Sunrise</div>
                                <div class="sun-time-value" data-sunrise>7:15 AM</div>
                            </div>
                            <div class="sun-time-card golden">
                                <div class="sun-time-icon">📸</div>
                                <div class="sun-time-label">Golden Hour</div>
                                <div class="sun-time-value" data-golden-hour>5:12 PM</div>
                            </div>
                            <div class="sun-time-card dusk">
                                <div class="sun-time-icon">🌇</div>
                                <div class="sun-time-label">Sunset</div>
                                <div class="sun-time-value" data-sunset>5:42 PM</div>
                            </div>
                            <div class="sun-time-card night">
                                <div class="sun-time-icon">🌃</div>
                                <div class="sun-time-label">Astronomical Twilight</div>
                                <div class="sun-time-value">6:48 PM</div>
                            </div>
                        </div>
                        <div class="daylight-info">
                            <span>Day length: <strong>10h 27m</strong></span>
                            <span class="daylight-change">+1m from yesterday</span>
                        </div>
                    </div>
                </div>

                <!-- Meteors Panel -->
                <div class="tool-content-panel" id="tool-meteors">
                    <div class="tool-panel-header">
                        <h3>Meteor Showers</h3>
                        <span class="tool-badge" id="meteor-status-badge">Checking...</span>
                    </div>
                    <div class="tool-panel-body" id="meteor-display">
                        <div class="meteor-current">
                            <div class="meteor-activity">
                                <span class="activity-label">Current Activity</span>
                                <span class="activity-value">Low</span>
                            </div>
                            <p class="meteor-note">No major meteor showers active right now.</p>
                        </div>
                        <div class="meteor-upcoming">
                            <h4>Upcoming Showers</h4>
                            <div class="shower-list">
                                <div class="shower-item">
                                    <span class="shower-name">Lyrids</span>
                                    <span class="shower-date">Apr 22</span>
                                    <span class="shower-rate">~18/hr</span>
                                </div>
                                <div class="shower-item">
                                    <span class="shower-name">Eta Aquariids</span>
                                    <span class="shower-date">May 6</span>
                                    <span class="shower-rate">~50/hr</span>
                                </div>
                                <div class="shower-item">
                                    <span class="shower-name">Perseids</span>
                                    <span class="shower-date">Aug 12</span>
                                    <span class="shower-rate">~100/hr</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Events/Eclipses Panel -->
                <div class="tool-content-panel" id="tool-events">
                    <div class="tool-panel-header">
                        <h3>Upcoming Eclipses</h3>
                        <span class="tool-badge">2026</span>
                    </div>
                    <div class="tool-panel-body">
                        <div class="eclipse-list">
                            <div class="eclipse-item">
                                <div class="eclipse-icon">🌑</div>
                                <div class="eclipse-info">
                                    <div class="eclipse-type">Total Lunar Eclipse</div>
                                    <div class="eclipse-date">March 3, 2026</div>
                                    <div class="eclipse-visibility">Visible from Americas, Europe, Africa</div>
                                </div>
                            </div>
                            <div class="eclipse-item">
                                <div class="eclipse-icon">🌒</div>
                                <div class="eclipse-info">
                                    <div class="eclipse-type">Partial Solar Eclipse</div>
                                    <div class="eclipse-date">March 17, 2026</div>
                                    <div class="eclipse-visibility">Visible from Antarctica</div>
                                </div>
                            </div>
                            <div class="eclipse-item">
                                <div class="eclipse-icon">☀️</div>
                                <div class="eclipse-info">
                                    <div class="eclipse-type">Total Solar Eclipse</div>
                                    <div class="eclipse-date">August 12, 2026</div>
                                    <div class="eclipse-visibility">Visible from Arctic, Greenland, Iceland, Spain</div>
                                </div>
                            </div>
                            <div class="eclipse-item">
                                <div class="eclipse-icon">🌕</div>
                                <div class="eclipse-info">
                                    <div class="eclipse-type">Partial Lunar Eclipse</div>
                                    <div class="eclipse-date">August 28, 2026</div>
                                    <div class="eclipse-visibility">Visible from Americas, Europe, Africa</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Amazing Space Facts Carousel -->
        <section id="facts" class="facts-section">
            <div class="section-header fade-in">
                <div class="section-label">Did You Know?</div>
                <h2 class="section-title">Amazing Space Facts</h2>
            </div>

            <div class="facts-container fade-in">
                <div class="facts-carousel" id="facts-carousel">
                    <div class="facts-track" id="facts-track">
                        <!-- Solar System -->
                        <div class="fact-card" data-category="solar-system">
                            <div class="fact-icon">☀️</div>
                            <div class="fact-category">Our Sun</div>
                            <div class="fact-text">You could fit <strong>1.3 million Earths</strong> inside the Sun. It makes up 99.86% of all mass in our solar system!</div>
                        </div>
                        <div class="fact-card" data-category="solar-system">
                            <div class="fact-icon">🌡️</div>
                            <div class="fact-category">Solar Heat</div>
                            <div class="fact-text">The Sun's core is <strong>27 million °F</strong> (15 million °C) — so hot that hydrogen atoms fuse into helium, releasing enormous energy.</div>
                        </div>
                        <div class="fact-card" data-category="solar-system">
                            <div class="fact-icon">💨</div>
                            <div class="fact-category">Solar Wind</div>
                            <div class="fact-text">The Sun releases a <strong>solar wind</strong> that travels at 1 million mph, creating the beautiful auroras when it hits Earth's magnetic field.</div>
                        </div>
                        
                        <!-- Stars & Galaxies -->
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">💫</div>
                            <div class="fact-category">Mind-Blowing Scale</div>
                            <div class="fact-text">There are more stars in the universe than <strong>grains of sand on all Earth's beaches</strong> — about 200 billion trillion stars!</div>
                        </div>
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">⭐</div>
                            <div class="fact-category">Star Birth</div>
                            <div class="fact-text">A new star is born in our galaxy roughly <strong>every 50 years</strong>. The Milky Way has been making stars for over 13 billion years!</div>
                        </div>
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">🔵</div>
                            <div class="fact-category">Blue Giants</div>
                            <div class="fact-text">The hottest stars burn <strong>blue, not red</strong>! Blue supergiants can be 50,000°C — while red dwarfs are a "cool" 3,000°C.</div>
                        </div>
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">⚡</div>
                            <div class="fact-category">Neutron Stars</div>
                            <div class="fact-text">Neutron stars are so dense that a <strong>teaspoon</strong> would weigh about 6 billion tons — as much as Mount Everest!</div>
                        </div>
                        
                        <!-- Planets -->
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">🪐</div>
                            <div class="fact-category">Saturn</div>
                            <div class="fact-text">Saturn would <strong>float in water</strong> if you could find a bathtub big enough — it's less dense than water!</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">🔴</div>
                            <div class="fact-category">Venus Time</div>
                            <div class="fact-text">A day on Venus is <strong>longer than its year</strong>! It takes 243 Earth days to rotate but only 225 days to orbit the Sun.</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">🌀</div>
                            <div class="fact-category">Jupiter's Storm</div>
                            <div class="fact-text">Jupiter's Great Red Spot is a <strong>400-year-old storm</strong> so large that Earth could fit inside it twice!</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">💎</div>
                            <div class="fact-category">Diamond Rain</div>
                            <div class="fact-text">On Neptune and Uranus, <strong>diamonds literally rain</strong> from the sky due to extreme pressure converting methane to diamond!</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">🌋</div>
                            <div class="fact-category">Volcanic Moon</div>
                            <div class="fact-text">Jupiter's moon Io has <strong>over 400 active volcanoes</strong> — making it the most volcanically active body in the solar system.</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">🏔️</div>
                            <div class="fact-category">Martian Giant</div>
                            <div class="fact-text">Mars has the largest volcano in the solar system — <strong>Olympus Mons</strong> stands 72,000 feet tall, nearly 3x Mount Everest!</div>
                        </div>
                        
                        <!-- Moon & Earth -->
                        <div class="fact-card" data-category="moon">
                            <div class="fact-icon">🌙</div>
                            <div class="fact-category">Drifting Moon</div>
                            <div class="fact-text">The Moon is slowly <strong>drifting away</strong> from Earth at about 1.5 inches (3.8 cm) per year. In a billion years, it'll be too far for total eclipses!</div>
                        </div>
                        <div class="fact-card" data-category="moon">
                            <div class="fact-icon">👣</div>
                            <div class="fact-category">Lunar Footprints</div>
                            <div class="fact-text">The footprints left by Apollo astronauts will remain on the Moon for <strong>millions of years</strong> — there's no wind or weather to erode them.</div>
                        </div>
                        <div class="fact-card" data-category="moon">
                            <div class="fact-icon">🌊</div>
                            <div class="fact-category">Tidal Lock</div>
                            <div class="fact-text">The Moon is <strong>tidally locked</strong> to Earth — that's why we always see the same side. The "dark side" isn't dark, just hidden!</div>
                        </div>
                        
                        <!-- Light & Distance -->
                        <div class="fact-card" data-category="light">
                            <div class="fact-icon">⏱️</div>
                            <div class="fact-category">Sunlight Travel</div>
                            <div class="fact-text">Sunlight takes <strong>8 minutes 20 seconds</strong> to reach Earth. If the Sun vanished, we wouldn't know for 8 minutes!</div>
                        </div>
                        <div class="fact-card" data-category="light">
                            <div class="fact-icon">🔭</div>
                            <div class="fact-category">Looking Back in Time</div>
                            <div class="fact-text">When you look at the Andromeda Galaxy, you're seeing light from <strong>2.5 million years ago</strong> — true time travel!</div>
                        </div>
                        <div class="fact-card" data-category="light">
                            <div class="fact-icon">📡</div>
                            <div class="fact-category">Voyager Distance</div>
                            <div class="fact-text">Voyager 1 is <strong>15 billion miles</strong> away. A signal from it takes over 22 hours to reach Earth at light speed!</div>
                        </div>
                        
                        <!-- Black Holes & Extreme -->
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">🕳️</div>
                            <div class="fact-category">Black Holes</div>
                            <div class="fact-text">If you fell into a black hole, <strong>spaghettification</strong> would stretch you into a long thin strand due to extreme tidal forces!</div>
                        </div>
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">🌌</div>
                            <div class="fact-category">Cosmic Collision</div>
                            <div class="fact-text">The Milky Way and Andromeda galaxies will <strong>collide in 4.5 billion years</strong>. Don't worry though — stars are so far apart, direct collisions are rare!</div>
                        </div>
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">💥</div>
                            <div class="fact-category">Supernovae</div>
                            <div class="fact-text">A supernova explosion releases more energy in seconds than our Sun will produce in its <strong>entire 10-billion-year lifetime</strong>!</div>
                        </div>
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">🧲</div>
                            <div class="fact-category">Magnetars</div>
                            <div class="fact-text">Magnetars have magnetic fields <strong>1 quadrillion times</strong> stronger than Earth's — strong enough to erase your credit cards from the Moon!</div>
                        </div>
                        
                        <!-- Space Exploration -->
                        <div class="fact-card" data-category="exploration">
                            <div class="fact-icon">🚀</div>
                            <div class="fact-category">ISS Speed</div>
                            <div class="fact-text">The International Space Station orbits at <strong>17,500 mph</strong> — completing a full orbit every 90 minutes. Astronauts see 16 sunrises daily!</div>
                        </div>
                        <div class="fact-card" data-category="exploration">
                            <div class="fact-icon">🧑‍🚀</div>
                            <div class="fact-category">Space Growth</div>
                            <div class="fact-text">Astronauts grow <strong>up to 2 inches taller</strong> in space because their spines decompress without gravity. They shrink back on Earth!</div>
                        </div>
                        <div class="fact-card" data-category="exploration">
                            <div class="fact-icon">🎂</div>
                            <div class="fact-category">Space Age</div>
                            <div class="fact-text">On Mercury, you'd have <strong>4 birthdays per Earth year</strong>! A year there is just 88 Earth days. On Neptune, one year = 165 Earth years!</div>
                        </div>
                        
                        <!-- Universe Mysteries -->
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">🔮</div>
                            <div class="fact-category">Dark Matter</div>
                            <div class="fact-text"><strong>85% of the universe</strong> is made of dark matter — we can't see it, but we know it exists from its gravitational effects!</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">🫧</div>
                            <div class="fact-category">Cosmic Void</div>
                            <div class="fact-text">The Boötes Void is a <strong>330 million light-year</strong> empty region of space containing almost no galaxies — one of the universe's greatest mysteries.</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">🎵</div>
                            <div class="fact-category">Space Sound</div>
                            <div class="fact-text">Space isn't completely silent! Black holes emit <strong>ultra-low frequency sounds</strong> — a B-flat, 57 octaves below middle C!</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">🍳</div>
                            <div class="fact-category">Cosmic Recipe</div>
                            <div class="fact-text">The center of our galaxy <strong>smells like rum</strong> and <strong>tastes like raspberries</strong> — due to ethyl formate molecules floating in space!</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">🌍</div>
                            <div class="fact-category">Pale Blue Dot</div>
                            <div class="fact-text">From Saturn, Earth is just <strong>a tiny blue pixel</strong>. Voyager 1 photographed this "Pale Blue Dot" from 4 billion miles away in 1990.</div>
                        </div>
                    </div>
                </div>
                
                <div class="facts-controls">
                    <button class="facts-nav-btn" id="facts-prev" aria-label="Previous facts">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    
                    <div class="facts-dots" id="facts-dots"></div>
                    
                    <span class="facts-counter" id="facts-counter">1 / 30</span>
                    
                    <button class="facts-nav-btn" id="facts-next" aria-label="Next facts">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                    
                    <button class="facts-auto-toggle active" id="facts-auto-toggle">
                        <span class="toggle-icon"></span>
                        <span>Auto-scroll</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Space Gallery -->
        <section id="gallery">
            <div class="section-header fade-in">
                <div class="section-label">Cosmic Beauty</div>
                <h2 class="section-title">Space Image Gallery</h2>
            </div>

            <!-- Gallery Carousel -->
            <div class="gallery-carousel-container fade-in">
                <div class="gallery-carousel" id="gallery-carousel">
                    <div class="gallery-track" id="gallery-track">
                        <!-- Image 1 - Nebula -->
                        <div class="gallery-slide" onclick="openGalleryModal(0)">
                            <img src="https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=1200&q=80" 
                                 alt="Colorful Nebula" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Stellar Nebula</h3>
                                <p>A cosmic cloud of gas and dust</p>
                            </div>
                        </div>
                        <!-- Image 2 - Milky Way over landscape -->
                        <div class="gallery-slide" onclick="openGalleryModal(1)">
                            <img src="https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=1200&q=80" 
                                 alt="Milky Way Galaxy" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>The Milky Way</h3>
                                <p>Our home galaxy spanning the night sky</p>
                            </div>
                        </div>
                        <!-- Image 3 - Moon -->
                        <div class="gallery-slide" onclick="openGalleryModal(2)">
                            <img src="https://images.unsplash.com/photo-1522030299830-16b8d3d049fe?w=1200&q=80" 
                                 alt="Full Moon" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>The Moon</h3>
                                <p>Earth's only natural satellite</p>
                            </div>
                        </div>
                        <!-- Image 4 - Star Field -->
                        <div class="gallery-slide" onclick="openGalleryModal(3)">
                            <img src="https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?w=1200&q=80" 
                                 alt="Star Field" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Infinite Stars</h3>
                                <p>Countless suns in the cosmic void</p>
                            </div>
                        </div>
                        <!-- Image 5 - Earth from Space -->
                        <div class="gallery-slide" onclick="openGalleryModal(4)">
                            <img src="https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=1200&q=80" 
                                 alt="Earth from Space" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Earth from Space</h3>
                                <p>Our pale blue dot</p>
                            </div>
                        </div>
                        <!-- Image 6 - Aurora -->
                        <div class="gallery-slide" onclick="openGalleryModal(5)">
                            <img src="https://images.unsplash.com/photo-1531366936337-7c912a4589a7?w=1200&q=80" 
                                 alt="Aurora Borealis" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Aurora Borealis</h3>
                                <p>Nature's light show from solar winds</p>
                            </div>
                        </div>
                        <!-- Image 7 - Galaxy -->
                        <div class="gallery-slide" onclick="openGalleryModal(6)">
                            <img src="https://images.unsplash.com/photo-1543722530-d2c3201371e7?w=1200&q=80" 
                                 alt="Spiral Galaxy" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Spiral Galaxy</h3>
                                <p>Billions of stars in cosmic dance</p>
                            </div>
                        </div>
                        <!-- Image 8 - Night Sky with Stars -->
                        <div class="gallery-slide" onclick="openGalleryModal(7)">
                            <img src="https://images.unsplash.com/photo-1475274047050-1d0c0975c63e?w=1200&q=80" 
                                 alt="Starry Night Sky" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Starry Night</h3>
                                <p>The universe above us</p>
                            </div>
                        </div>
                        <!-- Image 9 - Astronaut -->
                        <div class="gallery-slide" onclick="openGalleryModal(8)">
                            <img src="https://images.unsplash.com/photo-1454789548928-9efd52dc4031?w=1200&q=80" 
                                 alt="Astronaut in Space" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Spacewalk</h3>
                                <p>Human exploration beyond Earth</p>
                            </div>
                        </div>
                        <!-- Image 10 - Solar Eclipse -->
                        <div class="gallery-slide" onclick="openGalleryModal(9)">
                            <img src="https://images.unsplash.com/photo-1503416997304-7f8bf166c121?w=1200&q=80" 
                                 alt="Solar Eclipse" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Solar Eclipse</h3>
                                <p>Moon passing before the Sun</p>
                            </div>
                        </div>
                        <!-- Image 11 - Rocket Launch -->
                        <div class="gallery-slide" onclick="openGalleryModal(10)">
                            <img src="https://images.unsplash.com/photo-1517976487492-5750f3195933?w=1200&q=80" 
                                 alt="Rocket Launch" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Rocket Launch</h3>
                                <p>Journey to the stars begins</p>
                            </div>
                        </div>
                        <!-- Image 12 - Deep Space -->
                        <div class="gallery-slide" onclick="openGalleryModal(11)">
                            <img src="https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?w=1200&q=80" 
                                 alt="Deep Space" loading="lazy">
                            <div class="gallery-slide-info">
                                <h3>Deep Space</h3>
                                <p>The vast cosmic expanse</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Carousel Controls -->
                <div class="gallery-controls">
                    <button class="gallery-btn gallery-prev" onclick="galleryPrev()" aria-label="Previous image">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    <div class="gallery-dots" id="gallery-dots"></div>
                    <button class="gallery-btn gallery-next" onclick="galleryNext()" aria-label="Next image">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Image Counter -->
                <div class="gallery-counter">
                    <span id="gallery-current">1</span> / <span id="gallery-total">12</span>
                </div>
            </div>
        </section>

        <!-- Space News -->
        <section id="news">
            <div class="section-header fade-in">
                <div class="section-label">Latest Updates</div>
                <h2 class="section-title">Space News</h2>
            </div>

            <div class="news-grid fade-in">
                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.unsplash.com/photo-1457364559154-aa2644600ebb?w=600&q=80" alt="Artemis II Mission - Moon" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">Artemis II: Humanity Returns to the Moon</div>
                        <div class="news-excerpt">NASA's historic crewed lunar mission is set for February 2026, marking the first time humans will travel to the Moon in over 50 years.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=600&q=80" alt="James Webb Space Telescope - Nebula" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA / ESA</div>
                        <div class="news-title">James Webb Discovers New Exoplanet Atmospheres</div>
                        <div class="news-excerpt">The powerful space telescope continues to revolutionize our understanding of distant worlds, detecting water vapor and carbon compounds.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=600&q=80" alt="International Space Station view of Earth" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">ISS Crew-11 Mission Update</div>
                        <div class="news-excerpt">The current space station crew continues vital research in microgravity, preparing for eventual deep space missions.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.unsplash.com/photo-1639921884918-8d28ab2e39a4?w=600&q=80" alt="Saturn and Titan" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA / JPL</div>
                        <div class="news-title">Dragonfly Mission to Saturn's Moon Titan</div>
                        <div class="news-excerpt">NASA's rotorcraft mission to explore Titan's organic-rich surface is scheduled to launch later this year aboard a Falcon Heavy rocket.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.unsplash.com/photo-1454789548928-9efd52dc4031?w=600&q=80" alt="Deep space exploration" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">Voyager 1 Reaches New Milestone</div>
                        <div class="news-excerpt">The legendary spacecraft continues to send data from the edge of interstellar space, over 15 billion miles from Earth.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.unsplash.com/photo-1516339901601-2e1b62dc0c45?w=600&q=80" alt="Space telescope" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">Nancy Grace Roman Telescope Launch Planned</div>
                        <div class="news-excerpt">The next-generation infrared space telescope is scheduled for September 2026, promising new discoveries in cosmology and exoplanets.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-inner">
            <div class="footer-brand">
                <div class="footer-logo">
                    <svg viewBox="0 0 100 100" width="32" height="32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <defs>
                            <linearGradient id="footerLogoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#818cf8"/>
                                <stop offset="100%" stop-color="#22d3ee"/>
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="50" r="45" fill="url(#footerLogoGradient)"/>
                        <path d="M50 18 L54 36 L72 36 L58 47 L63 65 L50 54 L37 65 L42 47 L28 36 L46 36 Z" fill="white"/>
                        <circle cx="74" cy="26" r="5" fill="white" opacity="0.85"/>
                        <circle cx="28" cy="68" r="4" fill="white" opacity="0.65"/>
                        <circle cx="78" cy="62" r="3" fill="white" opacity="0.5"/>
                    </svg>
                    <span style="font-family: 'Instrument Serif', serif; font-size: 1.2rem; margin-left: 0.5rem;">CosmicCuriosity</span>
                </div>
                <p class="footer-tagline">Your window to the universe</p>
            </div>
            <div class="footer-links-group">
                <div class="footer-section">
                    <h4>Explore</h4>
                    <a href="#tonight">Tonight's Sky</a>
                    <a href="#events">Celestial Events</a>
                    <a href="#tools">Astronomy Tools</a>
                    <a href="#gallery">Space Gallery</a>
                    <a href="#news">Space News</a>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <a href="https://api.nasa.gov" target="_blank" rel="noopener">NASA APIs</a>
                    <a href="https://apod.nasa.gov" target="_blank" rel="noopener">NASA APOD</a>
                    <a href="https://images.nasa.gov" target="_blank" rel="noopener">NASA Image Library</a>
                    <a href="https://www.timeanddate.com/astronomy/" target="_blank" rel="noopener">Time and Date</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© <span data-current-year>2026</span> CosmicCuriosity — Built with ✦ for curious minds everywhere</p>
            <p class="footer-credits">Data from NASA Open APIs • Images courtesy of NASA/ESA • Not affiliated with NASA</p>
        </div>
    </footer>

    <!-- Image Modal -->
    <div class="modal-overlay" id="modal" onclick="closeModal(event)">
        <button class="modal-close" onclick="closeModal(event)">×</button>
        <div class="modal-content" onclick="event.stopPropagation()">
            <img class="modal-image" id="modal-image" src="" alt="">
            <div class="modal-body">
                <h3 class="modal-title" id="modal-title"></h3>
                <p class="modal-text" id="modal-text"></p>
                <div class="share-buttons">
                    <button class="share-btn twitter" onclick="shareImage('twitter')" title="Share on Twitter">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                    </button>
                    <button class="share-btn facebook" onclick="shareImage('facebook')" title="Share on Facebook">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    </button>
                    <button class="share-btn copy" onclick="copyImageLink()" title="Copy link">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    </button>
                    <button class="share-btn download" onclick="downloadImage()" title="Download image">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Generate starfield
        function createStars() {
            const cosmos = document.getElementById('cosmos');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 2 + 2) + 's';
                cosmos.appendChild(star);
            }
        }
        createStars();

        // Set current date
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', options);

        // Calculate days to next eclipse (March 3, 2026)
        const nextEclipse = new Date('2026-03-03');
        const today = new Date();
        const daysToEclipse = Math.ceil((nextEclipse - today) / (1000 * 60 * 60 * 24));
        document.getElementById('days-to-next').textContent = Math.max(0, daysToEclipse);

        // Calculate and display event countdowns
        function updateEventCountdowns() {
            const now = new Date();
            now.setHours(0, 0, 0, 0); // Compare dates only
            
            document.querySelectorAll('.event-countdown[data-date]').forEach(badge => {
                const eventDate = new Date(badge.dataset.date + 'T00:00:00');
                const diffTime = eventDate - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                let text = '';
                let className = 'event-countdown';
                
                if (diffDays < 0) {
                    // Event has passed
                    text = 'Passed';
                    badge.style.opacity = '0.5';
                } else if (diffDays === 0) {
                    text = '🎉 Today!';
                    className += ' very-soon';
                } else if (diffDays === 1) {
                    text = '⏰ Tomorrow!';
                    className += ' very-soon';
                } else if (diffDays <= 7) {
                    text = `${diffDays} days away`;
                    className += ' very-soon';
                } else if (diffDays <= 30) {
                    text = `${diffDays} days away`;
                    className += ' soon';
                } else if (diffDays <= 60) {
                    const weeks = Math.round(diffDays / 7);
                    text = `~${weeks} weeks away`;
                    className += ' soon';
                } else {
                    const months = Math.round(diffDays / 30);
                    text = `~${months} month${months > 1 ? 's' : ''} away`;
                }
                
                badge.textContent = text;
                badge.className = className;
            });
        }
        
        updateEventCountdowns();

        // Scroll animations
        const fadeElements = document.querySelectorAll('.fade-in');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        fadeElements.forEach(el => observer.observe(el));

        // Event filters
        const filterBtns = document.querySelectorAll('.filter-btn');
        const events = document.querySelectorAll('.event-item');

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const filter = btn.dataset.filter;
                events.forEach(event => {
                    if (filter === 'all' || event.dataset.type === filter) {
                        event.style.display = 'flex';
                    } else {
                        event.style.display = 'none';
                    }
                });
            });
        });

        // Modal functions
        const imageDescriptions = {
            "Jupiter's Great Red Spot": "Jupiter's Great Red Spot is a giant storm that has been raging for at least 400 years. It's so large that Earth could fit inside it! This image from NASA's Juno spacecraft shows incredible detail of the swirling clouds.",
            "Pillars of Creation": "These towering columns of cosmic gas and dust are part of the Eagle Nebula, located about 6,500 light-years away. They're actively forming new stars within their dense cores.",
            "Saturn's Majestic Rings": "Saturn's iconic rings are made of billions of particles of ice and rock, ranging from tiny grains to house-sized chunks. They span up to 282,000 km but are remarkably thin.",
            "Mars Perseverance Rover View": "This image from NASA's Perseverance rover shows the Martian landscape in stunning detail. The rover is searching for signs of ancient microbial life and collecting samples for future return to Earth.",
            "Earth from Saturn": "This breathtaking image shows our home planet as a tiny blue dot, photographed by NASA's Cassini spacecraft from 898 million miles away near Saturn.",
            "Carina Nebula (JWST)": "The James Webb Space Telescope captured this stunning view of the Carina Nebula's 'Cosmic Cliffs' — a stellar nursery where new stars are being born within towering pillars of gas and dust."
        };

        function openModal(element) {
            const modal = document.getElementById('modal');
            const img = element.querySelector('img');
            const title = element.querySelector('.gallery-title').textContent;
            
            document.getElementById('modal-image').src = img.src.replace('~medium', '~orig');
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-text').textContent = imageDescriptions[title] || "Stunning imagery captured by NASA's space exploration missions, revealing the wonders of our universe.";
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event.target.classList.contains('modal-overlay') || event.target.classList.contains('modal-close')) {
                document.getElementById('modal').classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        // Image sharing functions
        function shareImage(platform) {
            const title = document.getElementById('modal-title').textContent;
            const url = window.location.href;
            const text = `Check out this amazing space image: ${title}`;
            
            let shareUrl;
            if (platform === 'twitter') {
                shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            } else if (platform === 'facebook') {
                shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }
        
        function copyImageLink() {
            const imgSrc = document.getElementById('modal-image').src;
            navigator.clipboard.writeText(imgSrc).then(() => {
                showToast('Image link copied!', 'success');
            }).catch(() => {
                showToast('Unable to copy link', 'error');
            });
        }
        
        function downloadImage() {
            const imgSrc = document.getElementById('modal-image').src;
            const title = document.getElementById('modal-title').textContent || 'space-image';
            
            fetch(imgSrc)
                .then(response => response.blob())
                .then(blob => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = title.replace(/\s+/g, '-').toLowerCase() + '.jpg';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    showToast('Download started!', 'success');
                })
                .catch(() => {
                    // Fallback: open in new tab
                    window.open(imgSrc, '_blank');
                });
        }

        // Smooth scroll for nav links
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
                
                document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            });
        });

        // Update active nav on scroll
        window.addEventListener('scroll', () => {
            const sections = ['tonight', 'events', 'gallery', 'news'];
            const scrollPos = window.scrollY + 200;
            
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    const top = section.offsetTop;
                    const height = section.offsetHeight;
                    
                    if (scrollPos >= top && scrollPos < top + height) {
                        document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                        document.querySelector(`nav a[href="#${sectionId}"]`).classList.add('active');
                    }
                }
            });
        });

        // Moon phase calculation (simplified)
        function getMoonPhase() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            // Simple moon phase calculation
            const c = Math.floor(365.25 * year);
            const e = Math.floor(30.6 * month);
            const jd = c + e + day - 694039.09;
            const phase = jd / 29.5305882;
            const illumination = Math.abs(Math.cos(phase * Math.PI * 2));
            
            return Math.round(illumination * 100);
        }
        
        // Get moon phase age (days since new moon)
        function getMoonAge() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            const c = Math.floor(365.25 * year);
            const e = Math.floor(30.6 * month);
            const jd = c + e + day - 694039.09;
            const phase = jd / 29.5305882;
            return (phase - Math.floor(phase)) * 29.5305882;
        }
        
        // Calculate moonrise time (approximate based on moon age)
        function getMoonriseTime() {
            const moonAge = getMoonAge();
            // Moonrise roughly 50 min later each day after new moon
            // New moon rises ~6am, full moon rises ~6pm
            const baseHour = 6; // sunrise for new moon
            const hoursLater = (moonAge / 29.53) * 24;
            let moonriseHour = (baseHour + hoursLater) % 24;
            
            const hour = Math.floor(moonriseHour);
            const minutes = Math.floor((moonriseHour - hour) * 60);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const displayHour = hour > 12 ? hour - 12 : (hour === 0 ? 12 : hour);
            
            return `${displayHour}:${minutes.toString().padStart(2, '0')} ${ampm}`;
        }
        
        // Calculate best viewing window
        function getBestViewingWindow(sunsetHour = 17.5) {
            const moonAge = getMoonAge();
            const moonIllum = getMoonPhase();
            
            // Start time: ~1 hour after sunset for astronomical twilight to end
            const startHour = sunsetHour + 1.5;
            
            // End time depends on moonrise (if moon is bright)
            let endHour = 2; // Default: 2 AM
            
            if (moonIllum > 50) {
                // If moon is more than half full, viewing ends when moon is high
                const moonriseHour = (6 + (moonAge / 29.53) * 24) % 24;
                if (moonriseHour > sunsetHour && moonriseHour < 24) {
                    endHour = Math.min(moonriseHour + 1, 24);
                } else if (moonriseHour < 6) {
                    endHour = moonriseHour > 0 ? moonriseHour : 2;
                }
            }
            
            const formatTime = (h) => {
                const hour = Math.floor(h) % 24;
                const ampm = hour >= 12 ? 'PM' : 'AM';
                const displayHour = hour > 12 ? hour - 12 : (hour === 0 ? 12 : hour);
                return `${displayHour}:${(Math.floor((h % 1) * 60)).toString().padStart(2, '0')} ${ampm}`;
            };
            
            // Simplify display
            const startDisplay = Math.floor(startHour) > 12 ? `${Math.floor(startHour) - 12}:30 PM` : `${Math.floor(startHour)}:30 PM`;
            const endDisplay = endHour <= 12 ? `${Math.floor(endHour)}:00 AM` : `${Math.floor(endHour) - 12}:00 PM`;
            
            return `${startDisplay.replace(':30', '')} - ${endDisplay.replace(':00', '')}`;
        }
        
        // Calculate viewing score (1-5 stars)
        function getViewingScore() {
            const moonIllum = getMoonPhase();
            const now = new Date();
            const hour = now.getHours();
            
            let score = 5;
            
            // Moon brightness penalty
            if (moonIllum > 80) score -= 2;
            else if (moonIllum > 50) score -= 1;
            else if (moonIllum > 25) score -= 0.5;
            
            // Time of month bonus for new moon period
            const moonAge = getMoonAge();
            if (moonAge < 3 || moonAge > 26) score += 0.5; // Near new moon
            
            score = Math.max(1, Math.min(5, Math.round(score)));
            
            const labels = ['Poor', 'Fair', 'Good', 'Great', 'Excellent'];
            const stars = '★'.repeat(score) + '☆'.repeat(5 - score);
            const classes = ['poor', 'fair', 'good', 'great', 'excellent'];
            
            return {
                score,
                stars,
                label: labels[score - 1],
                class: classes[score - 1]
            };
        }
        
        // Get visible planets for tonight
        function getVisiblePlanets() {
            const now = new Date();
            const month = now.getMonth();
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / 86400000);
            
            // Simplified planet visibility based on typical 2025-2026 positions
            // In reality, this would use ephemeris data
            const planets = [
                { 
                    name: 'Mercury', 
                    symbol: '☿', 
                    visible: (month >= 2 && month <= 4) || (month >= 8 && month <= 10),
                    difficulty: 'Tricky - low on horizon',
                    dim: true
                },
                { 
                    name: 'Venus', 
                    symbol: '♀', 
                    visible: true, // Venus is usually visible as morning or evening star
                    difficulty: 'Very bright, easy to spot',
                    dim: false
                },
                { 
                    name: 'Mars', 
                    symbol: '♂', 
                    visible: true,
                    difficulty: 'Bright, reddish color',
                    dim: false
                },
                { 
                    name: 'Jupiter', 
                    symbol: '♃', 
                    visible: true, // Jupiter visible most of the year
                    difficulty: 'Brightest planet tonight',
                    dim: false
                },
                { 
                    name: 'Saturn', 
                    symbol: '♄', 
                    visible: month >= 6 || month <= 1,
                    difficulty: 'Rings visible with telescope',
                    dim: false
                },
                { 
                    name: 'Uranus', 
                    symbol: '⛢', 
                    visible: month >= 8 || month <= 3,
                    difficulty: 'Needs binoculars or telescope',
                    dim: true
                },
                { 
                    name: 'Neptune', 
                    symbol: '♆', 
                    visible: month >= 7 || month <= 1,
                    difficulty: 'Telescope required',
                    dim: true
                }
            ];
            
            return planets.filter(p => p.visible);
        }
        
        // Update sky summary card with dynamic data
        function updateSkySummaryCard() {
            const now = new Date();
            
            // Update date
            const dateEl = document.getElementById('summary-date');
            if (dateEl) {
                dateEl.textContent = now.toLocaleDateString('en-US', { 
                    weekday: 'long',
                    month: 'long', 
                    day: 'numeric', 
                    year: 'numeric' 
                });
            }
            
            // Update viewing score
            const viewingScore = getViewingScore();
            const scoreEl = document.getElementById('viewing-score');
            if (scoreEl) {
                scoreEl.className = `viewing-score ${viewingScore.class}`;
                scoreEl.querySelector('.viewing-score-stars').textContent = viewingScore.stars;
                scoreEl.querySelector('.viewing-score-label').textContent = `${viewingScore.label} Viewing`;
            }
            
            // Update moonrise time
            const moonriseEl = document.getElementById('moonrise-time');
            if (moonriseEl) {
                moonriseEl.textContent = getMoonriseTime() + ' ↑';
            }
            
            // Update best viewing window
            const viewingWindowEl = document.getElementById('best-viewing-window');
            if (viewingWindowEl) {
                viewingWindowEl.textContent = getBestViewingWindow();
            }
            
            // Update visible planets
            const visiblePlanets = getVisiblePlanets();
            const planetsCountEl = document.getElementById('planets-count');
            const planetsListEl = document.getElementById('planets-list');
            
            if (planetsCountEl) {
                planetsCountEl.textContent = visiblePlanets.length;
            }
            
            if (planetsListEl) {
                planetsListEl.innerHTML = visiblePlanets.map(p => 
                    `<span class="planet-chip${p.dim ? ' dim' : ''}" title="${p.difficulty}">${p.symbol} ${p.name}</span>`
                ).join('');
            }
        }
        
        // Initialize sky summary on load
        document.addEventListener('DOMContentLoaded', updateSkySummaryCard);

        // This would be called when APOD API is available
        // For now, we're using placeholder content
        console.log('CosmicCuriosity loaded successfully! 🚀');
        console.log('Moon illumination approx:', getMoonPhase() + '%');

        // ==========================================
        // LOCATION FEATURE
        // ==========================================
        
        // Toggle ZIP input visibility
        function toggleZipInput() {
            const form = document.getElementById('location-form');
            if (form) {
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
                if (form.style.display === 'block') {
                    document.getElementById('zip-input')?.focus();
                }
            }
        }
        
        // Request user's device location (only when they click the button)
        function requestUserLocation() {
            const btn = document.getElementById('use-location-btn');
            const btnText = document.getElementById('btn-text');
            
            if (!('geolocation' in navigator)) {
                showToast('Geolocation not supported. Please use ZIP code instead.', 'error');
                toggleZipInput();
                return;
            }
            
            // Show loading state
            if (btn) btn.disabled = true;
            if (btnText) btnText.textContent = 'Getting location...';
            
            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    const { latitude, longitude } = position.coords;
                    
                    try {
                        // Get timezone info from coordinates
                        const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&timezone=auto`);
                        const data = await response.json();
                        
                        const locationData = {
                            lat: latitude,
                            lon: longitude,
                            lng: longitude,
                            timezone: data.timezone || 'auto',
                            displayName: 'Your Location',
                            fromGeo: true
                        };
                        
                        // Cache the location for future visits
                        localStorage.setItem('userLocation', JSON.stringify(locationData));
                        
                        // Show the sky results
                        showSkyResultsWithLocation(locationData);
                        showToast('📍 Location found! Showing your sky.', 'success');
                        
                    } catch(e) {
                        console.warn('Weather API error:', e);
                        // Still use the coordinates even if API fails
                        const locationData = {
                            lat: latitude,
                            lon: longitude,
                            lng: longitude,
                            displayName: 'Your Location',
                            fromGeo: true
                        };
                        localStorage.setItem('userLocation', JSON.stringify(locationData));
                        showSkyResultsWithLocation(locationData);
                    }
                },
                (error) => {
                    // Reset button
                    if (btn) btn.disabled = false;
                    if (btnText) btnText.textContent = 'Use My Location';
                    
                    let message = 'Could not get location. ';
                    if (error.code === 1) {
                        message += 'Please enable location access or use ZIP code.';
                    } else if (error.code === 2) {
                        message += 'Location unavailable. Try ZIP code instead.';
                    } else {
                        message += 'Please try ZIP code instead.';
                    }
                    showToast(message, 'error');
                    toggleZipInput();
                },
                { 
                    timeout: 10000, 
                    maximumAge: 300000,
                    enableHighAccuracy: false
                }
            );
        }
        
        // Show sky results with location data
        function showSkyResultsWithLocation(location) {
            const locationCard = document.getElementById('location-card');
            const skyResults = document.getElementById('sky-results');
            const locationName = document.getElementById('location-name');
            
            if (locationCard) locationCard.style.display = 'none';
            if (skyResults) skyResults.style.display = 'block';
            if (locationName) {
                locationName.textContent = location.displayName || 'Your Location';
            }
            
            // Calculate and display sky data
            if (typeof calculateSkyData === 'function') {
                calculateSkyData(location);
            }
        }
        
        // ==========================================
        // ZIP CODE LOCATION FEATURE
        // ==========================================
        
        // US ZIP code to approximate coordinates (major regions only - no data stored)
        // This is a simplified lookup that runs entirely client-side
        function getApproxLocation(zip) {
            const zipNum = parseInt(zip);
            
            // Determine region and approximate coordinates based on ZIP prefix
            // This is intentionally approximate - we don't store or transmit the exact ZIP
            const regions = {
                // Northeast
                '0': { lat: 42.5, lng: -71.5, region: 'Northeast', timezone: -5 },
                '1': { lat: 41.5, lng: -73.5, region: 'Northeast', timezone: -5 },
                // Mid-Atlantic
                '2': { lat: 39.0, lng: -76.5, region: 'Mid-Atlantic', timezone: -5 },
                // Southeast
                '3': { lat: 33.5, lng: -84.0, region: 'Southeast', timezone: -5 },
                // Midwest
                '4': { lat: 42.0, lng: -83.5, region: 'Midwest', timezone: -5 },
                '5': { lat: 44.0, lng: -93.0, region: 'Upper Midwest', timezone: -6 },
                '6': { lat: 41.5, lng: -90.0, region: 'Central', timezone: -6 },
                // South Central
                '7': { lat: 31.0, lng: -97.0, region: 'South Central', timezone: -6 },
                // Mountain
                '8': { lat: 39.5, lng: -105.0, region: 'Mountain', timezone: -7 },
                // Pacific
                '9': { lat: 37.5, lng: -122.0, region: 'Pacific', timezone: -8 }
            };
            
            const prefix = zip.charAt(0);
            const baseLocation = regions[prefix] || regions['5']; // Default to central US
            
            // Add slight variation based on full ZIP to make it more personalized
            // but still not storing the actual ZIP
            const variation = (zipNum % 100) / 100;
            
            return {
                lat: baseLocation.lat + (variation - 0.5) * 2,
                lng: baseLocation.lng + (variation - 0.5) * 3,
                region: baseLocation.region,
                timezone: baseLocation.timezone,
                displayName: `${baseLocation.region} (${zip.substring(0,3)}xx)`
            };
        }

        // Calculate sun position and visibility
        function getSunTimes(lat, lng, timezone, date = new Date()) {
            // Calculate day of year
            const start = new Date(date.getFullYear(), 0, 0);
            const diff = date - start;
            const dayOfYear = Math.floor(diff / 86400000);
            
            // Solar declination (angle of sun relative to equator)
            const declination = 23.45 * Math.sin((360/365) * (dayOfYear - 81) * Math.PI / 180);
            
            // Hour angle (how long sun is up)
            const latRad = lat * Math.PI / 180;
            const decRad = declination * Math.PI / 180;
            const cosHourAngle = -Math.tan(latRad) * Math.tan(decRad);
            
            // Clamp to valid range (handles polar day/night)
            const clampedCos = Math.max(-1, Math.min(1, cosHourAngle));
            const hourAngle = Math.acos(clampedCos) * 180 / Math.PI;
            
            // Solar noon in UTC (when sun is highest)
            const solarNoonUTC = 12 - lng / 15;
            
            // Convert to local time by adding timezone offset
            // timezone is negative for US (e.g., -8 for PST)
            const solarNoonLocal = solarNoonUTC + timezone;
            
            // Calculate sunrise and sunset in local time
            const daylightHours = (hourAngle / 15) * 2;
            const sunrise = solarNoonLocal - (daylightHours / 2);
            const sunset = solarNoonLocal + (daylightHours / 2);
            
            // Normalize hours to 0-24 range
            const normalizedSunrise = ((sunrise % 24) + 24) % 24;
            const normalizedSunset = ((sunset % 24) + 24) % 24;
            
            return {
                sunrise: formatTime(normalizedSunrise),
                sunset: formatTime(normalizedSunset),
                sunriseHour: normalizedSunrise,
                sunsetHour: normalizedSunset
            };
        }

        function formatTime(decimalHours) {
            let hours = Math.floor(decimalHours);
            let minutes = Math.round((decimalHours - hours) * 60);
            if (minutes === 60) { hours++; minutes = 0; }
            
            const period = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12 || 12;
            
            return `${hours}:${minutes.toString().padStart(2, '0')} ${period}`;
        }

        // Calculate what's visible in the sky
        function calculateVisibleObjects(location) {
            const now = new Date();
            const hour = now.getHours();
            const month = now.getMonth();
            const lat = location.lat;
            
            // Current planetary positions (simplified for Jan 2026)
            const objects = [];
            
            // Jupiter - very prominent in Jan 2026 after opposition
            objects.push({
                name: 'Jupiter',
                type: 'Planet',
                icon: '♃',
                iconClass: 'planet',
                visibility: 'excellent',
                riseTime: '4:30 PM',
                setTime: '5:45 AM',
                direction: 'East → South → West',
                brightness: '-2.8 mag',
                description: 'Brilliant and unmissable! Look for it rising in the east after sunset.',
                bestTime: 'All evening',
                canSee: true
            });

            // Venus - evening star, low in west
            objects.push({
                name: 'Venus',
                type: 'Planet',
                icon: '♀',
                iconClass: 'planet',
                visibility: lat > 35 ? 'fair' : 'good',
                riseTime: 'Daytime',
                setTime: '6:15 PM',
                direction: 'Low Western horizon',
                brightness: '-3.9 mag',
                description: 'The Evening Star sits low in the west just after sunset. Act fast!',
                bestTime: '5:30-6:00 PM',
                canSee: true
            });

            // Mars - rising late
            objects.push({
                name: 'Mars',
                type: 'Planet',
                icon: '♂',
                iconClass: 'planet',
                visibility: 'good',
                riseTime: '11:30 PM',
                setTime: '11:15 AM',
                direction: 'East → South',
                brightness: '+0.8 mag',
                description: 'The Red Planet rises late. Look for its distinctive orange-red color.',
                bestTime: 'After midnight',
                canSee: hour >= 23 || hour < 5
            });

            // Saturn - difficult, near sun
            objects.push({
                name: 'Saturn',
                type: 'Planet',
                icon: '♄',
                iconClass: 'planet',
                visibility: 'poor',
                riseTime: '7:45 AM',
                setTime: '5:30 PM',
                direction: 'Low in twilight',
                brightness: '+1.0 mag',
                description: 'Currently lost in the Sun\'s glare. Will return to evening skies in spring.',
                bestTime: 'Not visible',
                canSee: false
            });

            // Moon
            const moonIllum = getMoonPhase();
            const moonPhase = getMoonPhaseName(moonIllum);
            objects.push({
                name: 'Moon',
                type: moonPhase,
                icon: getMoonEmoji(moonIllum),
                iconClass: 'moon',
                visibility: 'excellent',
                riseTime: '5:45 PM',
                setTime: '8:30 AM',
                direction: 'East → Overhead → West',
                brightness: `${moonIllum}% illuminated`,
                description: `The ${moonPhase} Moon dominates tonight's sky. Great for lunar observation!`,
                bestTime: 'All night',
                canSee: true
            });

            // Constellations based on season and latitude
            const winterConstellations = [
                { name: 'Orion', desc: 'The Hunter - look for the three belt stars' },
                { name: 'Taurus', desc: 'The Bull - find the bright star Aldebaran' },
                { name: 'Gemini', desc: 'The Twins - Castor and Pollux shine bright' }
            ];
            
            const constellation = winterConstellations[month % 3];
            objects.push({
                name: constellation.name,
                type: 'Constellation',
                icon: '⭐',
                iconClass: 'constellation',
                visibility: moonIllum > 80 ? 'fair' : 'good',
                riseTime: '6:00 PM',
                setTime: '4:00 AM',
                direction: 'Southern sky',
                brightness: 'Multiple stars',
                description: constellation.desc,
                bestTime: '9 PM - 1 AM',
                canSee: true
            });

            return objects.filter(obj => obj.canSee);
        }

        function getMoonPhaseName(illumination) {
            if (illumination < 3) return 'New Moon';
            if (illumination < 25) return 'Waxing Crescent';
            if (illumination < 50) return 'First Quarter';
            if (illumination < 75) return 'Waxing Gibbous';
            if (illumination < 97) return 'Waning Gibbous';
            return 'Full Moon';
        }

        function getMoonEmoji(illumination) {
            if (illumination < 3) return '🌑';
            if (illumination < 25) return '🌒';
            if (illumination < 50) return '🌓';
            if (illumination < 75) return '🌔';
            if (illumination < 97) return '🌖';
            return '🌕';
        }

        function getViewingConditions(location, moonIllum) {
            const sunTimes = getSunTimes(location.lat, location.lng, location.timezone);
            
            // Determine sky darkness based on moon
            let darkness = 'Excellent';
            if (moonIllum > 80) darkness = 'Fair';
            else if (moonIllum > 50) darkness = 'Good';
            else if (moonIllum > 25) darkness = 'Very Good';
            
            // Moonlight level
            let moonlight = 'None';
            if (moonIllum > 80) moonlight = 'Bright';
            else if (moonIllum > 50) moonlight = 'Moderate';
            else if (moonIllum > 25) moonlight = 'Low';
            
            // Best viewing window (after astronomical twilight, ~1.5-2 hrs after sunset)
            const bestStartHour = sunTimes.sunsetHour + 1.5;
            const bestEndHour = bestStartHour + 2;
            const bestViewing = `${formatTime(bestStartHour).replace(':00 ', ' ')} - ${formatTime(bestEndHour).replace(':00 ', ' ')}`;
            
            return {
                darkness,
                moonlight,
                sunset: sunTimes.sunset,
                bestViewing
            };
        }

        function getViewingTip(location, moonIllum) {
            const tips = [];
            
            if (moonIllum > 80) {
                tips.push("With a bright Moon tonight, focus on planets and bright stars. Deep sky objects like galaxies will be washed out.");
            } else if (moonIllum < 20) {
                tips.push("Excellent dark sky conditions! Perfect night for viewing the Milky Way, galaxies, and faint nebulae.");
            }
            
            if (location.lat > 40) {
                tips.push("From your northern latitude, the North Star (Polaris) is high in the sky — great for navigation practice!");
            }
            
            // Default tips
            const defaultTips = [
                "Let your eyes adjust for 20-30 minutes in darkness for the best views.",
                "Use a red flashlight to preserve your night vision while checking star maps.",
                "Binoculars can reveal Jupiter's moons and many star clusters!",
                "Look away from city lights — even 10 miles can make a huge difference."
            ];
            
            if (tips.length === 0) {
                tips.push(defaultTips[Math.floor(Math.random() * defaultTips.length)]);
            }
            
            return tips[0];
        }

        // Handle ZIP form submission
        function handleZipSubmit(event) {
            event.preventDefault();
            
            const zipInput = document.getElementById('zip-input');
            const zip = zipInput.value.trim();
            
            // Validate ZIP
            if (!/^\d{5}$/.test(zip)) {
                zipInput.style.borderColor = '#ef4444';
                setTimeout(() => zipInput.style.borderColor = '', 2000);
                return;
            }
            
            // Get location data (never stored on server)
            const location = getApproxLocation(zip);
            const moonIllum = getMoonPhase();
            const conditions = getViewingConditions(location, moonIllum);
            const visibleObjects = calculateVisibleObjects(location);
            const tip = getViewingTip(location, moonIllum);
            
            // Update UI
            document.getElementById('location-name').textContent = location.displayName;
            document.getElementById('cond-darkness').textContent = conditions.darkness;
            document.getElementById('cond-moonlight').textContent = conditions.moonlight;
            document.getElementById('cond-sunset').textContent = conditions.sunset;
            document.getElementById('cond-best').textContent = conditions.bestViewing;
            document.getElementById('viewing-tip').innerHTML = `<strong>Tonight's tip:</strong> ${tip}`;
            
            // Render visible objects
            const skyGrid = document.getElementById('sky-objects');
            skyGrid.innerHTML = visibleObjects.map(obj => `
                <div class="sky-object">
                    <div class="sky-object-header">
                        <div class="sky-object-icon ${obj.iconClass}">${obj.icon}</div>
                        <div>
                            <div class="sky-object-name">${obj.name}</div>
                            <div class="sky-object-type">${obj.type}</div>
                        </div>
                    </div>
                    <div class="sky-object-details">
                        <div class="sky-detail">
                            <div class="sky-detail-label">Visibility</div>
                            <span class="visibility-badge ${obj.visibility}">${obj.visibility}</span>
                        </div>
                        <div class="sky-detail">
                            <div class="sky-detail-label">Brightness</div>
                            <div class="sky-detail-value">${obj.brightness}</div>
                        </div>
                        <div class="sky-detail">
                            <div class="sky-detail-label">Direction</div>
                            <div class="sky-detail-value" style="font-size: 0.8rem;">${obj.direction}</div>
                        </div>
                        <div class="sky-detail">
                            <div class="sky-detail-label">Best Time</div>
                            <div class="sky-detail-value">${obj.bestTime}</div>
                        </div>
                    </div>
                    <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5;">
                        ${obj.description}
                    </p>
                </div>
            `).join('');
            
            // Hide location card, show results
            document.getElementById('location-card').style.display = 'none';
            document.getElementById('sky-results').style.display = 'block';
            document.getElementById('sky-results').classList.add('visible');
            
            // Scroll to results
            document.getElementById('sky-results').scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Clear the ZIP from input (privacy)
            zipInput.value = '';
            
            console.log('Sky calculation complete. ZIP code was not stored.');
        }

        function clearLocation() {
            // Clear cached location
            localStorage.removeItem('userLocation');
            
            // Hide results, show location card
            document.getElementById('sky-results').style.display = 'none';
            document.getElementById('sky-results').classList.remove('visible');
            document.getElementById('location-card').style.display = 'block';
            document.getElementById('location-form').style.display = 'none';
            
            // Reset button
            const btn = document.getElementById('use-location-btn');
            const btnText = document.getElementById('btn-text');
            if (btn) btn.disabled = false;
            if (btnText) btnText.textContent = 'Use My Location';
            
            document.getElementById('location-card').scrollIntoView({ behavior: 'smooth' });
        }

        // Input validation for ZIP (use event delegation since form may be hidden initially)
        document.addEventListener('input', function(e) {
            if (e.target && e.target.id === 'zip-input') {
                e.target.value = e.target.value.replace(/\D/g, '').slice(0, 5);
                e.target.style.borderColor = '';
            }
        });
        
        // Calculate sky data for geolocation results
        function calculateSkyData(location) {
            const moonIllum = getMoonPhase();
            const conditions = getViewingConditions(location, moonIllum);
            const visibleObjects = calculateVisibleObjects(location);
            const tip = getViewingTip(location, moonIllum);
            
            // Update UI elements
            const condDarkness = document.getElementById('cond-darkness');
            const condMoonlight = document.getElementById('cond-moonlight');
            const condSunset = document.getElementById('cond-sunset');
            const condBest = document.getElementById('cond-best');
            const viewingTip = document.getElementById('viewing-tip');
            const skyGrid = document.getElementById('sky-objects');
            
            if (condDarkness) condDarkness.textContent = conditions.darkness;
            if (condMoonlight) condMoonlight.textContent = conditions.moonlight;
            if (condSunset) condSunset.textContent = conditions.sunset;
            if (condBest) condBest.textContent = conditions.bestViewing;
            if (viewingTip) viewingTip.innerHTML = `<strong>Tonight's tip:</strong> ${tip}`;
            
            if (skyGrid) {
                skyGrid.innerHTML = visibleObjects.map(obj => `
                    <div class="sky-object">
                        <div class="sky-object-header">
                            <div class="sky-object-icon ${obj.iconClass}">${obj.icon}</div>
                            <div>
                                <div class="sky-object-name">${obj.name}</div>
                                <div class="sky-object-type">${obj.type}</div>
                            </div>
                        </div>
                        <div class="sky-object-details">
                            <div class="sky-detail">
                                <div class="sky-detail-label">Visibility</div>
                                <span class="visibility-badge ${obj.visibility}">${obj.visibility}</span>
                            </div>
                            <div class="sky-detail">
                                <div class="sky-detail-label">Brightness</div>
                                <div class="sky-detail-value">${obj.brightness}</div>
                            </div>
                            <div class="sky-detail">
                                <div class="sky-detail-label">Direction</div>
                                <div class="sky-detail-value" style="font-size: 0.8rem;">${obj.direction}</div>
                            </div>
                            <div class="sky-detail">
                                <div class="sky-detail-label">Best Time</div>
                                <div class="sky-detail-value">${obj.bestTime}</div>
                            </div>
                        </div>
                        <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5;">
                            ${obj.description}
                        </p>
                    </div>
                `).join('');
            }
            
            // Make results visible
            const skyResults = document.getElementById('sky-results');
            if (skyResults) skyResults.classList.add('visible');
        }

        // ==========================================
        // ROBUST IMAGE LOADING SYSTEM
        // Retry logic, fallbacks, and placeholders
        // ==========================================
        
        const ImageLoader = {
            // Fallback images for different categories
            fallbacks: {
                space: [
                    'https://images-assets.nasa.gov/image/PIA17171/PIA17171~thumb.jpg',
                    'https://images-assets.nasa.gov/image/PIA22946/PIA22946~thumb.jpg',
                    'https://images-assets.nasa.gov/image/PIA21046/PIA21046~thumb.jpg',
                    'https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e001738/GSFC_20171208_Archive_e001738~thumb.jpg',
                    'https://images-assets.nasa.gov/image/PIA18033/PIA18033~thumb.jpg'
                ],
                planet: [
                    'https://images-assets.nasa.gov/image/PIA22946/PIA22946~medium.jpg',
                    'https://images-assets.nasa.gov/image/PIA21046/PIA21046~medium.jpg',
                    'https://images-assets.nasa.gov/image/PIA17171/PIA17171~medium.jpg'
                ],
                nebula: [
                    'https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e001738/GSFC_20171208_Archive_e001738~medium.jpg',
                    'https://images-assets.nasa.gov/image/PIA18033/PIA18033~medium.jpg'
                ]
            },
            
            // SVG placeholder with space theme
            placeholder: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect fill='%230a0a1a' width='400' height='300'/%3E%3Ccircle cx='200' cy='150' r='60' fill='%231a1a3e'/%3E%3Ccircle cx='320' cy='80' r='3' fill='%23ffffff' opacity='0.5'/%3E%3Ccircle cx='80' cy='220' r='2' fill='%23ffffff' opacity='0.4'/%3E%3Ccircle cx='350' cy='200' r='2' fill='%23ffffff' opacity='0.3'/%3E%3Ccircle cx='50' cy='100' r='2' fill='%23ffffff' opacity='0.5'/%3E%3Ccircle cx='150' cy='50' r='1.5' fill='%23ffffff' opacity='0.4'/%3E%3Ccircle cx='280' cy='250' r='1.5' fill='%23ffffff' opacity='0.3'/%3E%3Ctext x='200' y='155' text-anchor='middle' fill='%236366f1' font-family='sans-serif' font-size='24'%3E✦%3C/text%3E%3Ctext x='200' y='185' text-anchor='middle' fill='%239898b0' font-family='sans-serif' font-size='12'%3ELoading image...%3C/text%3E%3C/svg%3E`,
            
            // Failed placeholder
            failedPlaceholder: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect fill='%230a0a1a' width='400' height='300'/%3E%3Ccircle cx='200' cy='130' r='40' fill='none' stroke='%233a3a5a' stroke-width='3'/%3E%3Cline x1='175' y1='105' x2='225' y2='155' stroke='%233a3a5a' stroke-width='3'/%3E%3Ctext x='200' y='200' text-anchor='middle' fill='%235a5a78' font-family='sans-serif' font-size='14'%3EImage unavailable%3C/text%3E%3Ctext x='200' y='220' text-anchor='middle' fill='%233a3a5a' font-family='sans-serif' font-size='11'%3EClick to retry%3C/text%3E%3C/svg%3E`,
            
            maxRetries: 3,
            retryDelay: 1000, // ms
            
            init() {
                // Process all images
                document.querySelectorAll('.gallery-item img, .news-image img, .apod-hero img').forEach(img => {
                    this.setupImage(img);
                });
                
                // Watch for dynamically added images
                this.observeNewImages();
                
                console.log('🖼️ Image loader initialized');
            },
            
            setupImage(img) {
                // Skip if already processed
                if (img.dataset.loaderProcessed) return;
                img.dataset.loaderProcessed = 'true';
                
                // Store original src
                const originalSrc = img.src || img.dataset.src;
                img.dataset.originalSrc = originalSrc;
                img.dataset.retryCount = '0';
                
                // Set loading placeholder
                if (!img.complete) {
                    img.dataset.loadingPlaceholder = 'true';
                }
                
                // Add loading class to parent
                const parent = img.closest('.gallery-item, .news-image, .apod-hero');
                if (parent) {
                    parent.classList.add('image-loading');
                }
                
                // Handle load success
                img.addEventListener('load', () => this.onImageLoad(img));
                
                // Handle load error
                img.addEventListener('error', () => this.onImageError(img));
                
                // If image was already cached and loaded, trigger load
                if (img.complete && img.naturalWidth > 0) {
                    this.onImageLoad(img);
                }
            },
            
            onImageLoad(img) {
                const parent = img.closest('.gallery-item, .news-image, .apod-hero');
                if (parent) {
                    parent.classList.remove('image-loading', 'image-failed');
                    parent.classList.add('image-loaded');
                }
                img.style.opacity = '1';
                delete img.dataset.loadingPlaceholder;
            },
            
            onImageError(img) {
                const retryCount = parseInt(img.dataset.retryCount || '0');
                const originalSrc = img.dataset.originalSrc;
                
                console.log(`Image failed: ${originalSrc} (attempt ${retryCount + 1})`);
                
                if (retryCount < this.maxRetries) {
                    // Retry with delay
                    img.dataset.retryCount = (retryCount + 1).toString();
                    
                    setTimeout(() => {
                        // Try different URL variations
                        let newSrc = originalSrc;
                        
                        if (retryCount === 0) {
                            // First retry: try adding a cache buster
                            newSrc = originalSrc + (originalSrc.includes('?') ? '&' : '?') + 't=' + Date.now();
                        } else if (retryCount === 1) {
                            // Second retry: try NASA images API as fallback
                            newSrc = this.getNasaFallback(originalSrc);
                        } else {
                            // Third retry: try a different fallback
                            newSrc = this.getRandomFallback();
                        }
                        
                        console.log(`Retrying image: ${newSrc}`);
                        img.src = newSrc;
                    }, this.retryDelay * (retryCount + 1));
                } else {
                    // All retries failed, show fallback
                    this.showFallback(img);
                }
            },
            
            getNasaFallback(originalSrc) {
                // Try to extract image ID from NASA URL and use their images API
                const piaMatch = originalSrc.match(/pia(\d+)/i);
                if (piaMatch) {
                    return `https://images-assets.nasa.gov/image/PIA${piaMatch[1]}/PIA${piaMatch[1]}~medium.jpg`;
                }
                
                // Try general NASA image patterns
                if (originalSrc.includes('nasa.gov')) {
                    // Try images-assets subdomain
                    return originalSrc.replace('www.nasa.gov/wp-content/uploads', 'images-assets.nasa.gov/image');
                }
                
                return this.getRandomFallback();
            },
            
            getRandomFallback() {
                const allFallbacks = [
                    ...this.fallbacks.space,
                    ...this.fallbacks.planet,
                    ...this.fallbacks.nebula
                ];
                return allFallbacks[Math.floor(Math.random() * allFallbacks.length)];
            },
            
            showFallback(img) {
                const parent = img.closest('.gallery-item, .news-image, .apod-hero');
                
                // Use a random NASA image as fallback instead of placeholder
                const fallbackSrc = this.getRandomFallback();
                img.src = fallbackSrc;
                
                // Mark as failed but still show something
                if (parent) {
                    parent.classList.remove('image-loading');
                    parent.classList.add('image-fallback');
                }
                
                // Add click to retry functionality
                img.style.cursor = 'pointer';
                img.title = 'Click to retry loading original image';
                
                const retryHandler = () => {
                    img.dataset.retryCount = '0';
                    img.src = img.dataset.originalSrc;
                    img.removeEventListener('click', retryHandler);
                    img.style.cursor = '';
                    img.title = '';
                };
                
                img.addEventListener('click', retryHandler, { once: true });
            },
            
            observeNewImages() {
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        mutation.addedNodes.forEach((node) => {
                            if (node.nodeType === 1) {
                                // Check if the node itself is an image
                                if (node.tagName === 'IMG') {
                                    this.setupImage(node);
                                }
                                // Check for images within the node
                                node.querySelectorAll?.('img').forEach(img => {
                                    this.setupImage(img);
                                });
                            }
                        });
                    });
                });
                
                observer.observe(document.body, { childList: true, subtree: true });
            }
        };
        
        // Add CSS for image loading states
        const imageLoaderStyles = document.createElement('style');
        imageLoaderStyles.textContent = `
            /* Image loading states */
            .image-loading {
                position: relative;
            }
            
            .image-loading::before {
                content: '';
                position: absolute;
                inset: 0;
                background: linear-gradient(90deg, var(--bg-card) 25%, var(--bg-hover) 50%, var(--bg-card) 75%);
                background-size: 200% 100%;
                animation: image-shimmer 1.5s infinite;
                z-index: 1;
            }
            
            .image-loading::after {
                content: '✦';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2rem;
                color: var(--accent-glow);
                z-index: 2;
                animation: image-pulse 1.5s ease-in-out infinite;
            }
            
            @keyframes image-shimmer {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            
            @keyframes image-pulse {
                0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
                50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            }
            
            .image-loading img {
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            
            .image-loaded img {
                opacity: 1;
            }
            
            .image-loaded::before,
            .image-loaded::after {
                display: none;
            }
            
            .image-fallback {
                position: relative;
            }
            
            .image-fallback::after {
                content: '↻ Click to retry';
                position: absolute;
                bottom: 8px;
                right: 8px;
                font-size: 0.7rem;
                padding: 0.25rem 0.5rem;
                background: rgba(0, 0, 0, 0.7);
                color: var(--text-dim);
                border-radius: 4px;
                z-index: 5;
                pointer-events: none;
            }
            
            /* Smooth image appearance */
            .gallery-item img,
            .news-image img,
            .apod-hero img {
                transition: opacity 0.3s ease, transform 0.5s ease;
            }
        `;
        document.head.appendChild(imageLoaderStyles);
        
        // Initialize image loader
        ImageLoader.init();
        
        // ==========================================
        // SPACE FACTS CAROUSEL
        // Draggable, auto-scroll, touch support
        // ==========================================
        
        const FactsCarousel = {
            track: null,
            cards: [],
            currentIndex: 0,
            cardWidth: 295, // card width + gap
            visibleCards: 4,
            autoScrollInterval: null,
            autoScrollEnabled: true,
            autoScrollDelay: 4000,
            isDragging: false,
            startX: 0,
            scrollLeft: 0,
            
            init() {
                this.track = document.getElementById('facts-track');
                if (!this.track) return;
                
                this.cards = Array.from(this.track.querySelectorAll('.fact-card'));
                this.totalCards = this.cards.length;
                
                // Calculate visible cards based on viewport
                this.calculateVisibleCards();
                
                // Setup controls
                this.setupControls();
                
                // Setup drag/touch
                this.setupDrag();
                
                // Setup dots
                this.setupDots();
                
                // Start auto-scroll
                this.startAutoScroll();
                
                // Handle resize
                window.addEventListener('resize', () => this.handleResize());
                
                // Pause on hover
                const carousel = document.getElementById('facts-carousel');
                carousel.addEventListener('mouseenter', () => this.pauseAutoScroll());
                carousel.addEventListener('mouseleave', () => {
                    if (this.autoScrollEnabled) this.startAutoScroll();
                });
                
                // Update counter
                this.updateCounter();
                
                console.log('🎠 Facts carousel initialized');
            },
            
            calculateVisibleCards() {
                const containerWidth = document.querySelector('.facts-container')?.offsetWidth || window.innerWidth;
                this.visibleCards = Math.floor((containerWidth - 60) / this.cardWidth);
                this.visibleCards = Math.max(1, Math.min(this.visibleCards, 5));
            },
            
            setupControls() {
                const prevBtn = document.getElementById('facts-prev');
                const nextBtn = document.getElementById('facts-next');
                const autoToggle = document.getElementById('facts-auto-toggle');
                
                prevBtn?.addEventListener('click', () => {
                    this.prev();
                    this.restartAutoScroll();
                });
                
                nextBtn?.addEventListener('click', () => {
                    this.next();
                    this.restartAutoScroll();
                });
                
                autoToggle?.addEventListener('click', () => {
                    this.toggleAutoScroll();
                });
            },
            
            setupDots() {
                const dotsContainer = document.getElementById('facts-dots');
                if (!dotsContainer) return;
                
                // Create dot groups (every 4 cards)
                const numDots = Math.ceil(this.totalCards / this.visibleCards);
                
                for (let i = 0; i < Math.min(numDots, 8); i++) {
                    const dot = document.createElement('div');
                    dot.className = 'facts-dot' + (i === 0 ? ' active' : '');
                    dot.addEventListener('click', () => {
                        this.goTo(i * this.visibleCards);
                        this.restartAutoScroll();
                    });
                    dotsContainer.appendChild(dot);
                }
            },
            
            setupDrag() {
                // Mouse events
                this.track.addEventListener('mousedown', (e) => this.startDrag(e));
                document.addEventListener('mousemove', (e) => this.drag(e));
                document.addEventListener('mouseup', () => this.endDrag());
                
                // Touch events
                this.track.addEventListener('touchstart', (e) => this.startDrag(e), { passive: true });
                this.track.addEventListener('touchmove', (e) => this.drag(e), { passive: true });
                this.track.addEventListener('touchend', () => this.endDrag());
                
                // Prevent image drag
                this.track.addEventListener('dragstart', (e) => e.preventDefault());
            },
            
            startDrag(e) {
                this.isDragging = true;
                this.track.classList.add('dragging');
                this.startX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
                this.scrollLeft = this.currentIndex * this.cardWidth;
                this.pauseAutoScroll();
            },
            
            drag(e) {
                if (!this.isDragging) return;
                
                const x = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
                const walk = (this.startX - x);
                const newPosition = this.scrollLeft + walk;
                
                this.track.style.transform = `translateX(-${newPosition}px)`;
            },
            
            endDrag() {
                if (!this.isDragging) return;
                
                this.isDragging = false;
                this.track.classList.remove('dragging');
                
                // Snap to nearest card
                const currentTransform = this.track.style.transform;
                const match = currentTransform.match(/translateX\(-?(\d+)/);
                if (match) {
                    const currentPos = parseInt(match[1]);
                    const newIndex = Math.round(currentPos / this.cardWidth);
                    this.goTo(Math.max(0, Math.min(newIndex, this.totalCards - this.visibleCards)));
                }
                
                if (this.autoScrollEnabled) this.startAutoScroll();
            },
            
            prev() {
                this.goTo(this.currentIndex - this.visibleCards);
            },
            
            next() {
                this.goTo(this.currentIndex + this.visibleCards);
            },
            
            goTo(index) {
                // Wrap around
                if (index < 0) {
                    index = Math.max(0, this.totalCards - this.visibleCards);
                } else if (index > this.totalCards - this.visibleCards) {
                    index = 0;
                }
                
                this.currentIndex = index;
                this.track.style.transform = `translateX(-${index * this.cardWidth}px)`;
                
                this.updateDots();
                this.updateCounter();
            },
            
            updateDots() {
                const dots = document.querySelectorAll('.facts-dot');
                const activeDotIndex = Math.floor(this.currentIndex / this.visibleCards);
                
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === activeDotIndex);
                });
            },
            
            updateCounter() {
                const counter = document.getElementById('facts-counter');
                if (counter) {
                    const current = Math.min(this.currentIndex + this.visibleCards, this.totalCards);
                    counter.textContent = `${this.currentIndex + 1}-${current} / ${this.totalCards}`;
                }
            },
            
            startAutoScroll() {
                if (this.autoScrollInterval) return;
                
                this.autoScrollInterval = setInterval(() => {
                    this.next();
                }, this.autoScrollDelay);
            },
            
            pauseAutoScroll() {
                if (this.autoScrollInterval) {
                    clearInterval(this.autoScrollInterval);
                    this.autoScrollInterval = null;
                }
            },
            
            restartAutoScroll() {
                this.pauseAutoScroll();
                if (this.autoScrollEnabled) {
                    setTimeout(() => this.startAutoScroll(), 1000);
                }
            },
            
            toggleAutoScroll() {
                this.autoScrollEnabled = !this.autoScrollEnabled;
                const toggle = document.getElementById('facts-auto-toggle');
                
                if (this.autoScrollEnabled) {
                    toggle?.classList.add('active');
                    this.startAutoScroll();
                } else {
                    toggle?.classList.remove('active');
                    this.pauseAutoScroll();
                }
            },
            
            handleResize() {
                this.calculateVisibleCards();
                // Reposition to valid index
                this.goTo(Math.min(this.currentIndex, this.totalCards - this.visibleCards));
            }
        };
        
        // Initialize facts carousel when DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => FactsCarousel.init());
        } else {
            FactsCarousel.init();
        }
    </script>
    
    <!-- Astronomy Engine Core -->
    <script src="astro-engine.js" defer></script>
    
    <!-- Star Map -->
    <script src="starmap.js" defer></script>
    
    <!-- Enhanced Features Module -->
    <script src="features.js" defer></script>
    
    <!-- Additional Feature Modules -->
    <script src="astro-features.js" defer></script>
    <script src="data-features.js" defer></script>
    <script src="ui-advanced.js" defer></script>
    
    <!-- UX Improvements (Sidebar, Smart Cards, Micro-interactions) -->
    <script src="ux-improvements.js" defer></script>
    
    <!-- Auto-Update System (Keeps data accurate over time) -->
    <script src="auto-update.js" defer></script>
    
    <!-- Initialize All Features -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize scroll animations
            initScrollAnimations();
            
            // Initialize core systems (with error handling)
            try { if (window.Toast) Toast.init(); } catch(e) { console.warn('Toast init error:', e); }
            try { if (window.ThemeManager) ThemeManager.init(); } catch(e) { console.warn('ThemeManager init error:', e); }
            try { if (window.SoundManager) SoundManager.init(); } catch(e) { console.warn('SoundManager init error:', e); }
            try { if (window.KeyboardShortcuts) KeyboardShortcuts.init(); } catch(e) { console.warn('KeyboardShortcuts init error:', e); }
            
            // Initialize Tools Section
            try { initToolsSection(); } catch(e) { console.warn('Tools init error:', e); }
            
            // Initialize weather widget
            try { initWeatherWidget(); } catch(e) { console.warn('Weather init error:', e); }
            
            // Initialize local SEO
            try { initLocalSEO(); } catch(e) { console.warn('LocalSEO init error:', e); }
            
            console.log('✨ Cosmic Curiosity loaded');
        });
        
        // ==========================================
        // LOCAL SEO - Dynamic location-based content
        // ==========================================
        function initLocalSEO() {
            // Check for cached location (from previous user consent)
            const cachedLocation = localStorage.getItem('userLocation');
            if (cachedLocation) {
                try {
                    const loc = JSON.parse(cachedLocation);
                    updateLocationContent(loc);
                    // Show the sky results if we have cached location
                    showSkyResultsWithLocation(loc);
                } catch(e) {
                    console.warn('Cached location parse error:', e);
                }
            }
            // Do NOT automatically request geolocation - wait for user action
        }
        
        function updateLocationContent(location) {
            // Update any location-specific elements
            const locationElements = document.querySelectorAll('[data-location-name]');
            locationElements.forEach(el => {
                if (location.city) {
                    el.textContent = location.city;
                }
            });
            
            // Add location to page title for local SEO (only if we have city)
            if (location.city && !document.title.includes(location.city)) {
                const baseTitle = document.title.split(' | ')[0];
                // Don't modify - search engines see static title
            }
            
            // Update structured data with location
            updateLocalSchema(location);
        }
        
        function updateLocalSchema(location) {
            // Create location-specific schema
            const localSchema = {
                "@context": "https://schema.org",
                "@type": "WebPage",
                "name": "Tonight's Sky - Planets Visible Now",
                "description": `See what planets and stars are visible tonight. Live sky map, moon phase, and stargazing conditions.`,
                "spatialCoverage": {
                    "@type": "Place",
                    "geo": {
                        "@type": "GeoCoordinates",
                        "latitude": location.lat,
                        "longitude": location.lon
                    }
                }
            };
            
            // Add to page
            const script = document.createElement('script');
            script.type = 'application/ld+json';
            script.textContent = JSON.stringify(localSchema);
            document.head.appendChild(script);
        }
        
        // ==========================================
        // ADD TO CALENDAR
        // ==========================================
        function addToCalendar(title, date, description) {
            const eventDate = new Date(date + 'T20:00:00');
            const endDate = new Date(date + 'T23:00:00');
            
            // Format for ICS file
            const formatDate = (d) => d.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            
            const icsContent = [
                'BEGIN:VCALENDAR',
                'VERSION:2.0',
                'PRODID:-//CosmicCuriosity//EN',
                'BEGIN:VEVENT',
                `DTSTART:${formatDate(eventDate)}`,
                `DTEND:${formatDate(endDate)}`,
                `SUMMARY:${title}`,
                `DESCRIPTION:${description}\\n\\nMore info at cosmiccuriosity.io`,
                'STATUS:CONFIRMED',
                `UID:${Date.now()}@cosmiccuriosity.io`,
                'END:VEVENT',
                'END:VCALENDAR'
            ].join('\r\n');
            
            // Create and download file
            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${title.replace(/\s+/g, '_')}.ics`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Show confirmation
            showToast('Event added to calendar!', 'success');
        }
        
        // ==========================================
        // SHARE EVENT
        // ==========================================
        function shareEvent(title, date) {
            const eventDate = new Date(date);
            const formattedDate = eventDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
            const text = `🌟 ${title} on ${formattedDate}! Don't miss this celestial event. Learn more at cosmiccuriosity.io`;
            const url = 'https://cosmiccuriosity.io/#events';
            
            if (navigator.share) {
                navigator.share({ title, text, url }).catch(() => {});
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(text + ' ' + url).then(() => {
                    showToast('Link copied to clipboard!', 'success');
                }).catch(() => {
                    showToast('Unable to share', 'error');
                });
            }
        }
        
        // ==========================================
        // SHARE SKY SUMMARY
        // ==========================================
        function shareSkySummary() {
            const today = new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
            const moonPhase = document.querySelector('[data-moon-phase]')?.textContent || 'Moon visible';
            const text = `🌙 Tonight's Sky (${today}): ${moonPhase}, Jupiter bright in the east, Orion rising. Perfect night for stargazing! ✨`;
            const url = 'https://cosmiccuriosity.io';
            
            if (navigator.share) {
                navigator.share({ 
                    title: "Tonight's Sky - CosmicCuriosity", 
                    text, 
                    url 
                }).catch(() => {});
            } else {
                navigator.clipboard.writeText(text + ' ' + url).then(() => {
                    showToast('Summary copied to clipboard!', 'success');
                }).catch(() => {
                    showToast('Unable to share', 'error');
                });
            }
        }
        
        // ==========================================
        // WEATHER WIDGET - Location-first Integration
        // ==========================================
        async function initWeatherWidget() {
            // Check for cached weather location
            const cachedWeatherLoc = localStorage.getItem('weatherLocation');
            if (cachedWeatherLoc) {
                try {
                    const loc = JSON.parse(cachedWeatherLoc);
                    await fetchWeatherData(loc.lat, loc.lon || loc.lng, loc.displayName);
                    showWeatherResults();
                } catch(e) {
                    console.warn('Weather fetch error:', e);
                    showWeatherPrompt();
                }
            } else {
                showWeatherPrompt();
            }
        }
        
        function showWeatherPrompt() {
            const prompt = document.getElementById('weather-prompt');
            const results = document.getElementById('weather-results');
            if (prompt) prompt.style.display = 'block';
            if (results) results.style.display = 'none';
        }
        
        function showWeatherResults() {
            const prompt = document.getElementById('weather-prompt');
            const results = document.getElementById('weather-results');
            if (prompt) prompt.style.display = 'none';
            if (results) results.style.display = 'block';
        }
        
        function toggleWeatherZip() {
            const form = document.getElementById('weather-zip-form');
            if (form) {
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
                if (form.style.display === 'block') {
                    document.getElementById('weather-zip-input')?.focus();
                }
            }
        }
        
        function requestWeatherLocation() {
            const btn = document.getElementById('weather-location-btn');
            const btnText = document.getElementById('weather-btn-text');
            
            if (!('geolocation' in navigator)) {
                showToast('Geolocation not supported. Please use ZIP code.', 'error');
                toggleWeatherZip();
                return;
            }
            
            if (btn) btn.disabled = true;
            if (btnText) btnText.textContent = 'Getting location...';
            
            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    const { latitude, longitude } = position.coords;
                    
                    const locationData = {
                        lat: latitude,
                        lon: longitude,
                        displayName: 'Your Location'
                    };
                    
                    localStorage.setItem('weatherLocation', JSON.stringify(locationData));
                    
                    await fetchWeatherData(latitude, longitude, 'Your Location');
                    showWeatherResults();
                    showToast('📍 Weather data loaded!', 'success');
                },
                (error) => {
                    if (btn) btn.disabled = false;
                    if (btnText) btnText.textContent = 'Use My Location';
                    
                    let message = 'Could not get location. ';
                    if (error.code === 1) {
                        message += 'Please enable location access or use ZIP code.';
                    } else {
                        message += 'Try ZIP code instead.';
                    }
                    showToast(message, 'error');
                    toggleWeatherZip();
                },
                { timeout: 10000, maximumAge: 300000, enableHighAccuracy: false }
            );
        }
        
        function handleWeatherZipSubmit(event) {
            event.preventDefault();
            
            const zipInput = document.getElementById('weather-zip-input');
            const zip = zipInput.value.trim();
            
            if (!/^\d{5}$/.test(zip)) {
                zipInput.style.borderColor = '#ef4444';
                setTimeout(() => zipInput.style.borderColor = '', 2000);
                return;
            }
            
            // Get approximate location from ZIP
            const location = getApproxLocation(zip);
            
            const locationData = {
                lat: location.lat,
                lon: location.lng,
                displayName: location.displayName
            };
            
            localStorage.setItem('weatherLocation', JSON.stringify(locationData));
            
            fetchWeatherData(location.lat, location.lng, location.displayName);
            showWeatherResults();
            zipInput.value = '';
        }
        
        function clearWeatherLocation() {
            localStorage.removeItem('weatherLocation');
            showWeatherPrompt();
            
            // Reset button state
            const btn = document.getElementById('weather-location-btn');
            const btnText = document.getElementById('weather-btn-text');
            if (btn) btn.disabled = false;
            if (btnText) btnText.textContent = 'Use My Location';
            
            // Hide ZIP form
            const form = document.getElementById('weather-zip-form');
            if (form) form.style.display = 'none';
        }
        
        async function fetchWeatherData(lat, lon, locationName) {
            try {
                // Get user's temp preference
                const tempUnit = localStorage.getItem('setting_tempUnit') || 'F';
                const tempParam = tempUnit === 'C' ? 'celsius' : 'fahrenheit';
                
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,cloud_cover&hourly=cloud_cover&timezone=auto&forecast_days=1&temperature_unit=${tempParam}`
                );
                
                if (!response.ok) throw new Error('Weather API error');
                
                const data = await response.json();
                const current = data.current;
                const hourly = data.hourly;
                
                // Update location name
                const locationNameEl = document.getElementById('weather-location-name');
                if (locationNameEl) locationNameEl.textContent = locationName || 'Your Location';
                
                // Update current conditions
                const clouds = current.cloud_cover || 0;
                const humidity = current.relative_humidity_2m || 0;
                const temp = Math.round(current.temperature_2m || 0);
                
                // Determine viewing rating based on cloud cover
                let rating, ratingClass;
                if (clouds <= 15) {
                    rating = 'Excellent';
                    ratingClass = 'excellent';
                } else if (clouds <= 35) {
                    rating = 'Good';
                    ratingClass = 'good';
                } else if (clouds <= 60) {
                    rating = 'Fair';
                    ratingClass = 'fair';
                } else {
                    rating = 'Poor';
                    ratingClass = 'poor';
                }
                
                // Update UI
                const ratingEl = document.getElementById('weather-rating');
                if (ratingEl) {
                    ratingEl.className = 'weather-badge ' + ratingClass;
                    ratingEl.textContent = rating;
                }
                
                const cloudEl = document.getElementById('weather-clouds');
                if (cloudEl) cloudEl.textContent = clouds + '%';
                
                const humidEl = document.getElementById('weather-humidity');
                if (humidEl) humidEl.textContent = humidity + '%';
                
                const tempEl = document.getElementById('weather-temp');
                if (tempEl) tempEl.textContent = temp + '°' + tempUnit;
                
                // Update hourly forecast
                updateHourlyForecast(hourly, tempUnit);
                
            } catch(e) {
                console.warn('Weather fetch failed:', e);
                showToast('Could not load weather data. Please try again.', 'error');
                showWeatherPrompt();
            }
        }
        
        function updateHourlyForecast(hourly, tempUnit) {
            const forecastEl = document.getElementById('weather-forecast');
            if (!forecastEl || !hourly) return;
            
            const now = new Date();
            const currentHour = now.getHours();
            const timeFormat = localStorage.getItem('setting_timeFormat') || '12h';
            
            // Get evening/night hours (6 PM to 4 AM)
            const targetHours = [20, 22, 0, 2, 4];
            let html = '';
            
            targetHours.forEach(targetHour => {
                // Find index in hourly data
                let hourIndex = targetHour;
                if (targetHour < currentHour && targetHour < 6) {
                    hourIndex += 24; // Next day early morning
                }
                
                const cloudCover = hourly.cloud_cover?.[hourIndex % 24] || 0;
                const icon = cloudCover <= 20 ? '🌙' : cloudCover <= 50 ? '⛅' : '☁️';
                
                let timeLabel;
                if (timeFormat === '24h') {
                    timeLabel = `${targetHour.toString().padStart(2, '0')}:00`;
                } else {
                    const hour12 = targetHour === 0 ? 12 : targetHour > 12 ? targetHour - 12 : targetHour;
                    const ampm = targetHour < 12 || targetHour === 24 ? 'AM' : 'PM';
                    timeLabel = `${hour12} ${ampm}`;
                }
                
                html += `
                    <div class="forecast-hour">
                        <div class="forecast-time">${timeLabel}</div>
                        <div class="forecast-icon">${icon}</div>
                        <div class="forecast-cloud">${cloudCover}%</div>
                    </div>
                `;
            });
            
            forecastEl.innerHTML = html;
        }
        
        // ==========================================
        // SETTINGS PANEL
        // ==========================================
        function toggleSettings() {
            const modal = document.getElementById('settings-modal');
            if (modal) {
                modal.classList.toggle('open');
                if (modal.classList.contains('open')) {
                    loadSettings();
                }
            }
        }
        
        function loadSettings() {
            // Load saved settings into UI
            const timeFormat = localStorage.getItem('setting_timeFormat') || '12h';
            const tempUnit = localStorage.getItem('setting_tempUnit') || 'F';
            const autoRefresh = localStorage.getItem('setting_autoRefresh') !== 'false';
            const animations = localStorage.getItem('setting_animations') !== 'false';
            const beginnerMode = localStorage.getItem('setting_beginnerMode') === 'true';
            
            const timeEl = document.getElementById('setting-time-format');
            if (timeEl) timeEl.value = timeFormat;
            
            const tempEl = document.getElementById('setting-temp-unit');
            if (tempEl) tempEl.value = tempUnit;
            
            const autoEl = document.getElementById('setting-auto-refresh');
            if (autoEl) autoEl.checked = autoRefresh;
            
            const animEl = document.getElementById('setting-animations');
            if (animEl) animEl.checked = animations;
            
            const beginnerEl = document.getElementById('setting-beginner');
            if (beginnerEl) beginnerEl.checked = beginnerMode;
        }
        
        function saveSetting(key, value) {
            localStorage.setItem('setting_' + key, value);
            
            // Apply setting immediately
            if (key === 'animations') {
                document.body.classList.toggle('reduce-motion', !value);
            }
            if (key === 'tempUnit') {
                // Refresh weather with new unit
                initWeatherWidget();
            }
            if (key === 'timeFormat') {
                // Refresh displays
                initWeatherWidget();
            }
            
            showToast('Setting saved', 'success');
        }
        
        function clearSavedLocation() {
            localStorage.removeItem('userLocation');
            showToast('Location cleared', 'success');
            
            // Reset location UI if visible
            const skyResults = document.getElementById('sky-results');
            const locationCard = document.getElementById('location-card');
            if (skyResults) skyResults.style.display = 'none';
            if (locationCard) locationCard.style.display = 'block';
        }
        
        // ==========================================
        // ON THIS DAY IN SPACE HISTORY
        // ==========================================
        function initSpaceHistory() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            // Comprehensive space history database
            const spaceHistory = {
                '1-1': { year: 2019, title: 'New Horizons Flies By Ultima Thule', desc: 'NASA\'s spacecraft made the most distant flyby in history, passing the Kuiper Belt object 4 billion miles from Earth.', more: [{year: 1801, text: 'Giuseppe Piazzi discovers the first asteroid, Ceres'}] },
                '1-2': { year: 1959, title: 'Luna 1 Becomes First Spacecraft to Reach Moon', desc: 'The Soviet spacecraft became the first human-made object to reach the vicinity of the Moon and enter heliocentric orbit.', more: [{year: 2004, text: 'Stardust spacecraft flies through comet Wild 2\'s tail'}] },
                '1-3': { year: 2004, title: 'Spirit Rover Lands on Mars', desc: 'NASA\'s Spirit rover successfully landed on Mars, beginning a mission that would last over 6 years exploring Gusev Crater.', more: [{year: 1999, text: 'Mars Polar Lander launched'}] },
                '1-4': { year: 2004, title: 'Spirit Rover Begins Mars Exploration', desc: 'One day after landing, the Spirit rover sent its first images from Mars, revealing a rocky terrain in Gusev Crater.', more: [{year: 1958, text: 'Sputnik 1 falls back to Earth after 3 months in orbit'}] },
                '1-5': { year: 2005, title: 'Eris Discovered - Largest Dwarf Planet', desc: 'Astronomers announced the discovery of Eris, a dwarf planet larger than Pluto, which would later redefine planetary classification.', more: [{year: 1969, text: 'Venera 5 launched to Venus'}] },
                '1-6': { year: 1998, title: 'Lunar Prospector Launches', desc: 'NASA launched the Lunar Prospector mission to map the Moon\'s surface and search for ice at the lunar poles.', more: [{year: 1978, text: 'First GPS satellite launched'}] },
                '1-7': { year: 1610, title: 'Galileo Discovers Jupiter\'s Moons', desc: 'Galileo Galilei observed three of Jupiter\'s four largest moons through his telescope, revolutionizing our understanding of the solar system.', more: [{year: 1968, text: 'Surveyor 7 lands on the Moon'}] },
                '1-8': { year: 1587, title: 'Johannes Kepler Born', desc: 'The astronomer who would discover the laws of planetary motion was born in Germany, forever changing our understanding of celestial mechanics.', more: [{year: 1973, text: 'Luna 21 launches carrying Lunokhod 2 rover'}] },
                '1-9': { year: 2005, title: 'Deep Impact Launches', desc: 'NASA launched the Deep Impact spacecraft, which would later release a probe to collide with comet Tempel 1.', more: [{year: 1839, text: 'First daguerrotype photograph of the Moon'}] },
                '1-10': { year: 1946, title: 'First Radar Contact with the Moon', desc: 'The US Army Signal Corps bounced radar signals off the Moon and detected the return echo, proving radar astronomy was possible.', more: [{year: 1969, text: 'Venera 6 launched to Venus'}] },
                '1-11': { year: 1787, title: 'William Herschel Discovers Uranus Moons', desc: 'The astronomer discovered Titania and Oberon, the two largest moons of Uranus, six years after discovering the planet itself.', more: [{year: 1996, text: 'STS-72 launches to retrieve Japanese satellite'}] },
                '1-12': { year: 2005, title: 'Deep Impact Comet Mission Launches', desc: 'NASA\'s Deep Impact spacecraft launched on its mission to study the interior composition of comet Tempel 1.', more: [{year: 1986, text: 'Shuttle Columbia launches with first Hispanic astronaut'}] },
                '1-13': { year: 1610, title: 'Galileo Discovers Callisto', desc: 'Galileo observed the fourth Galilean moon of Jupiter, completing his discovery of Jupiter\'s major satellites.', more: [{year: 1978, text: 'NASA selects first women astronaut candidates'}] },
                '1-14': { year: 2005, title: 'Huygens Probe Lands on Titan', desc: 'The European Huygens probe successfully landed on Saturn\'s moon Titan, becoming the first spacecraft to land in the outer solar system.', more: [{year: 1975, text: 'Soyuz 17 launches to Salyut 4 space station'}, {year: 2008, text: 'MESSENGER makes first Mercury flyby'}] },
                '1-15': { year: 2006, title: 'Stardust Returns Comet Samples', desc: 'NASA\'s Stardust spacecraft returned to Earth with samples from comet Wild 2, the first comet samples ever returned to Earth.', more: [{year: 1973, text: 'Luna 21 lands on the Moon with Lunokhod 2'}] },
                '1-16': { year: 2003, title: 'Space Shuttle Columbia\'s Final Launch', desc: 'Columbia launched on its final mission STS-107, a 16-day science mission that would end in tragedy during re-entry.', more: [{year: 1969, text: 'Soyuz 4 and 5 perform first crew transfer in space'}] },
                '1-17': { year: 2002, title: 'First ISS Resident Crew Returns', desc: 'Expedition 1 crew returned to Earth after 136 days aboard the International Space Station, establishing permanent human presence in space.', more: [{year: 1985, text: '1,000th near-Earth asteroid discovered'}] },
                '1-18': { year: 2002, title: 'Gemini North Telescope Dedicated', desc: 'The 8.1-meter Gemini North telescope on Mauna Kea, Hawaii was formally dedicated, becoming one of the world\'s largest optical telescopes.', more: [{year: 1896, text: 'First X-ray machine demonstrated'}] },
                '1-19': { year: 2006, title: 'New Horizons Launches to Pluto', desc: 'NASA launched the New Horizons spacecraft on its journey to Pluto, beginning a 9.5-year voyage to the dwarf planet and beyond.', more: [{year: 1965, text: 'Gemini 2 launches on uncrewed test flight'}] },
                '1-20': { year: 1930, title: 'Buzz Aldrin Born', desc: 'Lunar Module pilot Buzz Aldrin was born, who would become the second human to walk on the Moon during Apollo 11.', more: [{year: 1966, text: 'First Saturn IB rocket launched'}] },
                '1-21': { year: 1976, title: 'First Concorde Supersonic Flights', desc: 'Concorde began commercial supersonic service, flying from London to Bahrain and Paris to Rio de Janeiro simultaneously.', more: [{year: 2021, text: 'NASA\'s Ingenuity helicopter completes tests on Mars'}] },
                '1-22': { year: 1968, title: 'Apollo 5 Tests Lunar Module', desc: 'The first uncrewed flight test of the Apollo Lunar Module successfully demonstrated its ascent and descent engines.', more: [{year: 1992, text: 'Roberta Bondar becomes first Canadian woman in space'}] },
                '1-23': { year: 2003, title: 'Pioneer 10\'s Last Signal', desc: 'NASA received the last, very weak signal from Pioneer 10, then 7.6 billion miles from Earth after 30 years of operation.', more: [{year: 1986, text: 'Voyager 2 discovers new moons of Uranus'}] },
                '1-24': { year: 1986, title: 'Voyager 2 Flies By Uranus', desc: 'NASA\'s Voyager 2 made its closest approach to Uranus, discovering 10 new moons and two new rings around the planet.', more: [{year: 1978, text: 'Soviet Cosmos 954 crashes in Canada'}] },
                '1-25': { year: 2004, title: 'Opportunity Rover Lands on Mars', desc: 'NASA\'s Opportunity rover successfully landed on Mars, beginning a mission that would last 15 years—60 times longer than planned.', more: [{year: 1983, text: 'IRAS infrared telescope launched'}] },
                '1-26': { year: 1962, title: 'Ranger 3 Launches to Moon', desc: 'NASA launched Ranger 3, an early attempt to hard-land a capsule on the Moon, though it missed by about 22,000 miles.', more: [{year: 2015, text: 'Asteroid 2004 BL86 makes close approach to Earth'}] },
                '1-27': { year: 1967, title: 'Apollo 1 Fire Tragedy', desc: 'Astronauts Grissom, White, and Chaffee lost their lives in a fire during a launch pad test, leading to major safety improvements.', more: [{year: 1948, text: 'First tape recorder sold'}] },
                '1-28': { year: 1986, title: 'Space Shuttle Challenger Disaster', desc: 'Space Shuttle Challenger broke apart 73 seconds after launch, killing all seven crew members and halting the shuttle program.', more: [{year: 1611, text: 'Johannes Hevelius, lunar cartographer, born'}] },
                '1-29': { year: 1989, title: 'Phobos 2 Reaches Mars', desc: 'The Soviet spacecraft entered Mars orbit to study the planet and its moon Phobos, sending back valuable data before contact was lost.', more: [{year: 1964, text: 'Saturn SA-5 launches successfully'}] },
                '1-30': { year: 1964, title: 'Ranger 6 Launches to Moon', desc: 'NASA launched Ranger 6 to photograph the Moon before impact, though its cameras failed to activate.', more: [{year: 2017, text: 'First recycled Falcon 9 booster lands successfully'}] },
                '1-31': { year: 1958, title: 'Explorer 1 - First US Satellite', desc: 'The United States successfully launched its first satellite, Explorer 1, which discovered the Van Allen radiation belts.', more: [{year: 1961, text: 'Ham the chimp launched into space'}, {year: 1971, text: 'Apollo 14 launches to the Moon'}] },
                '2-1': { year: 2003, title: 'Space Shuttle Columbia Disaster', desc: 'Columbia disintegrated during re-entry over Texas, killing all seven crew members. Damage from launch debris caused the tragedy.', more: [{year: 1956, text: 'Army Ballistic Missile Agency established'}] },
                '2-2': { year: 1970, title: 'First Space Burial Proposal', desc: 'The concept of launching cremated remains into space was first seriously proposed, leading to commercial space burial services decades later.', more: [{year: 1966, text: 'Luna 9 makes first soft landing on Moon'}] },
                '2-3': { year: 1966, title: 'Luna 9 First Soft Moon Landing', desc: 'The Soviet Luna 9 became the first spacecraft to achieve a soft landing on the Moon and transmit photographs back to Earth.', more: [{year: 1995, text: 'Eileen Collins becomes first female shuttle pilot'}] },
                '2-4': { year: 1906, title: 'Clyde Tombaugh Born', desc: 'The astronomer who would discover Pluto in 1930 was born in Illinois. Some of his ashes traveled on New Horizons to Pluto.', more: [{year: 2018, text: 'SpaceX Falcon Heavy first launch'}] },
                '2-5': { year: 1971, title: 'Apollo 14 Lands on Moon', desc: 'Alan Shepard and Edgar Mitchell landed on the Moon, with Shepard famously hitting golf balls on the lunar surface.', more: [{year: 1963, text: 'First solar cell demonstrated'}] },
                '2-6': { year: 2018, title: 'SpaceX Falcon Heavy Launches', desc: 'SpaceX successfully launched the Falcon Heavy, the most powerful operational rocket, with a Tesla Roadster as its payload.', more: [{year: 1971, text: 'Alan Shepard plays golf on the Moon'}] },
                '2-7': { year: 1984, title: 'First Untethered Spacewalk', desc: 'Bruce McCandless performed the first untethered spacewalk using the Manned Maneuvering Unit, floating freely in space.', more: [{year: 1999, text: 'Stardust spacecraft launched to comet Wild 2'}] },
                '2-14': { year: 1990, title: 'Pale Blue Dot Photo Taken', desc: 'Voyager 1 took the famous "Pale Blue Dot" photograph of Earth from 3.7 billion miles away, inspiring Carl Sagan\'s reflections.', more: [{year: 2000, text: 'NEAR Shoemaker enters orbit around asteroid Eros'}] },
                '2-15': { year: 1564, title: 'Galileo Galilei Born', desc: 'The father of modern observational astronomy was born in Pisa, Italy. His telescope observations revolutionized our understanding of the cosmos.', more: [{year: 2013, text: 'Chelyabinsk meteor explodes over Russia'}] },
                '2-18': { year: 1930, title: 'Pluto Discovered', desc: 'Clyde Tombaugh discovered Pluto at Lowell Observatory in Arizona, identifying it from photographic plates taken in January.', more: [{year: 1977, text: 'First Space Shuttle flight test begins'}] },
                '2-19': { year: 1473, title: 'Nicolaus Copernicus Born', desc: 'The astronomer who proposed the heliocentric model of the solar system was born in Poland, changing humanity\'s view of our place in the universe.', more: [{year: 1986, text: 'Mir space station core module launched'}] },
                '2-20': { year: 1962, title: 'John Glenn Orbits Earth', desc: 'John Glenn became the first American to orbit Earth aboard Friendship 7, completing three orbits in nearly five hours.', more: [{year: 1965, text: 'Ranger 8 impacts the Moon after successful photo mission'}] },
                '3-1': { year: 1966, title: 'Venera 3 Reaches Venus', desc: 'The Soviet Venera 3 became the first spacecraft to impact another planet\'s surface, though contact was lost before landing.', more: [{year: 1982, text: 'Venera 13 lands on Venus, sends color photos'}] },
                '3-14': { year: 1879, title: 'Albert Einstein Born', desc: 'The physicist whose theories of relativity revolutionized our understanding of space, time, and gravity was born in Germany.', more: [{year: 2019, text: 'Soyuz MS-12 launches to ISS'}] },
                '4-12': { year: 1961, title: 'First Human in Space', desc: 'Soviet cosmonaut Yuri Gagarin became the first human to journey into outer space, orbiting Earth once aboard Vostok 1.', more: [{year: 1981, text: 'First Space Shuttle Columbia launches'}, {year: 1981, text: 'Space Shuttle era begins'}] },
                '4-24': { year: 1990, title: 'Hubble Space Telescope Launches', desc: 'The Space Shuttle Discovery deployed the Hubble Space Telescope, which would revolutionize astronomy despite initial mirror problems.', more: [{year: 1967, text: 'Soyuz 1 tragedy - Vladimir Komarov dies'}] },
                '5-5': { year: 1961, title: 'First American in Space', desc: 'Alan Shepard became the first American in space aboard Freedom 7, completing a 15-minute suborbital flight.', more: [{year: 2018, text: 'NASA\'s InSight lander launches to Mars'}] },
                '5-25': { year: 1961, title: 'JFK\'s Moon Speech', desc: 'President Kennedy announced the goal of landing a man on the Moon before the decade\'s end, launching the Apollo program.', more: [{year: 1973, text: 'Skylab 2 launches, first crewed Skylab mission'}] },
                '6-16': { year: 1963, title: 'First Woman in Space', desc: 'Soviet cosmonaut Valentina Tereshkova became the first woman in space aboard Vostok 6, orbiting Earth 48 times.', more: [{year: 2012, text: 'China launches Shenzhou 9 with first Chinese woman'}] },
                '7-4': { year: 1997, title: 'Mars Pathfinder Lands', desc: 'NASA\'s Mars Pathfinder and its Sojourner rover successfully landed on Mars, demonstrating a new airbag landing system.', more: [{year: 2005, text: 'Deep Impact strikes comet Tempel 1'}] },
                '7-14': { year: 2015, title: 'New Horizons Reaches Pluto', desc: 'After a 9.5-year journey, New Horizons made its closest approach to Pluto, revealing stunning details of the dwarf planet.', more: [{year: 1965, text: 'Mariner 4 sends first close-up photos of Mars'}] },
                '7-16': { year: 1969, title: 'Apollo 11 Launches', desc: 'Apollo 11 lifted off from Kennedy Space Center, carrying Neil Armstrong, Buzz Aldrin, and Michael Collins toward the Moon.', more: [{year: 1994, text: 'Comet Shoemaker-Levy 9 impacts Jupiter'}] },
                '7-20': { year: 1969, title: 'First Moon Landing', desc: 'Neil Armstrong and Buzz Aldrin became the first humans to walk on the Moon while Michael Collins orbited above in Columbia.', more: [{year: 1976, text: 'Viking 1 lands on Mars'}] },
                '7-21': { year: 1969, title: 'First Moon Walk', desc: 'Neil Armstrong spoke the famous words "That\'s one small step for man, one giant leap for mankind" as he stepped onto the lunar surface.', more: [{year: 2011, text: 'Space Shuttle Atlantis lands, ending shuttle program'}] },
                '8-6': { year: 2012, title: 'Curiosity Rover Lands on Mars', desc: 'NASA\'s Curiosity rover successfully landed on Mars using the innovative "sky crane" system in Gale Crater.', more: [{year: 1961, text: 'Vostok 2 launches with Gherman Titov'}] },
                '8-25': { year: 2012, title: 'Voyager 1 Enters Interstellar Space', desc: 'NASA confirmed that Voyager 1 had crossed into interstellar space, becoming the first human-made object to leave the heliosphere.', more: [{year: 1981, text: 'Voyager 2 makes closest approach to Saturn'}] },
                '9-12': { year: 1959, title: 'Luna 2 Impacts Moon', desc: 'The Soviet Luna 2 became the first human-made object to reach the Moon, impacting near the Sea of Serenity.', more: [{year: 1992, text: 'Mae Jemison becomes first Black woman in space'}] },
                '10-1': { year: 1958, title: 'NASA Founded', desc: 'The National Aeronautics and Space Administration officially began operations, replacing NACA as America\'s space agency.', more: [{year: 2018, text: 'NASA\'s Voyager 2 instruments turned off to save power'}] },
                '10-4': { year: 1957, title: 'Sputnik 1 - First Satellite', desc: 'The Soviet Union launched Sputnik 1, the first artificial Earth satellite, marking the beginning of the Space Age.', more: [{year: 2004, text: 'SpaceShipOne wins Ansari X Prize'}] },
                '10-11': { year: 1968, title: 'Apollo 7 - First Crewed Apollo', desc: 'The first crewed Apollo mission launched successfully, testing the Command Module and broadcasting the first live TV from space.', more: [{year: 1958, text: 'Pioneer 1 launched toward Moon'}] },
                '11-3': { year: 1957, title: 'Laika - First Animal in Orbit', desc: 'Soviet dog Laika became the first animal to orbit Earth aboard Sputnik 2, paving the way for human spaceflight.', more: [{year: 1973, text: 'Mariner 10 launches to Mercury'}] },
                '11-9': { year: 1967, title: 'Apollo 4 - First Saturn V Launch', desc: 'NASA\'s massive Saturn V rocket flew for the first time, proving the vehicle that would take humans to the Moon.', more: [{year: 2005, text: 'Venus Express launches'}] },
                '11-12': { year: 2014, title: 'Philae Lands on Comet', desc: 'The Philae lander from ESA\'s Rosetta mission became the first spacecraft to soft-land on a comet, 67P/Churyumov-Gerasimenko.', more: [{year: 1980, text: 'Voyager 1 makes closest approach to Saturn'}] },
                '12-14': { year: 1972, title: 'Last Humans Leave Moon', desc: 'Apollo 17 astronauts Gene Cernan and Harrison Schmitt left the lunar surface, marking the last human Moon visit to date.', more: [{year: 1962, text: 'Mariner 2 flies by Venus - first planetary flyby'}] },
                '12-21': { year: 1968, title: 'Apollo 8 Launches to Moon', desc: 'Apollo 8 launched on the first crewed mission to leave Earth orbit and travel to the Moon, orbiting it on Christmas Eve.', more: [{year: 1988, text: 'Cosmonauts set space endurance record'}] },
                '12-24': { year: 1968, title: 'Earthrise Photo Taken', desc: 'Apollo 8 astronaut William Anders captured the iconic "Earthrise" photograph, showing our planet rising above the Moon\'s horizon.', more: [{year: 1979, text: 'Ariane 1 rocket first launch'}] },
                '12-25': { year: 2021, title: 'James Webb Telescope Launches', desc: 'NASA\'s James Webb Space Telescope launched on Christmas Day, beginning its journey to revolutionize astronomy.', more: [{year: 1758, text: 'Halley\'s Comet returns as predicted'}] }
            };
            
            const key = `${month}-${day}`;
            const event = spaceHistory[key];
            
            if (event) {
                document.getElementById('history-year').textContent = event.year;
                document.getElementById('history-title').textContent = event.title;
                document.getElementById('history-desc').textContent = event.desc;
                
                if (event.more && event.more.length > 0) {
                    const moreHtml = event.more.map(e => `
                        <div class="history-mini-event">
                            <span class="history-mini-year">${e.year}</span>
                            <span class="history-mini-text">${e.text}</span>
                        </div>
                    `).join('');
                    document.getElementById('history-more').innerHTML = moreHtml;
                }
            } else {
                // Find nearest event or show default
                const fallback = spaceHistory['7-20']; // Apollo 11
                document.getElementById('history-year').textContent = fallback.year;
                document.getElementById('history-title').textContent = fallback.title;
                document.getElementById('history-desc').textContent = fallback.desc;
            }
        }
        
        // Initialize all new features
        document.addEventListener('DOMContentLoaded', function() {
            initSpaceHistory();
        });
        
        // Simple toast notification
        function showToast(message, type = 'info') {
            // Check if Toast system exists from features.js
            if (window.Toast && typeof window.Toast.show === 'function') {
                window.Toast.show(message, type);
                return;
            }
            
            // Fallback simple toast
            const existing = document.querySelector('.simple-toast');
            if (existing) existing.remove();
            
            const toast = document.createElement('div');
            toast.className = 'simple-toast';
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#34d399' : type === 'error' ? '#fca5a5' : '#a5b4fc'};
                color: #0a0a1a;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                z-index: 10000;
                animation: fadeInUp 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // Tool Tab Switching
        function switchTool(toolId) {
            // Update tabs
            document.querySelectorAll('.tool-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tool === toolId);
            });
            
            // Update panels
            document.querySelectorAll('.tool-content-panel').forEach(panel => {
                panel.classList.toggle('active', panel.id === 'tool-' + toolId);
            });
        }
        
        // ==========================================
        // GALLERY CAROUSEL
        // ==========================================
        const GalleryCarousel = {
            currentIndex: 0,
            totalSlides: 12,
            track: null,
            touchStartX: 0,
            touchEndX: 0,
            
            init() {
                this.track = document.getElementById('gallery-track');
                if (!this.track) return;
                
                this.totalSlides = this.track.querySelectorAll('.gallery-slide').length;
                this.createDots();
                this.updateCounter();
                this.setupTouchEvents();
                this.setupKeyboardNav();
                
                // Auto-advance every 6 seconds
                setInterval(() => this.next(), 6000);
            },
            
            createDots() {
                const dotsContainer = document.getElementById('gallery-dots');
                if (!dotsContainer) return;
                
                dotsContainer.innerHTML = '';
                for (let i = 0; i < this.totalSlides; i++) {
                    const dot = document.createElement('button');
                    dot.className = 'gallery-dot' + (i === 0 ? ' active' : '');
                    dot.setAttribute('aria-label', `Go to image ${i + 1}`);
                    dot.onclick = () => this.goTo(i);
                    dotsContainer.appendChild(dot);
                }
            },
            
            updateDots() {
                const dots = document.querySelectorAll('.gallery-dot');
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === this.currentIndex);
                });
            },
            
            updateCounter() {
                const current = document.getElementById('gallery-current');
                const total = document.getElementById('gallery-total');
                if (current) current.textContent = this.currentIndex + 1;
                if (total) total.textContent = this.totalSlides;
            },
            
            goTo(index) {
                this.currentIndex = Math.max(0, Math.min(index, this.totalSlides - 1));
                if (this.track) {
                    this.track.style.transform = `translateX(-${this.currentIndex * 100}%)`;
                }
                this.updateDots();
                this.updateCounter();
            },
            
            next() {
                const nextIndex = (this.currentIndex + 1) % this.totalSlides;
                this.goTo(nextIndex);
            },
            
            prev() {
                const prevIndex = (this.currentIndex - 1 + this.totalSlides) % this.totalSlides;
                this.goTo(prevIndex);
            },
            
            setupTouchEvents() {
                if (!this.track) return;
                
                this.track.addEventListener('touchstart', (e) => {
                    this.touchStartX = e.changedTouches[0].screenX;
                }, { passive: true });
                
                this.track.addEventListener('touchend', (e) => {
                    this.touchEndX = e.changedTouches[0].screenX;
                    this.handleSwipe();
                }, { passive: true });
            },
            
            handleSwipe() {
                const diff = this.touchStartX - this.touchEndX;
                const threshold = 50;
                
                if (Math.abs(diff) > threshold) {
                    if (diff > 0) {
                        this.next();
                    } else {
                        this.prev();
                    }
                }
            },
            
            setupKeyboardNav() {
                document.addEventListener('keydown', (e) => {
                    // Only respond if gallery is in view
                    const gallery = document.getElementById('gallery');
                    if (!gallery) return;
                    
                    const rect = gallery.getBoundingClientRect();
                    const inView = rect.top < window.innerHeight && rect.bottom > 0;
                    
                    if (inView) {
                        if (e.key === 'ArrowLeft') this.prev();
                        if (e.key === 'ArrowRight') this.next();
                    }
                });
            }
        };
        
        // Global functions for onclick handlers
        function galleryNext() { GalleryCarousel.next(); }
        function galleryPrev() { GalleryCarousel.prev(); }
        function openGalleryModal(index) {
            // Could implement fullscreen modal here
            GalleryCarousel.goTo(index);
        }
        
        // Initialize gallery on load
        document.addEventListener('DOMContentLoaded', function() {
            GalleryCarousel.init();
        });
        
        // Scroll animation observer
        function initScrollAnimations() {
            const fadeElements = document.querySelectorAll('.fade-in');
            
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
                
                fadeElements.forEach(el => observer.observe(el));
            } else {
                // Fallback: just show everything
                fadeElements.forEach(el => el.classList.add('visible'));
            }
        }
        
        function initToolsSection() {
            // Update planets display if AstroEngine available
            const planetsContainer = document.getElementById('planets-display');
            if (planetsContainer && window.AstroEngine) {
                try {
                    const planets = AstroEngine.getAllPlanets(new Date());
                    planetsContainer.innerHTML = planets.map(p => `
                        <div class="planet-card-mini ${p.visible ? 'visible' : ''}">
                            <div class="planet-symbol" style="color: ${p.color}">${p.symbol}</div>
                            <div class="planet-name">${p.name}</div>
                            <div class="planet-status">${p.visible ? `${p.altitude.toFixed(0)}° altitude` : 'Below horizon'}</div>
                        </div>
                    `).join('');
                } catch(e) {
                    console.warn('Planet display error:', e);
                }
            }
            
            // Update meteor activity
            try { updateMeteorActivity(); } catch(e) { console.warn('Meteor update error:', e); }
        }
        
        function updateMeteorActivity() {
            const meteorEl = document.getElementById('meteor-display');
            if (!meteorEl) return;
            
            const now = new Date();
            const month = now.getMonth();
            const day = now.getDate();
            
            const showers = [
                { name: 'Quadrantids', peak: [0, 3], rate: 120 },
                { name: 'Lyrids', peak: [3, 22], rate: 18 },
                { name: 'Eta Aquariids', peak: [4, 6], rate: 50 },
                { name: 'Perseids', peak: [7, 12], rate: 100 },
                { name: 'Orionids', peak: [9, 21], rate: 20 },
                { name: 'Leonids', peak: [10, 17], rate: 15 },
                { name: 'Geminids', peak: [11, 14], rate: 150 }
            ];
            
            let activeShower = null;
            for (const shower of showers) {
                const [peakMonth, peakDay] = shower.peak;
                const dayDiff = Math.abs((month * 30 + day) - (peakMonth * 30 + peakDay));
                if (dayDiff <= 7) {
                    activeShower = shower;
                    break;
                }
            }
            
            if (activeShower) {
                meteorEl.innerHTML = `
                    <span class="tool-value" style="color: #34d399;">Active!</span>
                    <span class="tool-detail">${activeShower.name} (~${activeShower.rate}/hr)</span>
                `;
            }
        }
    </script>
</body>
</html>
