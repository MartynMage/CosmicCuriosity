<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>CosmicCuriosity â€” Tonight's Sky, Astronomy Events & Space News</title>
    <meta name="title" content="CosmicCuriosity â€” Tonight's Sky, Astronomy Events & Space News">
    <meta name="description" content="Discover what's visible in the night sky tonight, upcoming meteor showers, eclipses, rocket launches, stunning NASA space images, and the latest astronomy news. Free personalized stargazing guide.">
    <meta name="keywords" content="astronomy, night sky tonight, stargazing, meteor shower 2026, solar eclipse 2026, lunar eclipse, planets visible tonight, NASA images, space news, Perseids, Geminids, Jupiter, Mars, moon phase, celestial events, Artemis, space exploration">
    <meta name="author" content="CosmicCuriosity">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="1 days">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://cosmiccuriosity.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cosmiccuriosity.com/">
    <meta property="og:title" content="CosmicCuriosity â€” Tonight's Sky, Astronomy Events & Space News">
    <meta property="og:description" content="Discover what's visible in the night sky tonight. Free personalized stargazing guide with meteor showers, eclipses, planet visibility, NASA images, and space news.">
    <meta property="og:image" content="https://cosmiccuriosity.com/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="CosmicCuriosity">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://cosmiccuriosity.com/">
    <meta name="twitter:title" content="CosmicCuriosity â€” Tonight's Sky, Astronomy Events & Space News">
    <meta name="twitter:description" content="Discover what's visible in the night sky tonight. Free personalized stargazing guide with meteor showers, eclipses, planet visibility, and space news.">
    <meta name="twitter:image" content="https://cosmiccuriosity.com/og-image.jpg">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236366f1'/%3E%3Cstop offset='100%25' stop-color='%2306b6d4'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' fill='url(%23g)'/%3E%3Cpath d='M50 20 L53 35 L68 35 L56 44 L60 59 L50 50 L40 59 L44 44 L32 35 L47 35 Z' fill='white'/%3E%3Ccircle cx='72' cy='28' r='4' fill='white' opacity='0.8'/%3E%3Ccircle cx='30' cy='65' r='3' fill='white' opacity='0.6'/%3E%3Ccircle cx='75' cy='60' r='2' fill='white' opacity='0.5'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236366f1'/%3E%3Cstop offset='100%25' stop-color='%2306b6d4'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' fill='url(%23g)'/%3E%3Cpath d='M50 20 L53 35 L68 35 L56 44 L60 59 L50 50 L40 59 L44 44 L32 35 L47 35 Z' fill='white'/%3E%3Ccircle cx='72' cy='28' r='4' fill='white' opacity='0.8'/%3E%3Ccircle cx='30' cy='65' r='3' fill='white' opacity='0.6'/%3E%3Ccircle cx='75' cy='60' r='2' fill='white' opacity='0.5'/%3E%3C/svg%3E">
    
    <!-- PWA Manifest & Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CosmicCuriosity">
    
    <meta name="theme-color" content="#050510">
    <meta name="msapplication-TileColor" content="#050510">
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "CosmicCuriosity",
        "alternateName": ["CosmicCuriosity", "Cosmic Curiosity"],
        "url": "https://cosmiccuriosity.com/",
        "description": "Your window to the universe. Discover tonight's sky, upcoming celestial events, stunning space imagery, and the latest astronomy news.",
        "publisher": {
            "@type": "Organization",
            "name": "CosmicCuriosity",
            "logo": {
                "@type": "ImageObject",
                "url": "https://cosmiccuriosity.com/logo.svg"
            }
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://cosmiccuriosity.com/?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What planets are visible tonight?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Planet visibility changes throughout the year. In January 2026, Jupiter dominates the evening sky after its recent opposition, Venus appears low in the west at twilight, and Mars rises late in the evening. Use our free sky guide tool to see what's visible from your location."
                }
            },
            {
                "@type": "Question",
                "name": "When is the next meteor shower in 2026?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The major meteor showers in 2026 include the Lyrids (April 22), Perseids (August 12-13 with perfect dark sky conditions), and Geminids (December 14). The Perseids 2026 will be especially spectacular due to a new moon."
                }
            },
            {
                "@type": "Question",
                "name": "When is the next solar eclipse?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The next total solar eclipse is on August 12, 2026, visible from Greenland, Iceland, Spain, and Portugal. Before that, an annular eclipse occurs on February 17, 2026, visible from Antarctica."
                }
            },
            {
                "@type": "Question",
                "name": "What is the moon phase tonight?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Moon phases change daily through a ~29.5 day cycle. Visit CosmicCuriosity to see the current moon phase, illumination percentage, and how it affects stargazing conditions in your area."
                }
            }
        ]
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "2026 Celestial Events Calendar",
        "description": "Major astronomy events and celestial phenomena in 2026",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "item": {
                    "@type": "Event",
                    "name": "Artemis II Moon Mission Launch",
                    "startDate": "2026-02-06",
                    "location": { "@type": "Place", "name": "Kennedy Space Center, Florida" },
                    "description": "NASA's first crewed lunar mission in over 50 years"
                }
            },
            {
                "@type": "ListItem",
                "position": 2,
                "item": {
                    "@type": "Event",
                    "name": "Total Lunar Eclipse (Blood Moon)",
                    "startDate": "2026-03-03",
                    "description": "Visible from Asia, Australia, and western North America"
                }
            },
            {
                "@type": "ListItem",
                "position": 3,
                "item": {
                    "@type": "Event",
                    "name": "Perseid Meteor Shower Peak",
                    "startDate": "2026-08-12",
                    "description": "Up to 120 meteors per hour under perfect new moon conditions"
                }
            },
            {
                "@type": "ListItem",
                "position": 4,
                "item": {
                    "@type": "Event",
                    "name": "Total Solar Eclipse",
                    "startDate": "2026-08-12",
                    "description": "Visible from Greenland, Iceland, Spain, and Portugal"
                }
            }
        ]
    }
    </script>
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://images-assets.nasa.gov">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050510;
            --bg-card: #0a0a1a;
            --bg-hover: #0f0f25;
            --accent-glow: #6366f1;
            --accent-warm: #f59e0b;
            --accent-cool: #06b6d4;
            --accent-rose: #ec4899;
            --text-primary: #e8e8f0;
            --text-secondary: #9898b0;
            --text-dim: #5a5a78;
            --border: rgba(255,255,255,0.06);
            --gradient-cosmic: linear-gradient(135deg, #1a1a3e 0%, #0f0f2d 50%, #0a0a1a 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent-glow);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            z-index: 1000;
            font-weight: 600;
            text-decoration: none;
            transition: top 0.3s ease;
        }

        .skip-link:focus {
            top: 10px;
        }

        /* Cosmic background */
        .cosmos-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .nebula {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
        }

        .nebula-1 {
            width: 600px;
            height: 600px;
            background: var(--accent-glow);
            top: -200px;
            right: -200px;
        }

        .nebula-2 {
            width: 500px;
            height: 500px;
            background: var(--accent-rose);
            bottom: 20%;
            left: -150px;
        }

        .nebula-3 {
            width: 400px;
            height: 400px;
            background: var(--accent-cool);
            top: 50%;
            right: 10%;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1rem 2rem;
            background: rgba(5, 5, 16, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            color: var(--text-primary);
            text-decoration: none;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            flex-shrink: 0;
        }

        .logo-icon svg {
            width: 100%;
            height: 100%;
        }

        nav {
            display: flex;
            gap: 0.5rem;
        }

        nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 24px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        nav a:hover, nav a.active {
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        /* Main content */
        main {
            position: relative;
            z-index: 1;
            padding-top: 80px;
        }

        section {
            padding: 3rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Reduce spacing between sections */
        section + section {
            padding-top: 1rem;
        }
        
        /* First section after hero needs normal spacing */
        .hero + section {
            padding-top: 3rem;
        }

        /* Hero section */
        .hero {
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-top: 0;
            padding-bottom: 2rem;
            text-align: center;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 100px;
            font-size: 0.85rem;
            color: var(--accent-glow);
            margin-bottom: 2rem;
        }

        .hero-badge .pulse {
            width: 8px;
            height: 8px;
            background: var(--accent-glow);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.5); }
        }

        .hero h1 {
            font-family: 'Instrument Serif', serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 400;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero h1 em {
            font-style: italic;
            background: linear-gradient(135deg, var(--accent-glow) 0%, var(--accent-cool) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-family: 'Space Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Section headers */
        .section-header {
            margin-bottom: 2rem;
        }

        .section-label {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-family: 'Instrument Serif', serif;
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 400;
            color: var(--text-primary);
        }

        /* Tonight card */
        .tonight-card {
            background: var(--gradient-cosmic);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .tonight-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.2) 0%, transparent 70%);
            pointer-events: none;
        }

        .tonight-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .tonight-date {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .moon-phase {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255,255,255,0.03);
            padding: 0.75rem 1.25rem;
            border-radius: 100px;
            border: 1px solid var(--border);
        }

        .moon-icon {
            font-size: 2rem;
        }

        .moon-info {
            text-align: left;
        }

        .moon-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .moon-illumination {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .tonight-content h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.75rem;
            margin-bottom: 1rem;
        }

        .tonight-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .highlight {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }

        .highlight:hover {
            background: rgba(255,255,255,0.04);
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }

        .highlight-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .highlight-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .highlight-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ==========================================
           ASTRONOMY TOOLS SECTION
           ========================================== */
        .tools-wrapper {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .tool-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .tool-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: rgba(99, 102, 241, 0.05);
            border-bottom: 1px solid var(--border);
        }

        .tool-panel-header h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.2rem;
            font-weight: 400;
        }

        .tool-badge {
            font-size: 0.7rem;
            padding: 0.25rem 0.75rem;
            background: rgba(99, 102, 241, 0.15);
            color: var(--accent-glow);
            border-radius: 100px;
            font-family: 'Space Mono', monospace;
        }

        .tool-badge.live {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            animation: pulse-badge 2s infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .tool-panel-content {
            padding: 1.5rem;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .tool-card-interactive {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
            transition: all 0.3s ease;
        }

        .tool-card-interactive:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }

        .tool-card-icon {
            font-size: 2rem;
            line-height: 1;
        }

        .tool-card-content {
            flex: 1;
            min-width: 0;
        }

        .tool-card-content h4 {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .tool-output {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .tool-value {
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .tool-detail {
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .tool-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }

        .tool-row span:first-child {
            color: var(--text-secondary);
        }

        /* ISS Display */
        .iss-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .iss-stat {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
        }

        .iss-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-bottom: 0.25rem;
        }

        .iss-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.1rem;
            color: var(--accent-glow);
        }

        .iss-info {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .iss-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Planet Display in Tools */
        #planets-display {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 1rem;
        }

        .planet-card-mini {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .planet-card-mini:hover {
            border-color: rgba(99, 102, 241, 0.3);
        }

        .planet-card-mini.visible {
            border-color: rgba(16, 185, 129, 0.3);
            background: rgba(16, 185, 129, 0.05);
        }

        .planet-card-mini .planet-symbol {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .planet-card-mini .planet-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .planet-card-mini .planet-status {
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        .planet-card-mini.visible .planet-status {
            color: #10b981;
        }

        @media (max-width: 768px) {
            .tools-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .iss-display {
                grid-template-columns: repeat(2, 1fr);
            }

            #planets-display {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .tools-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Events calendar */
        .events-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .filter-btn {
            padding: 0.5rem 1.25rem;
            border-radius: 100px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--accent-glow);
            border-color: var(--accent-glow);
            color: white;
        }

        .events-timeline {
            position: relative;
        }

        .events-timeline::before {
            content: '';
            position: absolute;
            left: 120px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--accent-glow) 0%, var(--accent-cool) 50%, var(--accent-rose) 100%);
            opacity: 0.3;
        }

        .event-item {
            display: flex;
            gap: 2rem;
            padding: 1.5rem 0;
            position: relative;
        }

        .event-date {
            width: 100px;
            flex-shrink: 0;
            text-align: right;
        }

        .event-month {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .event-day {
            font-family: 'Instrument Serif', serif;
            font-size: 2rem;
            line-height: 1;
        }

        .event-dot {
            width: 16px;
            height: 16px;
            background: var(--bg-deep);
            border: 3px solid var(--accent-glow);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 0.5rem;
        }

        .event-dot.meteor { border-color: var(--accent-warm); }
        .event-dot.eclipse { border-color: var(--accent-rose); }
        .event-dot.planet { border-color: var(--accent-cool); }
        .event-dot.launch { border-color: #10b981; }

        .event-content {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .event-content:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateX(4px);
        }

        .event-type {
            display: inline-block;
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .event-type.meteor { background: rgba(245, 158, 11, 0.15); color: var(--accent-warm); }
        .event-type.eclipse { background: rgba(236, 72, 153, 0.15); color: var(--accent-rose); }
        .event-type.planet { background: rgba(6, 182, 212, 0.15); color: var(--accent-cool); }
        .event-type.launch { background: rgba(16, 185, 129, 0.15); color: #10b981; }

        .event-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .event-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .event-countdown {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            padding: 0.3rem 0.7rem;
            border-radius: 100px;
            margin-left: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
        }

        .event-countdown.soon {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
        }

        .event-countdown.very-soon {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-warm);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .event-header {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        /* Gallery */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .gallery-item {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            aspect-ratio: 4/3;
            cursor: pointer;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            border-color: rgba(99, 102, 241, 0.5);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 30%, rgba(0,0,0,0.9) 100%);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-title {
            font-family: 'Instrument Serif', serif;
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .gallery-credit {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .gallery-featured {
            grid-column: span 2;
            aspect-ratio: 16/9;
        }

        /* APOD Hero */
        .apod-hero {
            position: relative;
            border-radius: 24px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            min-height: 450px;
            display: flex;
            align-items: flex-end;
        }

        .apod-hero img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .apod-content {
            position: relative;
            z-index: 1;
            padding: 2rem;
            background: linear-gradient(180deg, transparent 0%, rgba(5,5,16,0.95) 100%);
            width: 100%;
        }

        .apod-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 100px;
            font-size: 0.8rem;
            color: var(--accent-warm);
            margin-bottom: 1rem;
        }

        .apod-title {
            font-family: 'Instrument Serif', serif;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .apod-desc {
            color: var(--text-secondary);
            max-width: 700px;
            font-size: 1rem;
            line-height: 1.7;
        }

        /* News */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .news-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .news-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-4px);
        }

        .news-image {
            aspect-ratio: 16/9;
            overflow: hidden;
        }

        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            background: var(--bg-hover);
        }

        .news-image img[data-failed="true"] {
            opacity: 0;
        }

        .news-image {
            position: relative;
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-hover) 100%);
        }

        .news-image::before {
            content: 'ðŸš€';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            opacity: 0.3;
            z-index: 0;
        }

        .news-image img {
            position: relative;
            z-index: 1;
        }

        .news-card:hover .news-image img {
            transform: scale(1.05);
        }

        .news-body {
            padding: 1.5rem;
        }

        .news-source {
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
        }

        .news-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .news-excerpt {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .news-date {
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        /* Enhanced Space Facts Carousel */
        .facts-section {
            position: relative;
            padding: 2rem 0;
            overflow: hidden;
        }
        
        .facts-container {
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 3rem;
        }
        
        .facts-carousel {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
            border: 1px solid var(--border);
            padding: 1.5rem 0;
        }
        
        .facts-track {
            display: flex;
            gap: 1.25rem;
            padding: 0 1.5rem;
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
            cursor: grab;
            user-select: none;
        }
        
        .facts-track:active {
            cursor: grabbing;
        }
        
        .facts-track.dragging {
            transition: none;
        }

        .fact-card {
            flex-shrink: 0;
            width: 280px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .fact-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .fact-card:hover {
            transform: translateY(-4px);
            border-color: rgba(99, 102, 241, 0.3);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.15);
        }
        
        .fact-card:hover::before {
            opacity: 1;
        }

        .fact-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }
        
        .fact-card:nth-child(2n) .fact-icon { animation-delay: -0.5s; }
        .fact-card:nth-child(3n) .fact-icon { animation-delay: -1s; }
        .fact-card:nth-child(4n) .fact-icon { animation-delay: -1.5s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .fact-category {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent);
            background: rgba(99, 102, 241, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-bottom: 0.75rem;
        }

        .fact-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.65;
        }

        .fact-text strong {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        /* Carousel Controls */
        .facts-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .facts-nav-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .facts-nav-btn:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            transform: scale(1.1);
        }
        
        .facts-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
        }
        
        .facts-nav-btn svg {
            width: 20px;
            height: 20px;
        }
        
        .facts-dots {
            display: flex;
            gap: 0.5rem;
        }
        
        .facts-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .facts-dot.active {
            background: var(--accent);
            width: 24px;
            border-radius: 4px;
        }
        
        .facts-dot:hover:not(.active) {
            background: var(--text-dim);
        }
        
        .facts-counter {
            font-family: 'Space Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-dim);
            min-width: 60px;
            text-align: center;
        }
        
        /* Auto-scroll toggle */
        .facts-auto-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-dim);
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            background: var(--bg-hover);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        
        .facts-auto-toggle:hover {
            border-color: var(--accent);
        }
        
        .facts-auto-toggle.active {
            color: var(--accent);
            border-color: var(--accent);
        }
        
        .facts-auto-toggle .toggle-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid currentColor;
            position: relative;
        }
        
        .facts-auto-toggle.active .toggle-icon::after {
            content: '';
            position: absolute;
            inset: 2px;
            background: currentColor;
            border-radius: 50%;
        }
        
        /* Gradient fade edges */
        .facts-carousel::before,
        .facts-carousel::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 60px;
            z-index: 2;
            pointer-events: none;
        }
        
        .facts-carousel::before {
            left: 0;
            background: linear-gradient(90deg, var(--bg-primary) 0%, transparent 100%);
        }
        
        .facts-carousel::after {
            right: 0;
            background: linear-gradient(-90deg, var(--bg-primary) 0%, transparent 100%);
        }
        
        /* Mobile adjustments */
        @media (max-width: 768px) {
            .facts-container {
                padding: 0 1rem;
            }
            
            .fact-card {
                width: 260px;
            }
            
            .facts-dots {
                display: none;
            }
            
            .facts-carousel::before,
            .facts-carousel::after {
                width: 30px;
            }
        }

        /* Footer */
        footer {
            border-top: 1px solid var(--border);
            padding: 2.5rem 2rem 1.5rem;
            margin-top: 2rem;
            background: linear-gradient(180deg, transparent 0%, rgba(10, 10, 26, 0.5) 100%);
        }

        .footer-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .footer-brand {
            max-width: 300px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .footer-tagline {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .footer-links-group {
            display: flex;
            gap: 4rem;
            flex-wrap: wrap;
        }

        .footer-section h4 {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .footer-section {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--text-primary);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 2rem auto 0;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            text-align: center;
        }

        .footer-bottom p {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .footer-credits {
            font-size: 0.75rem !important;
            opacity: 0.7;
        }

        /* Loading states */
        .skeleton {
            background: linear-gradient(90deg, var(--bg-card) 25%, var(--bg-hover) 50%, var(--bg-card) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Location Input */
        .location-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .location-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .location-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--accent-glow), var(--accent-cool));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .location-header h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .location-header p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .location-form {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: flex-start;
        }

        .zip-input-wrapper {
            position: relative;
            flex: 1;
            min-width: 200px;
            max-width: 300px;
        }

        .zip-input {
            width: 100%;
            padding: 1rem 1.25rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'Space Mono', monospace;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
        }

        .zip-input:focus {
            outline: none;
            border-color: var(--accent-glow);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .zip-input::placeholder {
            color: var(--text-dim);
            letter-spacing: 0.05em;
        }

        .location-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-glow), #4f46e5);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'DM Sans', sans-serif;
        }

        .location-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
        }

        .location-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .location-btn .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .privacy-note {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-top: 1rem;
        }

        .privacy-note svg {
            width: 14px;
            height: 14px;
            flex-shrink: 0;
        }

        /* Sky Results */
        .sky-results {
            display: none;
            margin-top: 2rem;
            animation: fadeSlideIn 0.5s ease;
        }

        .sky-results.visible {
            display: block;
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .sky-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .sky-location-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 100px;
            font-size: 0.85rem;
            color: #10b981;
        }

        .clear-location {
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .clear-location:hover {
            border-color: var(--accent-rose);
            color: var(--accent-rose);
        }

        .sky-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .sky-object {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .sky-object:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }

        .sky-object-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .sky-object-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .sky-object-icon.planet {
            background: rgba(6, 182, 212, 0.15);
        }

        .sky-object-icon.moon {
            background: rgba(245, 158, 11, 0.15);
        }

        .sky-object-icon.constellation {
            background: rgba(236, 72, 153, 0.15);
        }

        .sky-object-icon.meteor {
            background: rgba(99, 102, 241, 0.15);
        }

        .sky-object-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .sky-object-type {
            font-size: 0.8rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .sky-object-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .sky-detail {
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            padding: 0.75rem;
        }

        .sky-detail-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .sky-detail-value {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .visibility-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .visibility-badge.excellent {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
        }

        .visibility-badge.good {
            background: rgba(6, 182, 212, 0.15);
            color: var(--accent-cool);
        }

        .visibility-badge.fair {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-warm);
        }

        .visibility-badge.poor {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .conditions-summary {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .conditions-title {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-glow);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .conditions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .condition-item {
            text-align: center;
        }

        .condition-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .condition-label {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .viewing-tip {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(236, 72, 153, 0.05) 100%);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .viewing-tip-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .viewing-tip-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .viewing-tip-text strong {
            color: var(--accent-warm);
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }

            nav {
                display: none;
            }

            .hero {
                min-height: 80vh;
            }

            .hero-stats {
                gap: 2rem;
            }

            section {
                padding: 3rem 1rem;
            }

            .tonight-card {
                padding: 1.5rem;
            }

            .events-timeline::before {
                left: 8px;
            }

            .event-date {
                display: none;
            }

            .gallery-featured {
                grid-column: span 1;
            }

            .gallery-grid {
                grid-template-columns: 1fr;
            }

            .apod-hero {
                min-height: 400px;
            }

            .apod-content {
                padding: 1.5rem;
            }
        }

        /* Scroll animations */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(5, 5, 16, 0.95);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            max-width: 900px;
            max-height: 90vh;
            overflow: auto;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--accent-glow);
            border-color: var(--accent-glow);
        }

        .modal-image {
            width: 100%;
            aspect-ratio: 16/10;
            object-fit: contain;
            background: #000;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-title {
            font-family: 'Instrument Serif', serif;
            font-size: 1.75rem;
            margin-bottom: 1rem;
        }

        .modal-text {
            color: var(--text-secondary);
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Cosmic background -->
    <div class="cosmos-bg" id="cosmos">
        <div class="nebula nebula-1"></div>
        <div class="nebula nebula-2"></div>
        <div class="nebula nebula-3"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-inner">
            <a href="#" class="logo" aria-label="CosmicCuriosity Home">
                <span class="logo-icon">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#6366f1"/>
                                <stop offset="100%" stop-color="#06b6d4"/>
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="50" r="45" fill="url(#logoGradient)"/>
                        <path d="M50 18 L54 36 L72 36 L58 47 L63 65 L50 54 L37 65 L42 47 L28 36 L46 36 Z" fill="white"/>
                        <circle cx="74" cy="26" r="5" fill="white" opacity="0.85"/>
                        <circle cx="28" cy="68" r="4" fill="white" opacity="0.65"/>
                        <circle cx="78" cy="62" r="3" fill="white" opacity="0.5"/>
                    </svg>
                </span>
                <span>CosmicCuriosity</span>
            </a>
            <nav aria-label="Main navigation">
                <a href="#tonight" class="active">Tonight</a>
                <a href="#events">Events</a>
                <a href="#tools">Tools</a>
                <a href="#gallery">Gallery</a>
                <a href="#news">News</a>
            </nav>
        </div>
    </header>

    <main id="main-content">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-badge">
                <span class="pulse"></span>
                Live from Earth â€” Your personal window to space
            </div>
            <h1>What's happening in<br><em>the universe</em> right now?</h1>
            <p class="hero-subtitle">
                Discover tonight's sky, upcoming cosmic events, stunning imagery from NASA, 
                and the latest space exploration news â€” all in one beautiful place.
            </p>
            <div class="hero-stats">
                <div class="stat">
                    <div class="stat-value" id="moon-phase-pct" data-moon-illumination>--</div>
                    <div class="stat-label"><span data-moon-phase>Moon</span> Illuminated</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="visible-planets">3</div>
                    <div class="stat-label">Planets Visible <span data-time-label>Tonight</span></div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="days-to-next">--</div>
                    <div class="stat-label">Days to Next Eclipse</div>
                </div>
            </div>
            <div class="hero-date" style="margin-top: 2rem; font-family: 'Space Mono', monospace; font-size: 0.8rem; color: var(--text-dim);">
                <span id="current-date" data-current-date></span> â€¢ <span data-live-time></span>
            </div>
        </section>

        <!-- Tonight's Sky -->
        <section id="tonight">
            <div class="section-header fade-in">
                <div class="section-label">What's happening now</div>
                <h2 class="section-title">Tonight's Sky</h2>
            </div>

            <!-- Location Input -->
            <div class="location-card fade-in" id="location-card">
                <div class="location-header">
                    <div class="location-icon">ðŸ“</div>
                    <div>
                        <h3>What can I see tonight?</h3>
                        <p>Enter your ZIP code for a personalized sky report</p>
                    </div>
                </div>
                <form class="location-form" id="location-form" onsubmit="handleZipSubmit(event)">
                    <div class="zip-input-wrapper">
                        <input 
                            type="text" 
                            class="zip-input" 
                            id="zip-input"
                            placeholder="Enter ZIP code"
                            maxlength="5"
                            pattern="[0-9]{5}"
                            inputmode="numeric"
                            autocomplete="off"
                            aria-label="ZIP code"
                        >
                    </div>
                    <button type="submit" class="location-btn" id="location-btn">
                        <span id="btn-text">Show My Sky</span>
                    </button>
                </form>
                <div class="privacy-note">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    <span>Your ZIP code is never stored or transmitted â€” all calculations happen locally in your browser</span>
                </div>
            </div>

            <!-- Sky Results (Hidden by default) -->
            <div class="sky-results" id="sky-results">
                <div class="sky-results-header">
                    <div class="sky-location-badge" id="location-badge">
                        <span>ðŸ“</span>
                        <span id="location-name">Loading...</span>
                    </div>
                    <button class="clear-location" onclick="clearLocation()">Clear Location</button>
                </div>

                <div class="conditions-summary">
                    <div class="conditions-title"><span data-time-label>Tonight</span>'s Viewing Conditions</div>
                    <div class="conditions-grid">
                        <div class="condition-item">
                            <div class="condition-value" id="cond-darkness" data-sky-darkness>Good</div>
                            <div class="condition-label">Sky Darkness</div>
                        </div>
                        <div class="condition-item">
                            <div class="condition-value" id="cond-moonlight"><span data-moon-illumination>--</span></div>
                            <div class="condition-label">Moon Illumination</div>
                        </div>
                        <div class="condition-item">
                            <div class="condition-value" id="cond-sunset" data-sunset>--</div>
                            <div class="condition-label">Sunset</div>
                        </div>
                        <div class="condition-item">
                            <div class="condition-value" id="cond-best" data-golden-hour>--</div>
                            <div class="condition-label">Golden Hour</div>
                        </div>
                    </div>
                </div>

                <div class="sky-grid" id="sky-objects">
                    <!-- Dynamically populated -->
                </div>

                <div class="viewing-tip">
                    <span class="viewing-tip-icon">ðŸ’¡</span>
                    <p class="viewing-tip-text" id="viewing-tip">
                        <strong>Pro tip:</strong> Give your eyes 20-30 minutes to adjust to the darkness. Avoid looking at your phone screen â€” or use a red filter app to preserve your night vision!
                    </p>
                </div>
            </div>
            
            <div class="tonight-card fade-in">
                <div class="tonight-header">
                    <div>
                        <div class="tonight-date" id="current-date">Tuesday, January 14, 2026</div>
                        <h3>A Great Night for Stargazing</h3>
                    </div>
                    <div class="moon-phase">
                        <span class="moon-icon">ðŸŒ–</span>
                        <div class="moon-info">
                            <div class="moon-name">Waning Gibbous</div>
                            <div class="moon-illumination">97% illuminated</div>
                        </div>
                    </div>
                </div>
                
                <!-- Dynamic Recommendations (populated by auto-update) -->
                <div id="tonight-recommendations" style="margin-top: 1.5rem;"></div>
                
                <div class="tonight-content">
                    <p id="tonight-summary" style="color: var(--text-secondary); max-width: 700px; line-height: 1.7;">
                        <span data-time-label>Tonight</span> features <strong style="color: var(--text-primary);">Jupiter at its brightest</strong> following its recent opposition, dominating the eastern sky after sunset. The <strong style="color: var(--text-primary);"><span data-moon-phase>Moon</span> (<span data-moon-illumination>--</span> illuminated)</strong> affects sky darkness. Look for Venus low on the western horizon just after sunset, and Mars rising late in the evening.
                    </p>
                    
                    <div class="tonight-highlights">
                        <div class="highlight">
                            <div class="highlight-icon">â™ƒ</div>
                            <div class="highlight-title">Jupiter Dominates</div>
                            <div class="highlight-desc">The gas giant shines at magnitude -2.8, unmissable in the eastern sky all evening long.</div>
                        </div>
                        <div class="highlight">
                            <div class="highlight-icon" data-moon-icon>ðŸŒ™</div>
                            <div class="highlight-title"><span data-moon-phase>Moon</span></div>
                            <div class="highlight-desc"><span data-moon-illumination>--</span> illuminated. <span id="moon-tip">Great for lunar observation!</span></div>
                        </div>
                        <div class="highlight">
                            <div class="highlight-icon">ðŸŒ…</div>
                            <div class="highlight-title">Sunset</div>
                            <div class="highlight-desc">Sunset at <span data-sunset>--</span>. Golden hour starts at <span data-golden-hour>--</span>.</div>
                        </div>
                        <div class="highlight">
                            <div class="highlight-icon">ðŸ”­</div>
                            <div class="highlight-title">Viewing Rating</div>
                            <div class="highlight-desc">Sky darkness: <span data-sky-darkness>--</span>. <span data-viewing-rating>â­â­â­</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upcoming Events -->
        <section id="events">
            <div class="section-header fade-in">
                <div class="section-label">Mark Your Calendar</div>
                <h2 class="section-title">Upcoming Celestial Events</h2>
            </div>

            <div class="events-filters fade-in">
                <button class="filter-btn active" data-filter="all">All Events</button>
                <button class="filter-btn" data-filter="meteor">ðŸŒ  Meteor Showers</button>
                <button class="filter-btn" data-filter="eclipse">ðŸŒ‘ Eclipses</button>
                <button class="filter-btn" data-filter="planet">ðŸª Planets</button>
                <button class="filter-btn" data-filter="launch">ðŸš€ Launches</button>
            </div>

            <div class="events-timeline fade-in" id="events-timeline">
                <div class="event-item" data-type="launch" data-date="2026-02-06">
                    <div class="event-date">
                        <div class="event-month">Feb</div>
                        <div class="event-day">6</div>
                    </div>
                    <div class="event-dot launch"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type launch">Launch</span>
                            <span class="event-countdown" data-date="2026-02-06"></span>
                        </div>
                        <div class="event-title">Artemis II Launch</div>
                        <div class="event-desc">NASA's historic crewed mission to the Moon â€” the first lunar voyage with humans in over 50 years. Four astronauts will orbit the Moon aboard the Orion spacecraft.</div>
                    </div>
                </div>

                <div class="event-item" data-type="eclipse" data-date="2026-02-17">
                    <div class="event-date">
                        <div class="event-month">Feb</div>
                        <div class="event-day">17</div>
                    </div>
                    <div class="event-dot eclipse"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type eclipse">Eclipse</span>
                            <span class="event-countdown" data-date="2026-02-17"></span>
                        </div>
                        <div class="event-title">Annular Solar Eclipse</div>
                        <div class="event-desc">A "ring of fire" eclipse visible from Antarctica. While challenging to reach, cruise ships may offer partial views from southern waters.</div>
                    </div>
                </div>

                <div class="event-item" data-type="eclipse" data-date="2026-03-03">
                    <div class="event-date">
                        <div class="event-month">Mar</div>
                        <div class="event-day">3</div>
                    </div>
                    <div class="event-dot eclipse"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type eclipse">Eclipse</span>
                            <span class="event-countdown" data-date="2026-03-03"></span>
                        </div>
                        <div class="event-title">Total Lunar Eclipse (Blood Moon)</div>
                        <div class="event-desc">The Moon turns deep red as it passes through Earth's shadow. Best viewed from Asia, Australia, and western North America. Don't miss this stunning sight!</div>
                    </div>
                </div>

                <div class="event-item" data-type="meteor" data-date="2026-04-22">
                    <div class="event-date">
                        <div class="event-month">Apr</div>
                        <div class="event-day">22</div>
                    </div>
                    <div class="event-dot meteor"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type meteor">Meteor Shower</span>
                            <span class="event-countdown" data-date="2026-04-22"></span>
                        </div>
                        <div class="event-title">Lyrids Meteor Shower Peak</div>
                        <div class="event-desc">Up to 18 meteors per hour radiating from the constellation Lyra. With a 27% Moon, conditions will be favorable for watching shooting stars!</div>
                    </div>
                </div>

                <div class="event-item" data-type="meteor" data-date="2026-08-12">
                    <div class="event-date">
                        <div class="event-month">Aug</div>
                        <div class="event-day">12</div>
                    </div>
                    <div class="event-dot meteor"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type meteor">Meteor Shower</span>
                            <span class="event-countdown" data-date="2026-08-12"></span>
                        </div>
                        <div class="event-title">Perseids Meteor Shower Peak</div>
                        <div class="event-desc">The year's best meteor shower with 60-120 meteors per hour! A NEW MOON means perfect dark skies for this spectacular show. Mark this date!</div>
                    </div>
                </div>

                <div class="event-item" data-type="eclipse" data-date="2026-08-12">
                    <div class="event-date">
                        <div class="event-month">Aug</div>
                        <div class="event-day">12</div>
                    </div>
                    <div class="event-dot eclipse"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type eclipse">Eclipse</span>
                            <span class="event-countdown" data-date="2026-08-12"></span>
                        </div>
                        <div class="event-title">Total Solar Eclipse</div>
                        <div class="event-desc">A spectacular total eclipse visible from Greenland, Iceland, Spain, and Portugal. Totality lasts up to 2 minutes 18 seconds. Start planning your trip now!</div>
                    </div>
                </div>

                <div class="event-item" data-type="planet" data-date="2026-11-16">
                    <div class="event-date">
                        <div class="event-month">Nov</div>
                        <div class="event-day">16</div>
                    </div>
                    <div class="event-dot planet"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type planet">Planets</span>
                            <span class="event-countdown" data-date="2026-11-16"></span>
                        </div>
                        <div class="event-title">Mars and Jupiter Close Conjunction</div>
                        <div class="event-desc">In the predawn hours, the red glow of Mars will appear remarkably close to brilliant Jupiter in the eastern sky â€” a beautiful sight for early risers!</div>
                    </div>
                </div>

                <div class="event-item" data-type="meteor" data-date="2026-12-14">
                    <div class="event-date">
                        <div class="event-month">Dec</div>
                        <div class="event-day">14</div>
                    </div>
                    <div class="event-dot meteor"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type meteor">Meteor Shower</span>
                            <span class="event-countdown" data-date="2026-12-14"></span>
                        </div>
                        <div class="event-title">Geminids Meteor Shower Peak</div>
                        <div class="event-desc">The strongest meteor shower of the year with up to 120 colorful meteors per hour. Moon-free skies will make this a can't-miss event!</div>
                    </div>
                </div>

                <div class="event-item" data-type="planet" data-date="2026-12-23">
                    <div class="event-date">
                        <div class="event-month">Dec</div>
                        <div class="event-day">23</div>
                    </div>
                    <div class="event-dot planet"></div>
                    <div class="event-content">
                        <div class="event-header">
                            <span class="event-type planet">Supermoon</span>
                            <span class="event-countdown" data-date="2026-12-23"></span>
                        </div>
                        <div class="event-title">December Supermoon (Closest of 2026)</div>
                        <div class="event-desc">The Moon will be at its closest point to Earth all year at just 221,667 miles away â€” appearing 14% larger and 30% brighter than usual!</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Astronomy Tools -->
        <section id="tools">
            <div class="section-header fade-in">
                <div class="section-label">Interactive Features</div>
                <h2 class="section-title">Astronomy Tools</h2>
            </div>

            <div class="tools-wrapper fade-in">
                <!-- Live Planet Positions -->
                <div class="tool-panel" id="planet-panel">
                    <div class="tool-panel-header">
                        <h3>ðŸª Planets Visible Tonight</h3>
                        <span class="tool-badge live">Live</span>
                    </div>
                    <div class="tool-panel-content" id="planets-display">
                        <!-- Static fallback - will be replaced by JS if available -->
                        <div class="planet-card-mini">
                            <div class="planet-symbol" style="color: #a0a0a0">â˜¿</div>
                            <div class="planet-name">Mercury</div>
                            <div class="planet-status">Below horizon</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #ffd700">â™€</div>
                            <div class="planet-name">Venus</div>
                            <div class="planet-status">15Â° altitude</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #ff4500">â™‚</div>
                            <div class="planet-name">Mars</div>
                            <div class="planet-status">32Â° altitude</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #daa520">â™ƒ</div>
                            <div class="planet-name">Jupiter</div>
                            <div class="planet-status">58Â° altitude</div>
                        </div>
                        <div class="planet-card-mini visible">
                            <div class="planet-symbol" style="color: #f4d03f">â™„</div>
                            <div class="planet-name">Saturn</div>
                            <div class="planet-status">25Â° altitude</div>
                        </div>
                        <div class="planet-card-mini">
                            <div class="planet-symbol" style="color: #7fffd4">â›¢</div>
                            <div class="planet-name">Uranus</div>
                            <div class="planet-status">Below horizon</div>
                        </div>
                        <div class="planet-card-mini">
                            <div class="planet-symbol" style="color: #4169e1">â™†</div>
                            <div class="planet-name">Neptune</div>
                            <div class="planet-status">Below horizon</div>
                        </div>
                    </div>
                </div>

                <!-- Tools Grid -->
                <div class="tools-grid">
                    <!-- Moon Phase Calculator -->
                    <div class="tool-card-interactive">
                        <div class="tool-card-icon">ðŸŒ™</div>
                        <div class="tool-card-content">
                            <h4>Moon Phase</h4>
                            <div class="tool-output" id="moon-output">
                                <span class="tool-value" data-moon-phase>Waxing Gibbous</span>
                                <span class="tool-detail"><span data-moon-illumination>78%</span> illuminated</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sun Times -->
                    <div class="tool-card-interactive">
                        <div class="tool-card-icon">ðŸŒ…</div>
                        <div class="tool-card-content">
                            <h4>Sun Times</h4>
                            <div class="tool-output">
                                <div class="tool-row">
                                    <span>Sunrise</span>
                                    <span class="tool-value" data-sunrise>7:15 AM</span>
                                </div>
                                <div class="tool-row">
                                    <span>Sunset</span>
                                    <span class="tool-value" data-sunset>5:42 PM</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Golden Hour -->
                    <div class="tool-card-interactive">
                        <div class="tool-card-icon">ðŸ“¸</div>
                        <div class="tool-card-content">
                            <h4>Golden Hour</h4>
                            <div class="tool-output">
                                <span class="tool-value" data-golden-hour>5:12 PM</span>
                                <span class="tool-detail">Best for photography</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sky Darkness -->
                    <div class="tool-card-interactive">
                        <div class="tool-card-icon">ðŸŒƒ</div>
                        <div class="tool-card-content">
                            <h4>Sky Darkness</h4>
                            <div class="tool-output">
                                <span class="tool-value" data-sky-darkness>Good</span>
                                <span class="tool-detail" data-viewing-rating>â­â­â­â­</span>
                            </div>
                        </div>
                    </div>

                    <!-- Next Eclipse -->
                    <div class="tool-card-interactive">
                        <div class="tool-card-icon">ðŸŒ‘</div>
                        <div class="tool-card-content">
                            <h4>Next Eclipse</h4>
                            <div class="tool-output" id="next-eclipse-display">
                                <span class="tool-value">Mar 3, 2026</span>
                                <span class="tool-detail">Total Lunar Eclipse</span>
                            </div>
                        </div>
                    </div>

                    <!-- Meteor Activity -->
                    <div class="tool-card-interactive">
                        <div class="tool-card-icon">ðŸŒ </div>
                        <div class="tool-card-content">
                            <h4>Meteor Activity</h4>
                            <div class="tool-output" id="meteor-display">
                                <span class="tool-value">Low</span>
                                <span class="tool-detail">No major showers active</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ISS Tracker -->
                <div class="tool-panel" id="iss-panel">
                    <div class="tool-panel-header">
                        <h3>ðŸ›°ï¸ ISS Location</h3>
                        <span class="tool-badge">Updates every 5s</span>
                    </div>
                    <div class="tool-panel-content">
                        <div class="iss-display">
                            <div class="iss-stat">
                                <span class="iss-label">Latitude</span>
                                <span class="iss-value" id="iss-lat">32.5Â°</span>
                            </div>
                            <div class="iss-stat">
                                <span class="iss-label">Longitude</span>
                                <span class="iss-value" id="iss-lon">-95.2Â°</span>
                            </div>
                            <div class="iss-stat">
                                <span class="iss-label">Altitude</span>
                                <span class="iss-value" id="iss-alt">~420 km</span>
                            </div>
                            <div class="iss-stat">
                                <span class="iss-label">Speed</span>
                                <span class="iss-value" id="iss-speed">~28,000 km/h</span>
                            </div>
                        </div>
                        <div class="iss-info">
                            <p>The International Space Station orbits Earth every 90 minutes at 17,500 mph.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Amazing Space Facts Carousel -->
        <section id="facts" class="facts-section">
            <div class="section-header fade-in">
                <div class="section-label">Did You Know?</div>
                <h2 class="section-title">Amazing Space Facts</h2>
            </div>

            <div class="facts-container fade-in">
                <div class="facts-carousel" id="facts-carousel">
                    <div class="facts-track" id="facts-track">
                        <!-- Solar System -->
                        <div class="fact-card" data-category="solar-system">
                            <div class="fact-icon">â˜€ï¸</div>
                            <div class="fact-category">Our Sun</div>
                            <div class="fact-text">You could fit <strong>1.3 million Earths</strong> inside the Sun. It makes up 99.86% of all mass in our solar system!</div>
                        </div>
                        <div class="fact-card" data-category="solar-system">
                            <div class="fact-icon">ðŸŒ¡ï¸</div>
                            <div class="fact-category">Solar Heat</div>
                            <div class="fact-text">The Sun's core is <strong>27 million Â°F</strong> (15 million Â°C) â€” so hot that hydrogen atoms fuse into helium, releasing enormous energy.</div>
                        </div>
                        <div class="fact-card" data-category="solar-system">
                            <div class="fact-icon">ðŸ’¨</div>
                            <div class="fact-category">Solar Wind</div>
                            <div class="fact-text">The Sun releases a <strong>solar wind</strong> that travels at 1 million mph, creating the beautiful auroras when it hits Earth's magnetic field.</div>
                        </div>
                        
                        <!-- Stars & Galaxies -->
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">ðŸ’«</div>
                            <div class="fact-category">Mind-Blowing Scale</div>
                            <div class="fact-text">There are more stars in the universe than <strong>grains of sand on all Earth's beaches</strong> â€” about 200 billion trillion stars!</div>
                        </div>
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">â­</div>
                            <div class="fact-category">Star Birth</div>
                            <div class="fact-text">A new star is born in our galaxy roughly <strong>every 50 years</strong>. The Milky Way has been making stars for over 13 billion years!</div>
                        </div>
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">ðŸ”µ</div>
                            <div class="fact-category">Blue Giants</div>
                            <div class="fact-text">The hottest stars burn <strong>blue, not red</strong>! Blue supergiants can be 50,000Â°C â€” while red dwarfs are a "cool" 3,000Â°C.</div>
                        </div>
                        <div class="fact-card" data-category="stars">
                            <div class="fact-icon">âš¡</div>
                            <div class="fact-category">Neutron Stars</div>
                            <div class="fact-text">Neutron stars are so dense that a <strong>teaspoon</strong> would weigh about 6 billion tons â€” as much as Mount Everest!</div>
                        </div>
                        
                        <!-- Planets -->
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">ðŸª</div>
                            <div class="fact-category">Saturn</div>
                            <div class="fact-text">Saturn would <strong>float in water</strong> if you could find a bathtub big enough â€” it's less dense than water!</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">ðŸ”´</div>
                            <div class="fact-category">Venus Time</div>
                            <div class="fact-text">A day on Venus is <strong>longer than its year</strong>! It takes 243 Earth days to rotate but only 225 days to orbit the Sun.</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">ðŸŒ€</div>
                            <div class="fact-category">Jupiter's Storm</div>
                            <div class="fact-text">Jupiter's Great Red Spot is a <strong>400-year-old storm</strong> so large that Earth could fit inside it twice!</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">ðŸ’Ž</div>
                            <div class="fact-category">Diamond Rain</div>
                            <div class="fact-text">On Neptune and Uranus, <strong>diamonds literally rain</strong> from the sky due to extreme pressure converting methane to diamond!</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">ðŸŒ‹</div>
                            <div class="fact-category">Volcanic Moon</div>
                            <div class="fact-text">Jupiter's moon Io has <strong>over 400 active volcanoes</strong> â€” making it the most volcanically active body in the solar system.</div>
                        </div>
                        <div class="fact-card" data-category="planets">
                            <div class="fact-icon">ðŸ”ï¸</div>
                            <div class="fact-category">Martian Giant</div>
                            <div class="fact-text">Mars has the largest volcano in the solar system â€” <strong>Olympus Mons</strong> stands 72,000 feet tall, nearly 3x Mount Everest!</div>
                        </div>
                        
                        <!-- Moon & Earth -->
                        <div class="fact-card" data-category="moon">
                            <div class="fact-icon">ðŸŒ™</div>
                            <div class="fact-category">Drifting Moon</div>
                            <div class="fact-text">The Moon is slowly <strong>drifting away</strong> from Earth at about 1.5 inches (3.8 cm) per year. In a billion years, it'll be too far for total eclipses!</div>
                        </div>
                        <div class="fact-card" data-category="moon">
                            <div class="fact-icon">ðŸ‘£</div>
                            <div class="fact-category">Lunar Footprints</div>
                            <div class="fact-text">The footprints left by Apollo astronauts will remain on the Moon for <strong>millions of years</strong> â€” there's no wind or weather to erode them.</div>
                        </div>
                        <div class="fact-card" data-category="moon">
                            <div class="fact-icon">ðŸŒŠ</div>
                            <div class="fact-category">Tidal Lock</div>
                            <div class="fact-text">The Moon is <strong>tidally locked</strong> to Earth â€” that's why we always see the same side. The "dark side" isn't dark, just hidden!</div>
                        </div>
                        
                        <!-- Light & Distance -->
                        <div class="fact-card" data-category="light">
                            <div class="fact-icon">â±ï¸</div>
                            <div class="fact-category">Sunlight Travel</div>
                            <div class="fact-text">Sunlight takes <strong>8 minutes 20 seconds</strong> to reach Earth. If the Sun vanished, we wouldn't know for 8 minutes!</div>
                        </div>
                        <div class="fact-card" data-category="light">
                            <div class="fact-icon">ðŸ”­</div>
                            <div class="fact-category">Looking Back in Time</div>
                            <div class="fact-text">When you look at the Andromeda Galaxy, you're seeing light from <strong>2.5 million years ago</strong> â€” true time travel!</div>
                        </div>
                        <div class="fact-card" data-category="light">
                            <div class="fact-icon">ðŸ“¡</div>
                            <div class="fact-category">Voyager Distance</div>
                            <div class="fact-text">Voyager 1 is <strong>15 billion miles</strong> away. A signal from it takes over 22 hours to reach Earth at light speed!</div>
                        </div>
                        
                        <!-- Black Holes & Extreme -->
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">ðŸ•³ï¸</div>
                            <div class="fact-category">Black Holes</div>
                            <div class="fact-text">If you fell into a black hole, <strong>spaghettification</strong> would stretch you into a long thin strand due to extreme tidal forces!</div>
                        </div>
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">ðŸŒŒ</div>
                            <div class="fact-category">Cosmic Collision</div>
                            <div class="fact-text">The Milky Way and Andromeda galaxies will <strong>collide in 4.5 billion years</strong>. Don't worry though â€” stars are so far apart, direct collisions are rare!</div>
                        </div>
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">ðŸ’¥</div>
                            <div class="fact-category">Supernovae</div>
                            <div class="fact-text">A supernova explosion releases more energy in seconds than our Sun will produce in its <strong>entire 10-billion-year lifetime</strong>!</div>
                        </div>
                        <div class="fact-card" data-category="extreme">
                            <div class="fact-icon">ðŸ§²</div>
                            <div class="fact-category">Magnetars</div>
                            <div class="fact-text">Magnetars have magnetic fields <strong>1 quadrillion times</strong> stronger than Earth's â€” strong enough to erase your credit cards from the Moon!</div>
                        </div>
                        
                        <!-- Space Exploration -->
                        <div class="fact-card" data-category="exploration">
                            <div class="fact-icon">ðŸš€</div>
                            <div class="fact-category">ISS Speed</div>
                            <div class="fact-text">The International Space Station orbits at <strong>17,500 mph</strong> â€” completing a full orbit every 90 minutes. Astronauts see 16 sunrises daily!</div>
                        </div>
                        <div class="fact-card" data-category="exploration">
                            <div class="fact-icon">ðŸ§‘â€ðŸš€</div>
                            <div class="fact-category">Space Growth</div>
                            <div class="fact-text">Astronauts grow <strong>up to 2 inches taller</strong> in space because their spines decompress without gravity. They shrink back on Earth!</div>
                        </div>
                        <div class="fact-card" data-category="exploration">
                            <div class="fact-icon">ðŸŽ‚</div>
                            <div class="fact-category">Space Age</div>
                            <div class="fact-text">On Mercury, you'd have <strong>4 birthdays per Earth year</strong>! A year there is just 88 Earth days. On Neptune, one year = 165 Earth years!</div>
                        </div>
                        
                        <!-- Universe Mysteries -->
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">ðŸ”®</div>
                            <div class="fact-category">Dark Matter</div>
                            <div class="fact-text"><strong>85% of the universe</strong> is made of dark matter â€” we can't see it, but we know it exists from its gravitational effects!</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">ðŸ«§</div>
                            <div class="fact-category">Cosmic Void</div>
                            <div class="fact-text">The BoÃ¶tes Void is a <strong>330 million light-year</strong> empty region of space containing almost no galaxies â€” one of the universe's greatest mysteries.</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">ðŸŽµ</div>
                            <div class="fact-category">Space Sound</div>
                            <div class="fact-text">Space isn't completely silent! Black holes emit <strong>ultra-low frequency sounds</strong> â€” a B-flat, 57 octaves below middle C!</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">ðŸ³</div>
                            <div class="fact-category">Cosmic Recipe</div>
                            <div class="fact-text">The center of our galaxy <strong>smells like rum</strong> and <strong>tastes like raspberries</strong> â€” due to ethyl formate molecules floating in space!</div>
                        </div>
                        <div class="fact-card" data-category="mysteries">
                            <div class="fact-icon">ðŸŒ</div>
                            <div class="fact-category">Pale Blue Dot</div>
                            <div class="fact-text">From Saturn, Earth is just <strong>a tiny blue pixel</strong>. Voyager 1 photographed this "Pale Blue Dot" from 4 billion miles away in 1990.</div>
                        </div>
                    </div>
                </div>
                
                <div class="facts-controls">
                    <button class="facts-nav-btn" id="facts-prev" aria-label="Previous facts">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    
                    <div class="facts-dots" id="facts-dots"></div>
                    
                    <span class="facts-counter" id="facts-counter">1 / 30</span>
                    
                    <button class="facts-nav-btn" id="facts-next" aria-label="Next facts">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                    
                    <button class="facts-auto-toggle active" id="facts-auto-toggle">
                        <span class="toggle-icon"></span>
                        <span>Auto-scroll</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Space Gallery -->
        <section id="gallery">
            <div class="section-header fade-in">
                <div class="section-label">Cosmic Beauty</div>
                <h2 class="section-title">Space Image Gallery</h2>
            </div>

            <!-- APOD Hero -->
            <div class="apod-hero fade-in" id="apod-container">
                <img src="https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e001738/GSFC_20171208_Archive_e001738~large.jpg" 
                     data-fallback="https://images-assets.nasa.gov/image/PIA17046/PIA17046~large.jpg"
                     alt="NASA Astronomy Picture of the Day - Carina Nebula" id="apod-image" loading="lazy">
                <div class="apod-content">
                    <span class="apod-badge">âœ¦ Picture of the Day</span>
                    <h3 class="apod-title" id="apod-title">Cosmic Cliffs in the Carina Nebula</h3>
                    <p class="apod-desc" id="apod-desc">This stunning image from the James Webb Space Telescope reveals the edge of a nearby stellar nursery called NGC 3324 in the Carina Nebula. The "mountains" and "valleys" are actually the edge of a giant gaseous cavity, sculpted by intense ultraviolet radiation from young, massive stars located above the area shown.</p>
                </div>
            </div>

            <div class="gallery-grid fade-in">
                <div class="gallery-item gallery-featured" onclick="openModal(this)">
                    <img src="https://images-assets.nasa.gov/image/PIA22946/PIA22946~large.jpg" 
                         alt="Jupiter's Great Red Spot" loading="lazy">
                    <div class="gallery-overlay">
                        <div class="gallery-title">Jupiter's Great Red Spot</div>
                        <div class="gallery-credit">Credit: NASA/JPL-Caltech/SwRI/MSSS</div>
                    </div>
                </div>
                <div class="gallery-item" onclick="openModal(this)">
                    <img src="https://images-assets.nasa.gov/image/PIA17563/PIA17563~large.jpg" 
                         alt="Pillars of Creation" loading="lazy">
                    <div class="gallery-overlay">
                        <div class="gallery-title">Pillars of Creation</div>
                        <div class="gallery-credit">Credit: NASA/ESA/Hubble</div>
                    </div>
                </div>
                <div class="gallery-item" onclick="openModal(this)">
                    <img src="https://images-assets.nasa.gov/image/PIA21046/PIA21046~large.jpg" 
                         alt="Saturn's Rings" loading="lazy">
                    <div class="gallery-overlay">
                        <div class="gallery-title">Saturn's Majestic Rings</div>
                        <div class="gallery-credit">Credit: NASA/JPL-Caltech</div>
                    </div>
                </div>
                <div class="gallery-item" onclick="openModal(this)">
                    <img src="https://images-assets.nasa.gov/image/PIA24546/PIA24546~large.jpg" 
                         alt="Mars Surface" loading="lazy">
                    <div class="gallery-overlay">
                        <div class="gallery-title">Mars Perseverance Rover View</div>
                        <div class="gallery-credit">Credit: NASA/JPL</div>
                    </div>
                </div>
                <div class="gallery-item" onclick="openModal(this)">
                    <img src="https://images-assets.nasa.gov/image/PIA17171/PIA17171~large.jpg" 
                         alt="Earth from Saturn" loading="lazy">
                    <div class="gallery-overlay">
                        <div class="gallery-title">Earth from Saturn</div>
                        <div class="gallery-credit">Credit: NASA/JPL-Caltech</div>
                    </div>
                </div>
                <div class="gallery-item" onclick="openModal(this)">
                    <img src="https://images-assets.nasa.gov/image/PIA18033/PIA18033~large.jpg" 
                         alt="Andromeda Galaxy" loading="lazy">
                    <div class="gallery-overlay">
                        <div class="gallery-title">Andromeda Galaxy</div>
                        <div class="gallery-credit">Credit: NASA/JPL-Caltech</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Space News -->
        <section id="news">
            <div class="section-header fade-in">
                <div class="section-label">Latest Updates</div>
                <h2 class="section-title">Space News</h2>
            </div>

            <div class="news-grid fade-in">
                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images-assets.nasa.gov/image/KSC-20220316-PH-KLS02_0040/KSC-20220316-PH-KLS02_0040~large.jpg" alt="Artemis II Mission" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">Artemis II: Humanity Returns to the Moon</div>
                        <div class="news-excerpt">NASA's historic crewed lunar mission is set for February 2026, marking the first time humans will travel to the Moon in over 50 years.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e001925/GSFC_20171208_Archive_e001925~large.jpg" alt="James Webb Space Telescope" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA / ESA</div>
                        <div class="news-title">James Webb Discovers New Exoplanet Atmospheres</div>
                        <div class="news-excerpt">The powerful space telescope continues to revolutionize our understanding of distant worlds, detecting water vapor and carbon compounds.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images-assets.nasa.gov/image/iss067e147386/iss067e147386~large.jpg" alt="International Space Station" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">ISS Crew-11 Mission Update</div>
                        <div class="news-excerpt">The current space station crew continues vital research in microgravity, preparing for eventual deep space missions.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images-assets.nasa.gov/image/PIA14316/PIA14316~large.jpg" alt="Dragonfly Mission to Titan" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA / JPL</div>
                        <div class="news-title">Dragonfly Mission to Saturn's Moon Titan</div>
                        <div class="news-excerpt">NASA's rotorcraft mission to explore Titan's organic-rich surface is scheduled to launch later this year aboard a Falcon Heavy rocket.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images-assets.nasa.gov/image/PIA17462/PIA17462~large.jpg" alt="Voyager 1 Spacecraft" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">Voyager 1 Reaches One Light-Day from Earth</div>
                        <div class="news-excerpt">The legendary spacecraft achieves another milestone in 2026, continuing to send data from the edge of interstellar space.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e000131/GSFC_20171208_Archive_e000131~large.jpg" alt="Nancy Grace Roman Space Telescope" loading="lazy">
                    </div>
                    <div class="news-body">
                        <div class="news-source">NASA</div>
                        <div class="news-title">Nancy Grace Roman Telescope Launch Planned</div>
                        <div class="news-excerpt">The next-generation infrared space telescope is scheduled for September 2026, promising new discoveries in cosmology and exoplanets.</div>
                        <div class="news-date">January 2026</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-inner">
            <div class="footer-brand">
                <div class="footer-logo">
                    <svg viewBox="0 0 100 100" width="32" height="32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <defs>
                            <linearGradient id="footerLogoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#6366f1"/>
                                <stop offset="100%" stop-color="#06b6d4"/>
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="50" r="45" fill="url(#footerLogoGradient)"/>
                        <path d="M50 18 L54 36 L72 36 L58 47 L63 65 L50 54 L37 65 L42 47 L28 36 L46 36 Z" fill="white"/>
                        <circle cx="74" cy="26" r="5" fill="white" opacity="0.85"/>
                        <circle cx="28" cy="68" r="4" fill="white" opacity="0.65"/>
                        <circle cx="78" cy="62" r="3" fill="white" opacity="0.5"/>
                    </svg>
                    <span style="font-family: 'Instrument Serif', serif; font-size: 1.2rem; margin-left: 0.5rem;">CosmicCuriosity</span>
                </div>
                <p class="footer-tagline">Your window to the universe</p>
            </div>
            <div class="footer-links-group">
                <div class="footer-section">
                    <h4>Explore</h4>
                    <a href="#tonight">Tonight's Sky</a>
                    <a href="#events">Celestial Events</a>
                    <a href="#tools">Astronomy Tools</a>
                    <a href="#gallery">Space Gallery</a>
                    <a href="#news">Space News</a>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <a href="https://api.nasa.gov" target="_blank" rel="noopener">NASA APIs</a>
                    <a href="https://apod.nasa.gov" target="_blank" rel="noopener">NASA APOD</a>
                    <a href="https://images.nasa.gov" target="_blank" rel="noopener">NASA Image Library</a>
                    <a href="https://www.timeanddate.com/astronomy/" target="_blank" rel="noopener">Time and Date</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Â© <span data-current-year>2026</span> CosmicCuriosity â€” Built with âœ¦ for curious minds everywhere</p>
            <p class="footer-credits">Data from NASA Open APIs â€¢ Images courtesy of NASA/ESA â€¢ Not affiliated with NASA</p>
        </div>
    </footer>

    <!-- Image Modal -->
    <div class="modal-overlay" id="modal" onclick="closeModal(event)">
        <button class="modal-close" onclick="closeModal(event)">Ã—</button>
        <div class="modal-content" onclick="event.stopPropagation()">
            <img class="modal-image" id="modal-image" src="" alt="">
            <div class="modal-body">
                <h3 class="modal-title" id="modal-title"></h3>
                <p class="modal-text" id="modal-text"></p>
            </div>
        </div>
    </div>

    <script>
        // Generate starfield
        function createStars() {
            const cosmos = document.getElementById('cosmos');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 2 + 2) + 's';
                cosmos.appendChild(star);
            }
        }
        createStars();

        // Set current date
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', options);

        // Calculate days to next eclipse (March 3, 2026)
        const nextEclipse = new Date('2026-03-03');
        const today = new Date();
        const daysToEclipse = Math.ceil((nextEclipse - today) / (1000 * 60 * 60 * 24));
        document.getElementById('days-to-next').textContent = Math.max(0, daysToEclipse);

        // Calculate and display event countdowns
        function updateEventCountdowns() {
            const now = new Date();
            now.setHours(0, 0, 0, 0); // Compare dates only
            
            document.querySelectorAll('.event-countdown[data-date]').forEach(badge => {
                const eventDate = new Date(badge.dataset.date + 'T00:00:00');
                const diffTime = eventDate - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                let text = '';
                let className = 'event-countdown';
                
                if (diffDays < 0) {
                    // Event has passed
                    text = 'Passed';
                    badge.style.opacity = '0.5';
                } else if (diffDays === 0) {
                    text = 'ðŸŽ‰ Today!';
                    className += ' very-soon';
                } else if (diffDays === 1) {
                    text = 'â° Tomorrow!';
                    className += ' very-soon';
                } else if (diffDays <= 7) {
                    text = `${diffDays} days away`;
                    className += ' very-soon';
                } else if (diffDays <= 30) {
                    text = `${diffDays} days away`;
                    className += ' soon';
                } else if (diffDays <= 60) {
                    const weeks = Math.round(diffDays / 7);
                    text = `~${weeks} weeks away`;
                    className += ' soon';
                } else {
                    const months = Math.round(diffDays / 30);
                    text = `~${months} month${months > 1 ? 's' : ''} away`;
                }
                
                badge.textContent = text;
                badge.className = className;
            });
        }
        
        updateEventCountdowns();

        // Scroll animations
        const fadeElements = document.querySelectorAll('.fade-in');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        fadeElements.forEach(el => observer.observe(el));

        // Event filters
        const filterBtns = document.querySelectorAll('.filter-btn');
        const events = document.querySelectorAll('.event-item');

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const filter = btn.dataset.filter;
                events.forEach(event => {
                    if (filter === 'all' || event.dataset.type === filter) {
                        event.style.display = 'flex';
                    } else {
                        event.style.display = 'none';
                    }
                });
            });
        });

        // Modal functions
        const imageDescriptions = {
            "Jupiter's Great Red Spot": "Jupiter's Great Red Spot is a giant storm that has been raging for at least 400 years. It's so large that Earth could fit inside it! This image from NASA's Juno spacecraft shows incredible detail of the swirling clouds.",
            "Pillars of Creation": "These towering columns of cosmic gas and dust are part of the Eagle Nebula, located about 6,500 light-years away. They're actively forming new stars within their dense cores.",
            "Saturn's Majestic Rings": "Saturn's iconic rings are made of billions of particles of ice and rock, ranging from tiny grains to house-sized chunks. They span up to 282,000 km but are remarkably thin.",
            "Mars Perseverance Rover View": "This image from NASA's Perseverance rover shows the Martian landscape in stunning detail. The rover is searching for signs of ancient microbial life and collecting samples for future return to Earth.",
            "Earth from Saturn": "This breathtaking image shows our home planet as a tiny blue dot, photographed by NASA's Cassini spacecraft from 898 million miles away near Saturn.",
            "Carina Nebula (JWST)": "The James Webb Space Telescope captured this stunning view of the Carina Nebula's 'Cosmic Cliffs' â€” a stellar nursery where new stars are being born within towering pillars of gas and dust."
        };

        function openModal(element) {
            const modal = document.getElementById('modal');
            const img = element.querySelector('img');
            const title = element.querySelector('.gallery-title').textContent;
            
            document.getElementById('modal-image').src = img.src.replace('~medium', '~orig');
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-text').textContent = imageDescriptions[title] || "Stunning imagery captured by NASA's space exploration missions, revealing the wonders of our universe.";
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event.target.classList.contains('modal-overlay') || event.target.classList.contains('modal-close')) {
                document.getElementById('modal').classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // Smooth scroll for nav links
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
                
                document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            });
        });

        // Update active nav on scroll
        window.addEventListener('scroll', () => {
            const sections = ['tonight', 'events', 'gallery', 'news'];
            const scrollPos = window.scrollY + 200;
            
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    const top = section.offsetTop;
                    const height = section.offsetHeight;
                    
                    if (scrollPos >= top && scrollPos < top + height) {
                        document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                        document.querySelector(`nav a[href="#${sectionId}"]`).classList.add('active');
                    }
                }
            });
        });

        // Moon phase calculation (simplified)
        function getMoonPhase() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            // Simple moon phase calculation
            const c = Math.floor(365.25 * year);
            const e = Math.floor(30.6 * month);
            const jd = c + e + day - 694039.09;
            const phase = jd / 29.5305882;
            const illumination = Math.abs(Math.cos(phase * Math.PI * 2));
            
            return Math.round(illumination * 100);
        }

        // This would be called when APOD API is available
        // For now, we're using placeholder content
        console.log('CosmicCuriosity loaded successfully! ðŸš€');
        console.log('Moon illumination approx:', getMoonPhase() + '%');

        // ==========================================
        // ZIP CODE LOCATION FEATURE
        // ==========================================
        
        // US ZIP code to approximate coordinates (major regions only - no data stored)
        // This is a simplified lookup that runs entirely client-side
        function getApproxLocation(zip) {
            const zipNum = parseInt(zip);
            
            // Determine region and approximate coordinates based on ZIP prefix
            // This is intentionally approximate - we don't store or transmit the exact ZIP
            const regions = {
                // Northeast
                '0': { lat: 42.5, lng: -71.5, region: 'Northeast', timezone: -5 },
                '1': { lat: 41.5, lng: -73.5, region: 'Northeast', timezone: -5 },
                // Mid-Atlantic
                '2': { lat: 39.0, lng: -76.5, region: 'Mid-Atlantic', timezone: -5 },
                // Southeast
                '3': { lat: 33.5, lng: -84.0, region: 'Southeast', timezone: -5 },
                // Midwest
                '4': { lat: 42.0, lng: -83.5, region: 'Midwest', timezone: -5 },
                '5': { lat: 44.0, lng: -93.0, region: 'Upper Midwest', timezone: -6 },
                '6': { lat: 41.5, lng: -90.0, region: 'Central', timezone: -6 },
                // South Central
                '7': { lat: 31.0, lng: -97.0, region: 'South Central', timezone: -6 },
                // Mountain
                '8': { lat: 39.5, lng: -105.0, region: 'Mountain', timezone: -7 },
                // Pacific
                '9': { lat: 37.5, lng: -122.0, region: 'Pacific', timezone: -8 }
            };
            
            const prefix = zip.charAt(0);
            const baseLocation = regions[prefix] || regions['5']; // Default to central US
            
            // Add slight variation based on full ZIP to make it more personalized
            // but still not storing the actual ZIP
            const variation = (zipNum % 100) / 100;
            
            return {
                lat: baseLocation.lat + (variation - 0.5) * 2,
                lng: baseLocation.lng + (variation - 0.5) * 3,
                region: baseLocation.region,
                timezone: baseLocation.timezone,
                displayName: `${baseLocation.region} (${zip.substring(0,3)}xx)`
            };
        }

        // Calculate sun position and visibility
        function getSunTimes(lat, lng, timezone, date = new Date()) {
            // Calculate day of year
            const start = new Date(date.getFullYear(), 0, 0);
            const diff = date - start;
            const dayOfYear = Math.floor(diff / 86400000);
            
            // Solar declination (angle of sun relative to equator)
            const declination = 23.45 * Math.sin((360/365) * (dayOfYear - 81) * Math.PI / 180);
            
            // Hour angle (how long sun is up)
            const latRad = lat * Math.PI / 180;
            const decRad = declination * Math.PI / 180;
            const cosHourAngle = -Math.tan(latRad) * Math.tan(decRad);
            
            // Clamp to valid range (handles polar day/night)
            const clampedCos = Math.max(-1, Math.min(1, cosHourAngle));
            const hourAngle = Math.acos(clampedCos) * 180 / Math.PI;
            
            // Solar noon in UTC (when sun is highest)
            const solarNoonUTC = 12 - lng / 15;
            
            // Convert to local time by adding timezone offset
            // timezone is negative for US (e.g., -8 for PST)
            const solarNoonLocal = solarNoonUTC + timezone;
            
            // Calculate sunrise and sunset in local time
            const daylightHours = (hourAngle / 15) * 2;
            const sunrise = solarNoonLocal - (daylightHours / 2);
            const sunset = solarNoonLocal + (daylightHours / 2);
            
            // Normalize hours to 0-24 range
            const normalizedSunrise = ((sunrise % 24) + 24) % 24;
            const normalizedSunset = ((sunset % 24) + 24) % 24;
            
            return {
                sunrise: formatTime(normalizedSunrise),
                sunset: formatTime(normalizedSunset),
                sunriseHour: normalizedSunrise,
                sunsetHour: normalizedSunset
            };
        }

        function formatTime(decimalHours) {
            let hours = Math.floor(decimalHours);
            let minutes = Math.round((decimalHours - hours) * 60);
            if (minutes === 60) { hours++; minutes = 0; }
            
            const period = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12 || 12;
            
            return `${hours}:${minutes.toString().padStart(2, '0')} ${period}`;
        }

        // Calculate what's visible in the sky
        function calculateVisibleObjects(location) {
            const now = new Date();
            const hour = now.getHours();
            const month = now.getMonth();
            const lat = location.lat;
            
            // Current planetary positions (simplified for Jan 2026)
            const objects = [];
            
            // Jupiter - very prominent in Jan 2026 after opposition
            objects.push({
                name: 'Jupiter',
                type: 'Planet',
                icon: 'â™ƒ',
                iconClass: 'planet',
                visibility: 'excellent',
                riseTime: '4:30 PM',
                setTime: '5:45 AM',
                direction: 'East â†’ South â†’ West',
                brightness: '-2.8 mag',
                description: 'Brilliant and unmissable! Look for it rising in the east after sunset.',
                bestTime: 'All evening',
                canSee: true
            });

            // Venus - evening star, low in west
            objects.push({
                name: 'Venus',
                type: 'Planet',
                icon: 'â™€',
                iconClass: 'planet',
                visibility: lat > 35 ? 'fair' : 'good',
                riseTime: 'Daytime',
                setTime: '6:15 PM',
                direction: 'Low Western horizon',
                brightness: '-3.9 mag',
                description: 'The Evening Star sits low in the west just after sunset. Act fast!',
                bestTime: '5:30-6:00 PM',
                canSee: true
            });

            // Mars - rising late
            objects.push({
                name: 'Mars',
                type: 'Planet',
                icon: 'â™‚',
                iconClass: 'planet',
                visibility: 'good',
                riseTime: '11:30 PM',
                setTime: '11:15 AM',
                direction: 'East â†’ South',
                brightness: '+0.8 mag',
                description: 'The Red Planet rises late. Look for its distinctive orange-red color.',
                bestTime: 'After midnight',
                canSee: hour >= 23 || hour < 5
            });

            // Saturn - difficult, near sun
            objects.push({
                name: 'Saturn',
                type: 'Planet',
                icon: 'â™„',
                iconClass: 'planet',
                visibility: 'poor',
                riseTime: '7:45 AM',
                setTime: '5:30 PM',
                direction: 'Low in twilight',
                brightness: '+1.0 mag',
                description: 'Currently lost in the Sun\'s glare. Will return to evening skies in spring.',
                bestTime: 'Not visible',
                canSee: false
            });

            // Moon
            const moonIllum = getMoonPhase();
            const moonPhase = getMoonPhaseName(moonIllum);
            objects.push({
                name: 'Moon',
                type: moonPhase,
                icon: getMoonEmoji(moonIllum),
                iconClass: 'moon',
                visibility: 'excellent',
                riseTime: '5:45 PM',
                setTime: '8:30 AM',
                direction: 'East â†’ Overhead â†’ West',
                brightness: `${moonIllum}% illuminated`,
                description: `The ${moonPhase} Moon dominates tonight's sky. Great for lunar observation!`,
                bestTime: 'All night',
                canSee: true
            });

            // Constellations based on season and latitude
            const winterConstellations = [
                { name: 'Orion', desc: 'The Hunter - look for the three belt stars' },
                { name: 'Taurus', desc: 'The Bull - find the bright star Aldebaran' },
                { name: 'Gemini', desc: 'The Twins - Castor and Pollux shine bright' }
            ];
            
            const constellation = winterConstellations[month % 3];
            objects.push({
                name: constellation.name,
                type: 'Constellation',
                icon: 'â­',
                iconClass: 'constellation',
                visibility: moonIllum > 80 ? 'fair' : 'good',
                riseTime: '6:00 PM',
                setTime: '4:00 AM',
                direction: 'Southern sky',
                brightness: 'Multiple stars',
                description: constellation.desc,
                bestTime: '9 PM - 1 AM',
                canSee: true
            });

            return objects.filter(obj => obj.canSee);
        }

        function getMoonPhaseName(illumination) {
            if (illumination < 3) return 'New Moon';
            if (illumination < 25) return 'Waxing Crescent';
            if (illumination < 50) return 'First Quarter';
            if (illumination < 75) return 'Waxing Gibbous';
            if (illumination < 97) return 'Waning Gibbous';
            return 'Full Moon';
        }

        function getMoonEmoji(illumination) {
            if (illumination < 3) return 'ðŸŒ‘';
            if (illumination < 25) return 'ðŸŒ’';
            if (illumination < 50) return 'ðŸŒ“';
            if (illumination < 75) return 'ðŸŒ”';
            if (illumination < 97) return 'ðŸŒ–';
            return 'ðŸŒ•';
        }

        function getViewingConditions(location, moonIllum) {
            const sunTimes = getSunTimes(location.lat, location.lng, location.timezone);
            
            // Determine sky darkness based on moon
            let darkness = 'Excellent';
            if (moonIllum > 80) darkness = 'Fair';
            else if (moonIllum > 50) darkness = 'Good';
            else if (moonIllum > 25) darkness = 'Very Good';
            
            // Moonlight level
            let moonlight = 'None';
            if (moonIllum > 80) moonlight = 'Bright';
            else if (moonIllum > 50) moonlight = 'Moderate';
            else if (moonIllum > 25) moonlight = 'Low';
            
            // Best viewing window (after astronomical twilight, ~1.5-2 hrs after sunset)
            const bestStartHour = sunTimes.sunsetHour + 1.5;
            const bestEndHour = bestStartHour + 2;
            const bestViewing = `${formatTime(bestStartHour).replace(':00 ', ' ')} - ${formatTime(bestEndHour).replace(':00 ', ' ')}`;
            
            return {
                darkness,
                moonlight,
                sunset: sunTimes.sunset,
                bestViewing
            };
        }

        function getViewingTip(location, moonIllum) {
            const tips = [];
            
            if (moonIllum > 80) {
                tips.push("With a bright Moon tonight, focus on planets and bright stars. Deep sky objects like galaxies will be washed out.");
            } else if (moonIllum < 20) {
                tips.push("Excellent dark sky conditions! Perfect night for viewing the Milky Way, galaxies, and faint nebulae.");
            }
            
            if (location.lat > 40) {
                tips.push("From your northern latitude, the North Star (Polaris) is high in the sky â€” great for navigation practice!");
            }
            
            // Default tips
            const defaultTips = [
                "Let your eyes adjust for 20-30 minutes in darkness for the best views.",
                "Use a red flashlight to preserve your night vision while checking star maps.",
                "Binoculars can reveal Jupiter's moons and many star clusters!",
                "Look away from city lights â€” even 10 miles can make a huge difference."
            ];
            
            if (tips.length === 0) {
                tips.push(defaultTips[Math.floor(Math.random() * defaultTips.length)]);
            }
            
            return tips[0];
        }

        // Handle ZIP form submission
        function handleZipSubmit(event) {
            event.preventDefault();
            
            const zipInput = document.getElementById('zip-input');
            const zip = zipInput.value.trim();
            const btn = document.getElementById('location-btn');
            const btnText = document.getElementById('btn-text');
            
            // Validate ZIP
            if (!/^\d{5}$/.test(zip)) {
                zipInput.style.borderColor = '#ef4444';
                setTimeout(() => zipInput.style.borderColor = '', 2000);
                return;
            }
            
            // Show loading state
            btn.disabled = true;
            btnText.innerHTML = '<span class="spinner"></span>';
            
            // Simulate brief calculation time (all local, no network)
            setTimeout(() => {
                // Get location data (never stored)
                const location = getApproxLocation(zip);
                const moonIllum = getMoonPhase();
                const conditions = getViewingConditions(location, moonIllum);
                const visibleObjects = calculateVisibleObjects(location);
                const tip = getViewingTip(location, moonIllum);
                
                // Update UI
                document.getElementById('location-name').textContent = location.displayName;
                document.getElementById('cond-darkness').textContent = conditions.darkness;
                document.getElementById('cond-moonlight').textContent = conditions.moonlight;
                document.getElementById('cond-sunset').textContent = conditions.sunset;
                document.getElementById('cond-best').textContent = conditions.bestViewing;
                document.getElementById('viewing-tip').innerHTML = `<strong>Tonight's tip:</strong> ${tip}`;
                
                // Render visible objects
                const skyGrid = document.getElementById('sky-objects');
                skyGrid.innerHTML = visibleObjects.map(obj => `
                    <div class="sky-object">
                        <div class="sky-object-header">
                            <div class="sky-object-icon ${obj.iconClass}">${obj.icon}</div>
                            <div>
                                <div class="sky-object-name">${obj.name}</div>
                                <div class="sky-object-type">${obj.type}</div>
                            </div>
                        </div>
                        <div class="sky-object-details">
                            <div class="sky-detail">
                                <div class="sky-detail-label">Visibility</div>
                                <span class="visibility-badge ${obj.visibility}">${obj.visibility}</span>
                            </div>
                            <div class="sky-detail">
                                <div class="sky-detail-label">Brightness</div>
                                <div class="sky-detail-value">${obj.brightness}</div>
                            </div>
                            <div class="sky-detail">
                                <div class="sky-detail-label">Direction</div>
                                <div class="sky-detail-value" style="font-size: 0.8rem;">${obj.direction}</div>
                            </div>
                            <div class="sky-detail">
                                <div class="sky-detail-label">Best Time</div>
                                <div class="sky-detail-value">${obj.bestTime}</div>
                            </div>
                        </div>
                        <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5;">
                            ${obj.description}
                        </p>
                    </div>
                `).join('');
                
                // Show results
                document.getElementById('sky-results').classList.add('visible');
                
                // Scroll to results
                document.getElementById('sky-results').scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Reset button
                btn.disabled = false;
                btnText.textContent = 'Update';
                
                // Clear the ZIP from memory after use (extra privacy measure)
                // The zip variable goes out of scope here anyway, but being explicit
                zipInput.value = '';
                
                console.log('Sky calculation complete. ZIP code was not stored.');
            }, 800);
        }

        function clearLocation() {
            document.getElementById('sky-results').classList.remove('visible');
            document.getElementById('zip-input').value = '';
            document.getElementById('btn-text').textContent = 'Show My Sky';
            document.getElementById('location-card').scrollIntoView({ behavior: 'smooth' });
        }

        // Input validation for ZIP
        document.getElementById('zip-input').addEventListener('input', function(e) {
            this.value = this.value.replace(/\D/g, '').slice(0, 5);
            this.style.borderColor = '';
        });

        // ==========================================
        // ROBUST IMAGE LOADING SYSTEM
        // Retry logic, fallbacks, and placeholders
        // ==========================================
        
        const ImageLoader = {
            // Fallback images for different categories
            fallbacks: {
                space: [
                    'https://images-assets.nasa.gov/image/PIA17171/PIA17171~thumb.jpg',
                    'https://images-assets.nasa.gov/image/PIA22946/PIA22946~thumb.jpg',
                    'https://images-assets.nasa.gov/image/PIA21046/PIA21046~thumb.jpg',
                    'https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e001738/GSFC_20171208_Archive_e001738~thumb.jpg',
                    'https://images-assets.nasa.gov/image/PIA18033/PIA18033~thumb.jpg'
                ],
                planet: [
                    'https://images-assets.nasa.gov/image/PIA22946/PIA22946~medium.jpg',
                    'https://images-assets.nasa.gov/image/PIA21046/PIA21046~medium.jpg',
                    'https://images-assets.nasa.gov/image/PIA17171/PIA17171~medium.jpg'
                ],
                nebula: [
                    'https://images-assets.nasa.gov/image/GSFC_20171208_Archive_e001738/GSFC_20171208_Archive_e001738~medium.jpg',
                    'https://images-assets.nasa.gov/image/PIA18033/PIA18033~medium.jpg'
                ]
            },
            
            // SVG placeholder with space theme
            placeholder: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect fill='%230a0a1a' width='400' height='300'/%3E%3Ccircle cx='200' cy='150' r='60' fill='%231a1a3e'/%3E%3Ccircle cx='320' cy='80' r='3' fill='%23ffffff' opacity='0.5'/%3E%3Ccircle cx='80' cy='220' r='2' fill='%23ffffff' opacity='0.4'/%3E%3Ccircle cx='350' cy='200' r='2' fill='%23ffffff' opacity='0.3'/%3E%3Ccircle cx='50' cy='100' r='2' fill='%23ffffff' opacity='0.5'/%3E%3Ccircle cx='150' cy='50' r='1.5' fill='%23ffffff' opacity='0.4'/%3E%3Ccircle cx='280' cy='250' r='1.5' fill='%23ffffff' opacity='0.3'/%3E%3Ctext x='200' y='155' text-anchor='middle' fill='%236366f1' font-family='sans-serif' font-size='24'%3Eâœ¦%3C/text%3E%3Ctext x='200' y='185' text-anchor='middle' fill='%239898b0' font-family='sans-serif' font-size='12'%3ELoading image...%3C/text%3E%3C/svg%3E`,
            
            // Failed placeholder
            failedPlaceholder: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect fill='%230a0a1a' width='400' height='300'/%3E%3Ccircle cx='200' cy='130' r='40' fill='none' stroke='%233a3a5a' stroke-width='3'/%3E%3Cline x1='175' y1='105' x2='225' y2='155' stroke='%233a3a5a' stroke-width='3'/%3E%3Ctext x='200' y='200' text-anchor='middle' fill='%235a5a78' font-family='sans-serif' font-size='14'%3EImage unavailable%3C/text%3E%3Ctext x='200' y='220' text-anchor='middle' fill='%233a3a5a' font-family='sans-serif' font-size='11'%3EClick to retry%3C/text%3E%3C/svg%3E`,
            
            maxRetries: 3,
            retryDelay: 1000, // ms
            
            init() {
                // Process all images
                document.querySelectorAll('.gallery-item img, .news-image img, .apod-hero img').forEach(img => {
                    this.setupImage(img);
                });
                
                // Watch for dynamically added images
                this.observeNewImages();
                
                console.log('ðŸ–¼ï¸ Image loader initialized');
            },
            
            setupImage(img) {
                // Skip if already processed
                if (img.dataset.loaderProcessed) return;
                img.dataset.loaderProcessed = 'true';
                
                // Store original src
                const originalSrc = img.src || img.dataset.src;
                img.dataset.originalSrc = originalSrc;
                img.dataset.retryCount = '0';
                
                // Set loading placeholder
                if (!img.complete) {
                    img.dataset.loadingPlaceholder = 'true';
                }
                
                // Add loading class to parent
                const parent = img.closest('.gallery-item, .news-image, .apod-hero');
                if (parent) {
                    parent.classList.add('image-loading');
                }
                
                // Handle load success
                img.addEventListener('load', () => this.onImageLoad(img));
                
                // Handle load error
                img.addEventListener('error', () => this.onImageError(img));
                
                // If image was already cached and loaded, trigger load
                if (img.complete && img.naturalWidth > 0) {
                    this.onImageLoad(img);
                }
            },
            
            onImageLoad(img) {
                const parent = img.closest('.gallery-item, .news-image, .apod-hero');
                if (parent) {
                    parent.classList.remove('image-loading', 'image-failed');
                    parent.classList.add('image-loaded');
                }
                img.style.opacity = '1';
                delete img.dataset.loadingPlaceholder;
            },
            
            onImageError(img) {
                const retryCount = parseInt(img.dataset.retryCount || '0');
                const originalSrc = img.dataset.originalSrc;
                
                console.log(`Image failed: ${originalSrc} (attempt ${retryCount + 1})`);
                
                if (retryCount < this.maxRetries) {
                    // Retry with delay
                    img.dataset.retryCount = (retryCount + 1).toString();
                    
                    setTimeout(() => {
                        // Try different URL variations
                        let newSrc = originalSrc;
                        
                        if (retryCount === 0) {
                            // First retry: try adding a cache buster
                            newSrc = originalSrc + (originalSrc.includes('?') ? '&' : '?') + 't=' + Date.now();
                        } else if (retryCount === 1) {
                            // Second retry: try NASA images API as fallback
                            newSrc = this.getNasaFallback(originalSrc);
                        } else {
                            // Third retry: try a different fallback
                            newSrc = this.getRandomFallback();
                        }
                        
                        console.log(`Retrying image: ${newSrc}`);
                        img.src = newSrc;
                    }, this.retryDelay * (retryCount + 1));
                } else {
                    // All retries failed, show fallback
                    this.showFallback(img);
                }
            },
            
            getNasaFallback(originalSrc) {
                // Try to extract image ID from NASA URL and use their images API
                const piaMatch = originalSrc.match(/pia(\d+)/i);
                if (piaMatch) {
                    return `https://images-assets.nasa.gov/image/PIA${piaMatch[1]}/PIA${piaMatch[1]}~medium.jpg`;
                }
                
                // Try general NASA image patterns
                if (originalSrc.includes('nasa.gov')) {
                    // Try images-assets subdomain
                    return originalSrc.replace('www.nasa.gov/wp-content/uploads', 'images-assets.nasa.gov/image');
                }
                
                return this.getRandomFallback();
            },
            
            getRandomFallback() {
                const allFallbacks = [
                    ...this.fallbacks.space,
                    ...this.fallbacks.planet,
                    ...this.fallbacks.nebula
                ];
                return allFallbacks[Math.floor(Math.random() * allFallbacks.length)];
            },
            
            showFallback(img) {
                const parent = img.closest('.gallery-item, .news-image, .apod-hero');
                
                // Use a random NASA image as fallback instead of placeholder
                const fallbackSrc = this.getRandomFallback();
                img.src = fallbackSrc;
                
                // Mark as failed but still show something
                if (parent) {
                    parent.classList.remove('image-loading');
                    parent.classList.add('image-fallback');
                }
                
                // Add click to retry functionality
                img.style.cursor = 'pointer';
                img.title = 'Click to retry loading original image';
                
                const retryHandler = () => {
                    img.dataset.retryCount = '0';
                    img.src = img.dataset.originalSrc;
                    img.removeEventListener('click', retryHandler);
                    img.style.cursor = '';
                    img.title = '';
                };
                
                img.addEventListener('click', retryHandler, { once: true });
            },
            
            observeNewImages() {
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        mutation.addedNodes.forEach((node) => {
                            if (node.nodeType === 1) {
                                // Check if the node itself is an image
                                if (node.tagName === 'IMG') {
                                    this.setupImage(node);
                                }
                                // Check for images within the node
                                node.querySelectorAll?.('img').forEach(img => {
                                    this.setupImage(img);
                                });
                            }
                        });
                    });
                });
                
                observer.observe(document.body, { childList: true, subtree: true });
            }
        };
        
        // Add CSS for image loading states
        const imageLoaderStyles = document.createElement('style');
        imageLoaderStyles.textContent = `
            /* Image loading states */
            .image-loading {
                position: relative;
            }
            
            .image-loading::before {
                content: '';
                position: absolute;
                inset: 0;
                background: linear-gradient(90deg, var(--bg-card) 25%, var(--bg-hover) 50%, var(--bg-card) 75%);
                background-size: 200% 100%;
                animation: image-shimmer 1.5s infinite;
                z-index: 1;
            }
            
            .image-loading::after {
                content: 'âœ¦';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2rem;
                color: var(--accent-glow);
                z-index: 2;
                animation: image-pulse 1.5s ease-in-out infinite;
            }
            
            @keyframes image-shimmer {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            
            @keyframes image-pulse {
                0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
                50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            }
            
            .image-loading img {
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            
            .image-loaded img {
                opacity: 1;
            }
            
            .image-loaded::before,
            .image-loaded::after {
                display: none;
            }
            
            .image-fallback {
                position: relative;
            }
            
            .image-fallback::after {
                content: 'â†» Click to retry';
                position: absolute;
                bottom: 8px;
                right: 8px;
                font-size: 0.7rem;
                padding: 0.25rem 0.5rem;
                background: rgba(0, 0, 0, 0.7);
                color: var(--text-dim);
                border-radius: 4px;
                z-index: 5;
                pointer-events: none;
            }
            
            /* Smooth image appearance */
            .gallery-item img,
            .news-image img,
            .apod-hero img {
                transition: opacity 0.3s ease, transform 0.5s ease;
            }
        `;
        document.head.appendChild(imageLoaderStyles);
        
        // Initialize image loader
        ImageLoader.init();
        
        // ==========================================
        // SPACE FACTS CAROUSEL
        // Draggable, auto-scroll, touch support
        // ==========================================
        
        const FactsCarousel = {
            track: null,
            cards: [],
            currentIndex: 0,
            cardWidth: 295, // card width + gap
            visibleCards: 4,
            autoScrollInterval: null,
            autoScrollEnabled: true,
            autoScrollDelay: 4000,
            isDragging: false,
            startX: 0,
            scrollLeft: 0,
            
            init() {
                this.track = document.getElementById('facts-track');
                if (!this.track) return;
                
                this.cards = Array.from(this.track.querySelectorAll('.fact-card'));
                this.totalCards = this.cards.length;
                
                // Calculate visible cards based on viewport
                this.calculateVisibleCards();
                
                // Setup controls
                this.setupControls();
                
                // Setup drag/touch
                this.setupDrag();
                
                // Setup dots
                this.setupDots();
                
                // Start auto-scroll
                this.startAutoScroll();
                
                // Handle resize
                window.addEventListener('resize', () => this.handleResize());
                
                // Pause on hover
                const carousel = document.getElementById('facts-carousel');
                carousel.addEventListener('mouseenter', () => this.pauseAutoScroll());
                carousel.addEventListener('mouseleave', () => {
                    if (this.autoScrollEnabled) this.startAutoScroll();
                });
                
                // Update counter
                this.updateCounter();
                
                console.log('ðŸŽ  Facts carousel initialized');
            },
            
            calculateVisibleCards() {
                const containerWidth = document.querySelector('.facts-container')?.offsetWidth || window.innerWidth;
                this.visibleCards = Math.floor((containerWidth - 60) / this.cardWidth);
                this.visibleCards = Math.max(1, Math.min(this.visibleCards, 5));
            },
            
            setupControls() {
                const prevBtn = document.getElementById('facts-prev');
                const nextBtn = document.getElementById('facts-next');
                const autoToggle = document.getElementById('facts-auto-toggle');
                
                prevBtn?.addEventListener('click', () => {
                    this.prev();
                    this.restartAutoScroll();
                });
                
                nextBtn?.addEventListener('click', () => {
                    this.next();
                    this.restartAutoScroll();
                });
                
                autoToggle?.addEventListener('click', () => {
                    this.toggleAutoScroll();
                });
            },
            
            setupDots() {
                const dotsContainer = document.getElementById('facts-dots');
                if (!dotsContainer) return;
                
                // Create dot groups (every 4 cards)
                const numDots = Math.ceil(this.totalCards / this.visibleCards);
                
                for (let i = 0; i < Math.min(numDots, 8); i++) {
                    const dot = document.createElement('div');
                    dot.className = 'facts-dot' + (i === 0 ? ' active' : '');
                    dot.addEventListener('click', () => {
                        this.goTo(i * this.visibleCards);
                        this.restartAutoScroll();
                    });
                    dotsContainer.appendChild(dot);
                }
            },
            
            setupDrag() {
                // Mouse events
                this.track.addEventListener('mousedown', (e) => this.startDrag(e));
                document.addEventListener('mousemove', (e) => this.drag(e));
                document.addEventListener('mouseup', () => this.endDrag());
                
                // Touch events
                this.track.addEventListener('touchstart', (e) => this.startDrag(e), { passive: true });
                this.track.addEventListener('touchmove', (e) => this.drag(e), { passive: true });
                this.track.addEventListener('touchend', () => this.endDrag());
                
                // Prevent image drag
                this.track.addEventListener('dragstart', (e) => e.preventDefault());
            },
            
            startDrag(e) {
                this.isDragging = true;
                this.track.classList.add('dragging');
                this.startX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
                this.scrollLeft = this.currentIndex * this.cardWidth;
                this.pauseAutoScroll();
            },
            
            drag(e) {
                if (!this.isDragging) return;
                
                const x = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
                const walk = (this.startX - x);
                const newPosition = this.scrollLeft + walk;
                
                this.track.style.transform = `translateX(-${newPosition}px)`;
            },
            
            endDrag() {
                if (!this.isDragging) return;
                
                this.isDragging = false;
                this.track.classList.remove('dragging');
                
                // Snap to nearest card
                const currentTransform = this.track.style.transform;
                const match = currentTransform.match(/translateX\(-?(\d+)/);
                if (match) {
                    const currentPos = parseInt(match[1]);
                    const newIndex = Math.round(currentPos / this.cardWidth);
                    this.goTo(Math.max(0, Math.min(newIndex, this.totalCards - this.visibleCards)));
                }
                
                if (this.autoScrollEnabled) this.startAutoScroll();
            },
            
            prev() {
                this.goTo(this.currentIndex - this.visibleCards);
            },
            
            next() {
                this.goTo(this.currentIndex + this.visibleCards);
            },
            
            goTo(index) {
                // Wrap around
                if (index < 0) {
                    index = Math.max(0, this.totalCards - this.visibleCards);
                } else if (index > this.totalCards - this.visibleCards) {
                    index = 0;
                }
                
                this.currentIndex = index;
                this.track.style.transform = `translateX(-${index * this.cardWidth}px)`;
                
                this.updateDots();
                this.updateCounter();
            },
            
            updateDots() {
                const dots = document.querySelectorAll('.facts-dot');
                const activeDotIndex = Math.floor(this.currentIndex / this.visibleCards);
                
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === activeDotIndex);
                });
            },
            
            updateCounter() {
                const counter = document.getElementById('facts-counter');
                if (counter) {
                    const current = Math.min(this.currentIndex + this.visibleCards, this.totalCards);
                    counter.textContent = `${this.currentIndex + 1}-${current} / ${this.totalCards}`;
                }
            },
            
            startAutoScroll() {
                if (this.autoScrollInterval) return;
                
                this.autoScrollInterval = setInterval(() => {
                    this.next();
                }, this.autoScrollDelay);
            },
            
            pauseAutoScroll() {
                if (this.autoScrollInterval) {
                    clearInterval(this.autoScrollInterval);
                    this.autoScrollInterval = null;
                }
            },
            
            restartAutoScroll() {
                this.pauseAutoScroll();
                if (this.autoScrollEnabled) {
                    setTimeout(() => this.startAutoScroll(), 1000);
                }
            },
            
            toggleAutoScroll() {
                this.autoScrollEnabled = !this.autoScrollEnabled;
                const toggle = document.getElementById('facts-auto-toggle');
                
                if (this.autoScrollEnabled) {
                    toggle?.classList.add('active');
                    this.startAutoScroll();
                } else {
                    toggle?.classList.remove('active');
                    this.pauseAutoScroll();
                }
            },
            
            handleResize() {
                this.calculateVisibleCards();
                // Reposition to valid index
                this.goTo(Math.min(this.currentIndex, this.totalCards - this.visibleCards));
            }
        };
        
        // Initialize facts carousel when DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => FactsCarousel.init());
        } else {
            FactsCarousel.init();
        }
    </script>
    
    <!-- Astronomy Engine Core -->
    <script src="astro-engine.js"></script>
    
    <!-- Star Map -->
    <script src="starmap.js"></script>
    
    <!-- Enhanced Features Module -->
    <script src="features.js"></script>
    
    <!-- Additional Feature Modules -->
    <script src="astro-features.js"></script>
    <script src="data-features.js"></script>
    <script src="ui-advanced.js"></script>
    
    <!-- UX Improvements (Sidebar, Smart Cards, Micro-interactions) -->
    <script src="ux-improvements.js"></script>
    
    <!-- Auto-Update System (Keeps data accurate over time) -->
    <script src="auto-update.js"></script>
    
    <!-- Initialize All Features -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize core systems
            if (window.Toast) Toast.init();
            if (window.ThemeManager) ThemeManager.init();
            if (window.SoundManager) SoundManager.init();
            if (window.KeyboardShortcuts) KeyboardShortcuts.init();
            
            // Initialize Tools Section
            initToolsSection();
            
            console.log('âœ¨ Cosmic Curiosity fully loaded!');
        });
        
        // Simple Tools Section Initialization
        function initToolsSection() {
            // Populate planets display
            const planetsContainer = document.getElementById('planets-display');
            if (planetsContainer && window.AstroEngine) {
                const planets = AstroEngine.getAllPlanets(new Date());
                planetsContainer.innerHTML = planets.map(p => `
                    <div class="planet-card-mini ${p.visible ? 'visible' : ''}">
                        <div class="planet-symbol" style="color: ${p.color}">${p.symbol}</div>
                        <div class="planet-name">${p.name}</div>
                        <div class="planet-status">${p.visible ? `${p.altitude.toFixed(0)}Â° altitude` : 'Below horizon'}</div>
                    </div>
                `).join('');
            } else if (planetsContainer) {
                // Fallback if AstroEngine not loaded
                const fallbackPlanets = [
                    { symbol: 'â˜¿', name: 'Mercury', visible: false, color: '#a0a0a0' },
                    { symbol: 'â™€', name: 'Venus', visible: true, alt: 15, color: '#ffd700' },
                    { symbol: 'â™‚', name: 'Mars', visible: true, alt: 32, color: '#ff4500' },
                    { symbol: 'â™ƒ', name: 'Jupiter', visible: true, alt: 58, color: '#daa520' },
                    { symbol: 'â™„', name: 'Saturn', visible: true, alt: 25, color: '#f4d03f' },
                    { symbol: 'â›¢', name: 'Uranus', visible: false, color: '#7fffd4' },
                    { symbol: 'â™†', name: 'Neptune', visible: false, color: '#4169e1' }
                ];
                planetsContainer.innerHTML = fallbackPlanets.map(p => `
                    <div class="planet-card-mini ${p.visible ? 'visible' : ''}">
                        <div class="planet-symbol" style="color: ${p.color}">${p.symbol}</div>
                        <div class="planet-name">${p.name}</div>
                        <div class="planet-status">${p.visible ? `${p.alt}Â° altitude` : 'Below horizon'}</div>
                    </div>
                `).join('');
            }
            
            // Update ISS position (simulated orbital position)
            updateISSPosition();
            setInterval(updateISSPosition, 5000);
            
            // Update meteor activity based on date
            updateMeteorActivity();
        }
        
        function updateISSPosition() {
            // Simulate ISS orbital position (changes over time)
            const now = Date.now();
            const orbitalPeriod = 92.65 * 60 * 1000; // 92.65 minutes in ms
            const phase = (now % orbitalPeriod) / orbitalPeriod;
            
            // ISS orbit is inclined 51.6Â°
            const lat = 51.6 * Math.sin(phase * 2 * Math.PI);
            const lon = ((phase * 360 + 180) % 360) - 180;
            
            const latEl = document.getElementById('iss-lat');
            const lonEl = document.getElementById('iss-lon');
            
            if (latEl) latEl.textContent = lat.toFixed(2) + 'Â°';
            if (lonEl) lonEl.textContent = lon.toFixed(2) + 'Â°';
        }
        
        function updateMeteorActivity() {
            const meteorEl = document.getElementById('meteor-display');
            if (!meteorEl) return;
            
            const now = new Date();
            const month = now.getMonth();
            const day = now.getDate();
            
            // Check for active meteor showers
            const showers = [
                { name: 'Quadrantids', peak: [0, 3], rate: 120 },
                { name: 'Lyrids', peak: [3, 22], rate: 18 },
                { name: 'Eta Aquariids', peak: [4, 6], rate: 50 },
                { name: 'Perseids', peak: [7, 12], rate: 100 },
                { name: 'Orionids', peak: [9, 21], rate: 20 },
                { name: 'Leonids', peak: [10, 17], rate: 15 },
                { name: 'Geminids', peak: [11, 14], rate: 150 }
            ];
            
            let activeShower = null;
            for (const shower of showers) {
                const [peakMonth, peakDay] = shower.peak;
                const dayDiff = Math.abs((month * 30 + day) - (peakMonth * 30 + peakDay));
                if (dayDiff <= 7) {
                    activeShower = shower;
                    break;
                }
            }
            
            if (activeShower) {
                meteorEl.innerHTML = `
                    <span class="tool-value" style="color: #10b981;">Active!</span>
                    <span class="tool-detail">${activeShower.name} (~${activeShower.rate}/hr)</span>
                `;
            } else {
                meteorEl.innerHTML = `
                    <span class="tool-value">Low</span>
                    <span class="tool-detail">No major showers active</span>
                `;
            }
        }
    </script>
</body>
</html>
